(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{162:function(e,t,a){},163:function(e,t,a){},174:function(e,t,a){e.exports=a.p+"static/media/bgc.4b6c9fc5.jpg"},175:function(e,t,a){e.exports=a.p+"static/media/loading.d80d571f.gif"},176:function(e,t,a){e.exports=a.p+"static/media/crap1.73da7f75.jpg"},180:function(e,t,a){e.exports=a(335)},216:function(e,t){},310:function(e,t,a){},311:function(e,t,a){},312:function(e,t,a){},313:function(e,t,a){},314:function(e,t,a){},334:function(e,t,a){},335:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(30),o=a.n(s),c=a(10),i=a(15),u=a(23),l=Object(u.a)(),p=(a(53),a(1)),m=a.n(p),d=a(5),h=a(6),f=a(8),g=a(7),v=a(9),b=a(52),E=a.n(b),y=E.a.create({withCredentials:!0}),w=function(e,t){return k(e,"GET",t)},O=function(e,t){return k(e,"POST",t)},N=function(e,t){return k(e,"PUT",t)},j=function(e,t){return k(e,"DELETE",t)},x=function(e,t){return k(e,"PATCH",t)};function k(e){var t,a,n,r=arguments;return m.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:"get",a=r.length>2&&void 0!==r[2]?r[2]:null,r.length>3?r[3]:void 0,s.prev=3,s.next=6,m.a.awrap(y({url:"".concat("/api").concat(e),method:t,data:a}));case 6:return n=s.sent,s.abrupt("return",n.data);case 10:throw s.prev=10,s.t0=s.catch(3),console.log("Had Issues ".concat(t,"ing to the backend, endpoint: ").concat(e,", with data: ").concat(a)),console.dir(s.t0),s.t0.response&&401===s.t0.response.status&&l.push("/"),s.t0;case 16:case"end":return s.stop()}}),null,null,[[3,10]])}var S={query:function(e){var t,a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=C(e),n.next=3,m.a.awrap(w(t));case 3:return a=n.sent,console.log("temp: ",a),n.abrupt("return",a);case 6:case"end":return n.stop()}}))},get:function(e){return w("/house/".concat(e))},save:function(e){var t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e._id){a.next=6;break}return a.next=3,m.a.awrap(N("/house/".concat(e._id),e));case 3:a.t0=a.sent,a.next=9;break;case 6:return a.next=8,m.a.awrap(O("/house",e));case 8:a.t0=a.sent;case 9:return t=a.t0,a.abrupt("return",t);case 11:case"end":return a.stop()}}))},remove:function(e){return j("/house/".concat(e),e)},getHouses:function(){return w("/house")}};function C(e){var t="/house";if(e.byId&&(t+="/".concat(e._id)),(""===e.location||e.location)&&(t+="?country=".concat(e.location)),e.startDate&&e.endDate&&e.location&&(t+="&startDate=".concat(e.startDate,"&endDate=").concat(e.endDate)),e.numOfperson&&(t+="&capacity=".concat(e.numOfperson)),e.ids){var a=e.ids.join();t+="?ids=".concat(a)}if(e.countries){var n=e.countries.join();t="/house?countries=".concat(n)}return e.price&&(t+="&price=".concat(e.price)),t}function I(e){return{type:"UPDATE_ROUTE",route:e}}function U(e){return function(t){var a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t({type:"LOADING_START"}),t(q(e)),n.next=5,m.a.awrap(S.query(e));case 5:return a=n.sent,console.log("filterHouses action: ",a),n.next=9,m.a.awrap(t(T(a)));case 9:n.next=15;break;case 11:throw n.prev=11,n.t0=n.catch(0),console.log("filter houses action err",n.t0),n.t0;case 15:return n.prev=15,t({type:"LOADING_DONE"}),n.finish(15);case 18:case"end":return n.stop()}}),null,null,[[0,11,15,18]])}}function D(e){return function(t){t(q(e))}}function A(e){return function(t){var a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t({type:"LOADING_START"}),n.next=4,m.a.awrap(S.save(e));case 4:return a=n.sent,e._id?t(_(a)):t(M(a)),n.abrupt("return",a);case 9:n.prev=9,n.t0=n.catch(0),console.log("HouseActions: err in addHouse",n.t0);case 12:return n.prev=12,t({type:"LOADING_DONE"}),n.finish(12);case 15:case"end":return n.stop()}}),null,null,[[0,9,12,15]])}}function H(e){return function(t){return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m.a.awrap(S.remove(e));case 3:t(F(e)),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),console.log(a.t0);case 9:case"end":return a.stop()}}),null,null,[[0,6]])}}function L(e,t){return{type:"SET_BEST_".concat(e.toUpperCase()),houses:t}}function B(e){return{type:"SET_FAVS",houses:e}}function R(e){return{type:"SET_MY_HOUSES",houses:e}}function T(e){return{type:"SET_HOUSES",houses:e}}function q(e){return{type:"SET_FILTER",filter:e}}function M(e){return{type:"HOUSE_ADD",house:e}}function _(e){return{type:"HOUSE_UPDATE",house:e}}function F(e){return{type:"HOUSE_REMOVE",houseId:e}}var P=a(2),G=a(11),z=a(35),Y=(a(103),a(54),a(55),a(87)),W=a(12),K=a.n(W),V=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={startDate:null,endDate:null},a.handleChange=function(e,t){a.setState(Object(z.a)({},e,t))},a.sendDates=function(){a.props.changeDates(Object(P.a)({},a.state))},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Y.DateRangePicker,{startDatePlaceholderText:"mm/dd/yyyy",endDatePlaceholderText:"mm/dd/yyyy",startDate:this.state.startDate,startDateId:"start-date",endDate:this.state.endDate,endDateId:"end-date",onDatesChange:function(t){var a=t.startDate,n=t.endDate;return e.setState({startDate:a,endDate:n},(function(){return e.sendDates()}))},focusedInput:this.state.focusedInput,onFocusChange:function(t){return e.setState({focusedInput:t})}})}}]),t}(n.Component),Q={getOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Z(e);return w("/order".concat(t))},getById:function(e){return w("/order/".concat(e))},remove:function(e){return j("/order/".concat(e))},update:function(e){return N("/order/".concat(e._id),e)},save:function(e){var t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e._id){a.next=6;break}return a.next=3,m.a.awrap(N("/order/".concat(e._id),e));case 3:a.t0=a.sent,a.next=9;break;case 6:return a.next=8,m.a.awrap(O("/order",e));case 8:a.t0=a.sent;case 9:return t=a.t0,a.abrupt("return",t);case 11:case"end":return a.stop()}}))}};function Z(e){var t="";if(e.orders){var a=e.orders;console.log(" _makeQuerySTR: orders are ",a);var n=a.length;return t=a.reduce((function(e,t,a){return a<n-1?e+"order".concat(a,"=").concat(t,"&"):e+"order".concat(a,"=").concat(t)}),"?reserved=true&")}return e.houserequests&&(t="?houserequests=true&houseId=".concat(e.houseId)),e.dates&&(t="?dates=true&startDate=".concat(e.startDate,"&endDate=").concat(e.endDate)),t}function J(e){return{type:"SET_ORDERS",orders:e}}function X(e){return{type:"ORDER_UPDATE",order:e}}function $(e){return{type:"ORDER_ADD",order:e}}a(34);var ee=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={filterBy:{numOfperson:1,location:"",nightsNum:1},startDate:null,endDate:null},a.changeDates=function(e){var t={startDate:K.a.utc(e.startDate).format(),endDate:K.a.utc(e.endDate).format()};a.setState(Object(P.a)({},a.state,{},t))},a.onChangeCap=function(e,t){1===a.state.filterBy[t]&&-1===e||a.setState((function(a){return a.filterBy[t]+=e}))},a.setLocation=function(e){var t=e.target.name,n=e.target.value,r=Object(P.a)({},a.state.filterBy);r[t]=n,a.setState({filterBy:r})},a.handleChange=function(e){a.setState({startDate:e})},a.onSearch=function(){var e=Object(P.a)({},a.state.filterBy);e.location=e.location.toLowerCase(),e.startDate=a.state.startDate,e.endDate=a.state.endDate,a.props.setFilter(e)},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"search-form flex column space-between"},r.a.createElement("div",{className:"search-form-title"},"Book with Turtle House and feel At Home, Wherever You Go."),r.a.createElement("div",null,r.a.createElement("div",{className:"form-input-header"},"WHERE"),r.a.createElement("input",{onChange:this.setLocation,className:"form-loc",value:this.state.filterBy.loc,type:"text",name:"location",placeholder:"Anywhere"})),r.a.createElement("div",null,r.a.createElement("div",{className:"form-input-header"},"CHECK-IN / CHECKOUT"),r.a.createElement(V,{changeDates:this.changeDates})),r.a.createElement("div",{className:"form-cap flex space-between align-center"},r.a.createElement("span",{className:"form-input-header"},"GUESTS"),r.a.createElement("span",{className:"form-cap-control flex space-between"},r.a.createElement("button",{onClick:function(t){return e.onChangeCap(1,"numOfperson")},className:"form-num-btn pointer",name:"numOfperson"},"+"),r.a.createElement("span",{className:"form-cap-num"},this.state.filterBy.numOfperson),r.a.createElement("button",{onClick:function(t){return e.onChangeCap(-1,"numOfperson")},className:"form-num-btn pointer minus",name:"numOfperson"},"-"))),r.a.createElement(G.a,{className:"align-self",to:"/house"},r.a.createElement("button",{onClick:this.onSearch,className:"form-btn pointer flex align-center justify-center"},"Search")))}}]),t}(n.Component),te={setFilter:D,filterHouses:U,loadOrders:function(e){return function(t){var a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.a.awrap(Q.query(e));case 3:a=n.sent,t(J(a)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log("OrderActions: err in loadOrders",n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]])}}},ae=Object(c.b)((function(e){return{filterBy:e.house.filterBy,houses:e.house.houses}}),te)(ee),ne=a(174),re=a.n(ne),se=a(38),oe={login:function(e){var t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.awrap(O("/auth/login",e));case 2:return t=a.sent,a.abrupt("return",ce(t));case 4:case"end":return a.stop()}}))},logout:function(){return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.awrap(O("/auth/logout"));case 2:console.log("front clear session user logged out"),sessionStorage.clear();case 4:case"end":return e.stop()}}))},signup:function(e){var t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.awrap(O("/auth/signup",e));case 2:return t=a.sent,a.abrupt("return",ce(t));case 4:case"end":return a.stop()}}))},getUsers:function(){return w("/user")},getById:function(e){return w("/user/".concat(e))},remove:function(e){return j("/user/".concat(e))},update:function(e){return N("/user/".concat(e._id),e)},addFavorite:function(e,t){return x("/user/".concat(e._id),t)}};function ce(e){return sessionStorage.setItem("user",JSON.stringify(e)),e}function ie(e){return function(t){var a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.a.awrap(oe.getById(e));case 3:return a=n.sent,t(de(a)),n.abrupt("return",a);case 8:n.prev=8,n.t0=n.catch(0),console.log("UserActions: err in get user",n.t0);case 11:case"end":return n.stop()}}),null,null,[[0,8]])}}function ue(e){return function(t){var a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.a.awrap(oe.update(e));case 3:a=n.sent,t(le(a)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log("UserActions: err in updateUser",n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]])}}function le(e){return{type:"SET_USER",user:e}}function pe(e){return{type:"SET_USERS",users:e}}function me(e){return{type:"USER_REMOVE",userId:e}}function de(e){return{type:"USER_LOAD",user:e}}var he=a(73),fe=a.n(he),ge={height:"10px",width:"10px",display:"block",fill:"rgb(34, 34, 34)",position:"absolute",left:"30%",top:"32%"},ve=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={imgIdx:0,isFav:!1},a.loadImage=function(e,t){e.preventDefault();var n=a.props.house.imgs.length,r=a.state.imgIdx;return r+t>=n?a.setState({imgIdx:0}):r+t<0?a.setState({imgIdx:n-1}):a.setState({imgIdx:r+t})},a.onFavClick=function(e){e.preventDefault(),e.stopPropagation(),a.setState({isFav:!a.state.isFav},a.updateFavoriets)},a.updateFavoriets=function(){var e,t;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:(e=Object(P.a)({},a.props.loggedInUser))?(t=e.favorites,a.state.isFav?(t=[].concat(Object(se.a)(t),[a.props.house._id]),e.favorites=t):(t=t.filter((function(e){return e!==a.props.house._id})),e.favorites=t),a.props.updateUser(e)):console.log("Please login/signup");case 2:case"end":return n.stop()}}))},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.house._id;if(this.props.loggedInUser){var t=this.props.loggedInUser.favorites.some((function(t){return e===t}));this.setState({isFav:t})}}},{key:"render",value:function(){var e=this;return r.a.createElement(G.a,{to:"/house/"+this.props.house._id},r.a.createElement("section",{className:"house-preview-container"},r.a.createElement("div",{className:"house-preview-image-container"},r.a.createElement("img",{className:"house-preview-image",src:this.props.house.imgs[this.state.imgIdx],alt:""}),r.a.createElement("div",{className:"house-preview-btn-container"},r.a.createElement("div",{className:"house-preview-btn"},r.a.createElement("div",{className:"house-preview-heart-container",onClick:this.onFavClick},r.a.createElement("svg",{className:"house-preview-heart",viewBox:"0 0 24 24",fill:!1===this.state.isFav?"white":"red",fillOpacity:"1",stroke:"#222222",strokeWidth:"1.4",focusable:"false","aria-hidden":"true",role:"presentation",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("path",{d:"m17.5 2.9c-2.1 0-4.1 1.3-5.4 2.8-1.6-1.6-3.8-3.2-6.2-2.7-1.5.2-2.9 1.2-3.6 2.6-2.3 4.1 1 8.3 3.9 11.1 1.4 1.3 2.8 2.5 4.3 3.6.4.3 1.1.9 1.6.9s1.2-.6 1.6-.9c3.2-2.3 6.6-5.1 8.2-8.8 1.5-3.4 0-8.6-4.4-8.6",strokeLinejoin:"round"})))),r.a.createElement("div",{className:"house-preview-btn"},r.a.createElement("div",{className:"house-preview-btn-prev",onClick:function(t){return e.loadImage(t,-1)}},r.a.createElement("svg",{viewBox:"0 0 16 16",role:"presentation","aria-hidden":"true",focusable:"false",style:ge},r.a.createElement("path",{d:"m10.8 16c-.4 0-.7-.1-.9-.4l-6.8-6.7c-.5-.5-.5-1.3 0-1.8l6.8-6.7c.5-.5 1.2-.5 1.7 0s .5 1.2 0 1.7l-5.8 5.9 5.8 5.9c.5.5.5 1.2 0 1.7-.2.3-.5.4-.8.4"}))),r.a.createElement("div",{className:"house-preview-btn-next",onClick:function(t){return e.loadImage(t,1)}},r.a.createElement("svg",{viewBox:"0 0 16 16",role:"presentation","aria-hidden":"true",focusable:"false",style:ge},r.a.createElement("path",{d:"m5.3 16c .3 0 .6-.1.8-.4l6.8-6.7c.5-.5.5-1.3 0-1.8l-6.8-6.7c-.5-.5-1.2-.5-1.7 0s-.5 1.2 0 1.7l5.8 5.9-5.8 5.9c-.5.5-.5 1.2 0 1.7.2.3.5.4.9.4"})))),r.a.createElement("div",{className:"house-preview-btn"},r.a.createElement("div",{className:"house-preview-pagination-container"},this.props.house.imgs.map((function(t,a){return a!==e.state.imgIdx?r.a.createElement("div",{key:a,className:"house-preview-pagination-circle"}):r.a.createElement("div",{key:a,className:"house-preview-pagination-circle-currimg"},r.a.createElement("img",{src:fe.a,alt:"",className:"house-preview-pagination-turtle"}))})))))),r.a.createElement("div",{className:"house-preview-details"},r.a.createElement("div",{className:"house-preview-first-line-container"},r.a.createElement("span",{className:"house-preview-first-line-superhost"},"SUPERHOST"),r.a.createElement("div",{className:"house-preview-first-line-tag"},"Entire guesthouse"),r.a.createElement("div",{className:"house-preview-first-line-rate-container"},r.a.createElement("svg",{className:"house-preview-rate-star",viewBox:"0 0 1000 1000",role:"presentation","aria-hidden":"true",focusable:"false"},r.a.createElement("path",{d:"M972 380c9 28 2 50-20 67L725 619l87 280c11 39-18 75-54 75-12 0-23-4-33-12L499 790 273 962a58 58 0 0 1-78-12 50 50 0 0 1-8-51l86-278L46 447c-21-17-28-39-19-67 8-24 29-40 52-40h280l87-279c7-23 28-39 52-39 25 0 47 17 54 41l87 277h280c24 0 45 16 53 40z"})),r.a.createElement("span",{className:"house-preview-first-line-rate-score"},this.props.house.rating))),r.a.createElement("span",{className:"house-preview-second-line-container"},this.props.house.title),r.a.createElement("div",{className:"house-preview-third-line-container"},r.a.createElement("div",{className:"house-preview-third-line-cost"},r.a.createElement("span",{className:"house-preview-third-line-cost-part-one"},"$",this.props.house.price),r.a.createElement("span",{className:"house-preview-third-line-cost-part-two"},"/night"))))))}}]),t}(n.Component),be={updateUser:ue,getUserById:ie},Ee=Object(c.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),be)(ve),ye=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).getClassAddition=function(){switch(a.props.location.pathname){case"/":return"home-list";case"/favorites":return"favorite-list";case"/myhouses":return"my-houses";case"/house":return"house-page";default:return""}},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.houses;return r.a.createElement("section",{className:"house-container "+this.getClassAddition()},r.a.createElement("ul",{className:"house-list clean-list "+this.getClassAddition()},e.map((function(e,t){return r.a.createElement("li",{key:e._id},r.a.createElement(Ee,{house:e}))}))))}}]),t}(n.Component),we=ye=Object(i.f)(ye),Oe=a(63),Ne=a.n(Oe),je=a(74),xe=a.n(je),ke=a(75),Se=a.n(ke),Ce="\nAfghanistan\nAlbania\nAlgeria\nAndorra\nAngola\nAntigua & Deps\nArgentina\nArmenia\nAustralia\nAustria\nAzerbaijan\nBahamas\nBahrain\nBangladesh\nBarbados\nBelarus\nBelgium\nBelize\nBenin\nBhutan\nBolivia\nBosnia Herzegovina\nBotswana\nBrazil\nBrunei\nBulgaria\nBurkina\nBurundi\nCambodia\nCameroon\nCanada\nCape Verde\nCentral African Rep\nChad\nChile\nChina\nColombia\nComoros\nCongo\nCongo {Democratic Rep}\nCosta Rica\nCroatia\nCuba\nCyprus\nCzech Republic\nDenmark\nDjibouti\nDominica\nDominican Republic\nEast Timor\nEcuador\nEgypt\nEl Salvador\nEngland\nEquatorial Guinea\nEritrea\nEstonia\nEthiopia\nFiji\nFinland\nFrance\nGabon\nGambia\nGeorgia\nGermany\nGhana\nGreece\nGrenada\nGuatemala\nGuinea\nGuinea-Bissau\nGuyana\nHaiti\nHonduras\nHungary\nIceland\nIndia\nIndonesia\nIran\nIraq\nIreland {Republic}\nIsrael\nItaly\nIvory Coast\nJamaica\nJapan\nJordan\nKazakhstan\nKenya\nKiribati\nKorea North\nKorea South\nKosovo\nKuwait\nKyrgyzstan\nLaos\nLatvia\nLebanon\nLesotho\nLiberia\nLibya\nLiechtenstein\nLithuania\nLuxembourg\nMacedonia\nMadagascar\nMalawi\nMalaysia\nMaldives\nMali\nMalta\nMarshall Islands\nMauritania\nMauritius\nMexico\nMicronesia\nMoldova\nMonaco\nMongolia\nMontenegro\nMorocco\nMozambique\nMyanmar, {Burma}\nNamibia\nNauru\nNepal\nNetherlands\nNew Zealand\nNicaragua\nNiger\nNigeria\nNorway\nOman\nPakistan\nPalau\nPanama\nPapua New Guinea\nParaguay\nPeru\nPhilippines\nPoland\nPortugal\nQatar\nRomania\nRussian Federation\nRwanda\nSt Kitts & Nevis\nSt Lucia\nSaint Vincent & the Grenadines\nSamoa\nSan Marino\nSao Tome & Principe\nSaudi Arabia\nSenegal\nSerbia\nSeychelles\nSierra Leone\nSingapore\nSlovakia\nSlovenia\nSolomon Islands\nSomalia\nSouth Africa\nSouth Sudan\nSpain\nSri Lanka\nSudan\nSuriname\nSwaziland\nSweden\nSwitzerland\nSyria\nTaiwan\nTajikistan\nTanzania\nThailand\nTogo\nTonga\nTrinidad & Tobago\nTunisia\nTurkey\nTurkmenistan\nTuvalu\nUganda\nUkraine\nUnited Arab Emirates\nUnited Kingdom\nUnited States\nUruguay\nUzbekistan\nVanuatu\nVatican City\nVenezuela\nVietnam\nYemen\nZambia\nZimbabwe".split("\n"),Ie=(a(310),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={filterBy:a.props.filterBy,isMenuOpen:!1,suggestions:[],text:a.props.filterBy.location},a.onChange=function(e){var t=e.target.name,n=e.target.value,r=Object(P.a)({},a.state.filterBy);r[t]=n,a.setState({filterBy:r},(function(){return a.props.filterHouses(r)}))},a.handleFocus=function(){a.props.openMenu()},a.onTextChange=function(e){var t=e.target.value,n=[];if(t.length>0){var r=new RegExp("^".concat(t),"i");n=Ce.sort().filter((function(e){return r.test(e)}))}var s=["Anywhere"].concat(Object(se.a)(n));a.setState((function(){return{suggestions:s,text:t}}))},a.handleSelect=function(){return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.awrap(a.props.filterHouses(a.state.filterBy));case 2:a.props.history.push("/house");case 3:case"end":return e.stop()}}))},a.renderSuggestions=function(){var e=a.state.suggestions;return 0===e.length?null:r.a.createElement("ul",{className:"country-list"},e.map((function(e,t){return r.a.createElement("li",{key:t,onClick:function(){return a.selectedText(e)}},e)})))},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.setState({filterBy:Object(P.a)({},this.props.filterBy)})}},{key:"componentDidUpdate",value:function(e){e.filterBy!==this.props.filterBy&&this.setState({filterBy:Object(P.a)({},this.props.filterBy)})}},{key:"selectedText",value:function(e){"Anywhere"===e&&(e="");var t=Object(P.a)({},this.state.filterBy);t.location=e.toLowerCase(),this.setState({text:e,suggestions:[],filterBy:t},this.handleSelect)}},{key:"render",value:function(){var e=this.state,t=e.text;e.suggestions,e.filterBy;return r.a.createElement("div",{className:"flex column"},r.a.createElement("input",{autoComplete:"off",onChange:this.onTextChange,className:"form-loc",value:t,type:"text",name:"location",placeholder:"Where?"}),r.a.createElement("div",null," ",this.renderSuggestions()))}}]),t}(n.Component)),Ue={filterHouses:U,setFilter:D},De=Object(i.f)(Object(c.b)((function(e){return{filterBy:e.house.filterBy}}),Ue)(Ie)),Ae=(a(162),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={isMenuOpen:!1},a.onToggleMenu=function(){a.setState((function(e){return e.isMenuOpen=!e.isMenuOpen}))},a.onSaveFilter=function(){a.onToggleMenu(),a.props.saveFilter()},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.state.isMenuOpen;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"filter-container flex column"},r.a.createElement("button",{onClick:this.onToggleMenu,className:"filter-btn pointer"},"Guests"),r.a.createElement("div",{className:"filter-menu ".concat(t?"shown-filter column space-between":"")},r.a.createElement("span",{className:"form-cap-control flex space-between align-center"},r.a.createElement("button",{onClick:function(){return e.props.onChangeCap(1,"numOfperson")},className:"filter-num-btn pointer",name:"numOfperson"},"+"),r.a.createElement("span",{className:"form-cap-num"},this.props.filterBy.numOfperson),r.a.createElement("button",{onClick:function(){return e.props.onChangeCap(-1,"numOfperson")},className:"filter-num-btn pointer",name:"numOfperson"},"-")),r.a.createElement(G.a,{to:"/house"},r.a.createElement("button",{onClick:this.onSaveFilter,className:"save-filter-btn pointer"},"Save")))))}}]),t}(n.Component)),He=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={isMenuOpen:!1},a.onToggleMenu=function(){a.setState((function(e){return e.isMenuOpen=!e.isMenuOpen}))},a.onSaveFilter=function(){a.onToggleMenu(),a.props.saveFilter()},a.onChange=function(e){a.props.onChangePrice(+e.target.value)},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state.isMenuOpen;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"filter-container pointer flex column"},r.a.createElement("button",{onClick:this.onToggleMenu,className:"filter-btn"},"Price"),r.a.createElement("div",{className:"filter-menu ".concat(e?"shown-filter price column space-between":"")},r.a.createElement("input",{onChange:this.onChange,type:"range",name:"price",value:this.props.price,min:"50",max:"1000"}),r.a.createElement("label",{htmlFor:"price"},"Max price: $",this.props.price),r.a.createElement(G.a,{to:"/house"},r.a.createElement("button",{onClick:this.onSaveFilter,className:"save-filter-btn pointer"},"Save")))))}}]),t}(n.Component),Le=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={filterBy:Object(P.a)({},a.props.filterBy),startDate:null,endDate:null},a.changeDates=function(e){var t={startDate:K.a.utc(e.startDate).format(),endDate:K.a.utc(e.endDate).format()};a.setState({filterBy:Object(P.a)({},a.state.filterBy,{},t)},a.saveFilter)},a.onChangeCap=function(e,t){1===a.state.filterBy[t]&&-1===e||a.setState((function(a){return a.filterBy[t]+=e}))},a.onChangePrice=function(e){a.setState((function(t){return t.filterBy.price=e}))},a.saveFilter=function(){a.props.filterHouses(a.state.filterBy)},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(e){e.filterBy!==this.props.filterBy&&this.setState({filterBy:Object(P.a)({},this.props.filterBy)})}},{key:"render",value:function(){var e=this.state.filterBy;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex"},r.a.createElement(Ae,{saveFilter:this.saveFilter,filterBy:e,onChangeCap:this.onChangeCap}),r.a.createElement(He,{price:this.state.filterBy.price,saveFilter:this.saveFilter,onChangePrice:this.onChangePrice})))}}]),t}(n.Component),Be={filterHouses:U,setFilter:D},Re=Object(c.b)((function(e){return{filterBy:e.house.filterBy}}),Be)(Le),Te=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={user:"",isMenuOpen:!1,isScreen:!1},a.openMenu=function(){a.setState({isMenuOpen:!0})},a.toggleHamburger=function(){var e=Object(P.a)({},a.state,{isScreen:!a.state.isScreen});a.setState(Object(P.a)({},a.state,{},e))},a.dispalyFilters=function(){return["housepage","housedetails"].some((function(e){return e===a.props.caller}))},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props.history)}},{key:"render",value:function(){var e=this,t=this.props.loggedInUser,a="home"!==this.props.caller?"not-home":" yes-home",n=function(){return"home"!==e.props.caller?"nav-item black":"nav-item"},s=function(){return"home"!==e.props.caller?"nav-link black":"nav-link"};return r.a.createElement("div",{className:"nav-container "+a},r.a.createElement("div",{className:"harta-barta"},r.a.createElement("img",{className:"logo".concat(this.state.isScreen?" show "+a:" hide "+a),src:"home"!==this.props.caller?xe.a:Ne.a,onClick:this.toggleHamburger}),r.a.createElement("div",{className:n()+" small-screen-hide"},"home"!==this.props.caller?r.a.createElement(De,{openMenu:this.openMenu}):""),this.dispalyFilters()&&r.a.createElement("div",{className:"filter-buttons-container ".concat(this.state.isMenuOpen?"shown-filter-container":"")},r.a.createElement(Re,null))),r.a.createElement("div",{className:n()+" small-screen-show"},"home"!==this.props.caller?r.a.createElement(De,{openMenu:this.openMenu}):""),r.a.createElement("div",{className:this.state.isScreen?"nav-list-container ":"nav-list-container hide "+a},r.a.createElement("ul",{className:("home"!==e.props.caller?"nav-links flex align-center space-between black":"nav-links flex align-center space-between")+" "+a},r.a.createElement(G.a,{to:"/"},r.a.createElement("img",{className:"not-home"===a?"logo small-screen-hide":"logo invisible small-screen-hide",src:"home"!==this.props.caller?xe.a:Ne.a,onClick:this.toggleHamburger})),r.a.createElement("li",{key:"1",id:"two",onClick:this.toggleHamburger,className:n()},r.a.createElement(G.a,{to:"/About",className:s()},"About")),r.a.createElement("li",{key:"2",id:"three",onClick:this.toggleHamburger,className:n()+" small-screen-show"},r.a.createElement(G.a,{to:"/",className:s()},"Home")),this.props.loggedInUser&&r.a.createElement("li",{id:"four",key:"3",onClick:this.toggleHamburger,className:n()},r.a.createElement(G.a,{to:"/house/edit",className:s()},"Host")),this.props.loggedInUser&&r.a.createElement("li",{id:"five",key:"4",onClick:this.toggleHamburger,className:n()},r.a.createElement(G.a,{to:"/reserved",className:s(),onClick:function(){var t=e.props.caller;console.log("this cmp was called by",t)}},"Reserved")),this.props.loggedInUser&&r.a.createElement("li",{id:"six",key:"5",onClick:this.toggleHamburger,className:n()},r.a.createElement(G.a,{to:"/favorites",className:s()},"Favorites")),this.props.loggedInUser&&r.a.createElement("li",{id:"seven",key:"6",onClick:this.toggleHamburger,className:n()},r.a.createElement(G.a,{to:"/requests",className:s()},"Requests")),this.props.loggedInUser&&r.a.createElement("li",{id:"eight",key:"7",onClick:this.toggleHamburger,className:n()+" small-screen-show"},r.a.createElement(G.a,{to:"/login",className:s(this.props.loggedInUser.username)},"(".concat(this.props.loggedInUser.username,")")),r.a.createElement(G.a,{to:"/login"},"Logout")),!this.props.loggedInUser&&r.a.createElement("li",{id:"eight",key:"7",onClick:this.toggleHamburger,className:n()},r.a.createElement(G.a,{to:"/login",className:s()},"Login/Signup")),r.a.createElement("li",{className:n()},t?r.a.createElement("div",null,r.a.createElement(G.a,{to:"/"},r.a.createElement("div",{className:t?"nav-item-user-img-container visible":"nav-item-user-img-container"},r.a.createElement("img",{src:t?t.imgURL:Se.a,className:"nav-item-user-img"})))):r.a.createElement("div",null))),this.dispalyFilters()&&r.a.createElement("div",{className:"filter-buttons-container ".concat(this.state.isMenuOpen?"shown-filter-container":"")},r.a.createElement(Re,null))))}}]),t}(n.Component),qe=(Object(c.b)((function(e){return{loggedInUser:e.user.loggedInUser,isLoading:e.system.isLoading}}),null)(Te),a(175)),Me=a.n(qe),_e=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"loading-element-container"},r.a.createElement("img",{style:{width:"80%"},src:Me.a,alt:"image didn't load"}),r.a.createElement("span",{className:"loading-element-container-text"},"Loading..."))}}]),t}(n.Component),Fe=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={},a.load=function(){return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:a.props.getBestByCountry({countries:["israel"]}),a.props.getBestByCountry({countries:["spain"]}),a.props.getBestByCountry({countries:["italy"]});case 3:case"end":return e.stop()}}))},a.getBestByCountry=function(e){return a.props.houses.filter((function(t){return t.address.country===e}))},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.load()}},{key:"render",value:function(){return r.a.createElement("div",{className:"home"},this.props.isLoading&&r.a.createElement(_e,null),r.a.createElement("img",{className:"index-cover",src:re.a}),r.a.createElement(ae,null),r.a.createElement("section",{className:"lists-section-container"},r.a.createElement("div",null,r.a.createElement("h4",{className:"reccomended-headline"},"Most reccomended in Israel"),r.a.createElement(we,{home:"home",houses:this.props.israel})),r.a.createElement("div",null,r.a.createElement("h4",{className:"reccomended-headline"},"Most reccomended in Italy"),r.a.createElement(we,{home:"home",houses:this.props.italy})),r.a.createElement("div",null,r.a.createElement("h4",{className:"reccomended-headline"},"Most reccomended in Spain"),r.a.createElement(we,{home:"home",houses:this.props.spain}))))}}]),t}(n.Component),Pe={setFilter:D,getBestByCountry:function(e){return function(t){var a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.a.awrap(S.query(e));case 3:a=n.sent,t(L(e.countries[0],a)),n.next=10;break;case 7:throw n.prev=7,n.t0=n.catch(0),n.t0;case 10:case"end":return n.stop()}}),null,null,[[0,7]])}},filterHouses:U},Ge=Object(c.b)((function(e){return{houses:e.house.houses,israel:e.house.israel,italy:e.house.italy,spain:e.house.spain,filterBy:e.house.filterBy,loggedInUser:e.user.loggedInUser,isLoading:e.system.isLoading}}),Pe)(Fe),ze=a(176),Ye=a.n(ze),We=(a(311),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={user:""},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"about-page-container"},r.a.createElement("img",{src:Ye.a,alt:"",className:"about-img"}),r.a.createElement("div",{className:"about-info-container"},r.a.createElement("p",null,"Welcome to the most amazing site in the world! Here you will be able to book a place for your next vacation. So what are you waiting for? you'r next vacation is only a few clicks away!")))}}]),t}(n.Component)),Ke=Object(c.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),null)(We);a(312);function Ve(e){var t="https://api.cloudinary.com/v1_1/".concat("dnb7d7utg","/image/upload/"),a=new FormData;return a.append("file",e),a.append("upload_preset","hvwwwh5p"),fetch(t,{method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){return console.log(e),e})).catch((function(e){return console.log("catch",e),e}))}var Qe=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={newHouse:{address:{country:"",coords:null},imgs:[],title:"",description:"",capacity:1,price:"",addressInput:"",reviews:[],rating:a.getRandomArbitrary(3,5)},isModalShown:!1,uploadStatus:null},a.getHouse=function(e){var t,n;return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,m.a.awrap(S.get(e));case 2:return t=r.sent,r.next=5,m.a.awrap(a.getAddress(t.address.coords));case 5:n=r.sent,t.addressInput=n,a.setState({newHouse:t});case 8:case"end":return r.stop()}}))},a.upload=function(e){var t,n,r,s,o,c;return m.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:for(r in t=e.target.files,n=[],t)n.push(t[r]);return n.splice(-2),i.prev=4,a.setState({uploadStatus:"uploading"}),s=n.map((function(e){return Ve(e)})),i.next=9,m.a.awrap(Promise.all(s));case 9:o=i.sent,c=Object(P.a)({},a.state.newHouse),o.forEach((function(e){e.url&&c.imgs.push(e.url)})),a.setState({newHouse:c,uploadStatus:"success"}),i.next=18;break;case 15:throw i.prev=15,i.t0=i.catch(4),i.t0;case 18:case"end":return i.stop()}}),null,null,[[4,15]])},a.onInputChange=function(e){var t=Object(P.a)({},a.state.newHouse),n=e.target.name,r=e.target.value;"capacity"!==e.target.name&&"price"!==e.target.name||(r=parseInt(r,0)),t[n]=r,a.setState({newHouse:t})},a.onAddressChange=function(e){var t=e.target.name,n=e.target.value,r=Object(P.a)({},a.state.newHouse.address),s=Object(P.a)({},a.state.newHouse);r[t]=n,s.address=r,a.setState({newHouse:s})},a.createOwner=function(e){return{_id:e._id,username:e.username,imgURL:e.imgURL}},a.onSaveHouse=function(e){var t,n,r,s,o;return m.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e.preventDefault(),t=Object(P.a)({},a.props.loggedInUser)){c.next=6;break}console.log("please login"),c.next=25;break;case 6:return n=a.createOwner(t),c.prev=7,c.next=10,m.a.awrap(a.checkAddress());case 10:return r=Object(P.a)({},a.state.newHouse.address),s=r.country.toLowerCase(),r.country=s,delete(o=Object(P.a)({},a.state.newHouse,{owner:n,address:r})).addressInput,c.next=17,m.a.awrap(a.props.saveHouse(o));case 17:return c.next=19,m.a.awrap(a.props.getUserById(t._id));case 19:a.setState({isModalShown:!0}),c.next=25;break;case 22:c.prev=22,c.t0=c.catch(7),console.log("add house failed",c.t0);case 25:case"end":return c.stop()}}),null,null,[[7,22]])},a.onBackClick=function(){a.state.isModalShown&&a.props.history.push("/")},a.displayUpload=function(){var e=a.state.uploadStatus;return"uploading"===e?"Uploading...":"success"===e?"Success!":void 0},a.deleteImg=function(e){var t=a.state.newHouse.imgs.filter((function(t,a){if(e!==a)return t})),n=Object(P.a)({},a.state.newHouse);n.imgs=t,a.setState({newHouse:n})},a.dispalyImg=function(){if(0!==a.state.newHouse.imgs.length)return a.state.newHouse.imgs.map((function(e,t){return r.a.createElement("div",{key:t,className:"edit-img-container"},r.a.createElement("img",{key:t,className:"edit-img",src:e}),r.a.createElement("div",{className:"edit-img-delete flex justify-center"},r.a.createElement("span",{onClick:function(){return a.deleteImg(t)},className:"edit-img-x"},"X")))}))},a.checkAddress=function(e){var t,n,r,s,o;return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.newHouse.addressInput,t=a.state.newHouse.address.country+" "+t,e.prev=2,e.next=5,m.a.awrap(E.a.get("https://api.opencagedata.com/geocode/v1/json?q=".concat(t,"&key=029b29b812cb4bfea627a8b82b6b92c4")));case 5:n=e.sent,r=n.data.results[0].geometry,s=Object(P.a)({},a.state.newHouse.address,{coords:r}),o=Object(P.a)({},a.state.newHouse,{address:s}),a.setState({newHouse:o}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),null,null,[[2,12]])},a.createOptions=function(){for(var e=[],t=1;t<9;t++){var a="".concat(t,1===t?" Person":" Persons");e.push(r.a.createElement("option",{key:t,value:t},a))}return e},a.getAddress=function(e){var t,a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,m.a.awrap(E.a.get("https://api.opencagedata.com/geocode/v1/json?q=".concat(e.lat,"+").concat(e.lng,"&key=029b29b812cb4bfea627a8b82b6b92c4")));case 4:return t=n.sent,a=t.data.results[0].formatted,n.abrupt("return",a);case 7:case"end":return n.stop()}}))},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.loggedInUser||this.props.history.push("/login");var e=this.props.match.params.id;e&&this.getHouse(e)}},{key:"getRandomArbitrary",value:function(e,t){return(Math.random()*(t-e)+e).toFixed(2)}},{key:"render",value:function(){var e=this.state,t=e.newHouse,a=e.isModalShown,n=e.uploadStatus,s=this.props.match.params.id;return this.props.isLoading?r.a.createElement("div",null,r.a.createElement(_e,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"house-edit-container"},r.a.createElement("span",{className:"house-edit-header"},"Add and Edit Houses"),r.a.createElement("form",{className:"edit-form flex column",onSubmit:this.onSaveHouse},r.a.createElement("input",{required:!0,name:"country",onChange:this.onAddressChange,value:t.address.country,type:"text",placeholder:"Country"}),r.a.createElement("input",{required:!0,ref:"address",onChange:this.onInputChange,name:"addressInput",type:"text",placeholder:"Address",value:this.state.newHouse.addressInput}),r.a.createElement("input",{required:!0,name:"title",onChange:this.onInputChange,value:t.title,type:"text",placeholder:"House Title"}),r.a.createElement("textarea",{required:!0,name:"description",onChange:this.onInputChange,value:t.description,type:"text",placeholder:"Description"}),r.a.createElement("input",{required:!0,name:"price",onChange:this.onInputChange,value:t.price,type:"text",placeholder:"Price per night"}),r.a.createElement("label",null,"How many people can stay in your property?"),r.a.createElement("select",{value:this.state.newHouse.capacity,className:"cap-select",type:"number",name:"capacity",onChange:this.onInputChange},this.createOptions()),r.a.createElement("div",{className:"img-upload flex space-between"},r.a.createElement("label",{htmlFor:"file-upload",className:"upload form-btn pointer flex align-center"},"Upload Images"),r.a.createElement("span",{className:"success"===n?"success":""},this.displayUpload())),r.a.createElement("input",{id:"file-upload",required:!s,onChange:this.upload,type:"file",multiple:!0}),r.a.createElement("div",{className:"flex wrap"},this.dispalyImg()),r.a.createElement("button",{className:"form-btn pointer"},"Submit")),r.a.createElement("div",{className:a?"modal-shown flex column space-betwwen":"modal-hidden"},r.a.createElement("span",null,"Congardulations!"),r.a.createElement("span",null,"Your property is on TurtleHouse"),r.a.createElement("button",{onClick:this.onBackClick,className:"form-btn pointer"},"Back To HomePage")),r.a.createElement("div",{className:a?"block-screen":"block-screen-hidden"})))}}]),t}(n.Component),Ze={saveHouse:A,getUserById:ie},Je=Object(c.b)((function(e){return{loggedInUser:e.user.loggedInUser,isLoading:e.system.isLoading}}),Ze)(Qe),Xe=a(179),$e=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).onDeleteHouse=function(e){a.props.deleteHouse(e)},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.filterHouses(this.props.filterBy)}},{key:"render",value:function(){var e=Object(Xe.a)(this.props.houses,1)[0];return console.log("houses page: ",e),console.log("houses page load stat: ",this.props.isLoading),this.props.isLoading||this.props.houses===[]?r.a.createElement("div",null,r.a.createElement(_e,null)):r.a.createElement("div",{className:"house-page-container"},r.a.createElement("span",{className:"house-page-header"},"Houses"),e&&r.a.createElement(we,{onDeleteHouse:this.onDeleteHouse,houses:this.props.houses,filterBy:this.props.filterBy,style:{marginTop:"150px"}}),!this.props.isLoading&&null===e&&r.a.createElement("div",{className:"empty-houses-container"},r.a.createElement("p",null,"Nothing to show")))}}]),t}(n.Component),et={filterHouses:U,setFilter:D,deleteHouse:H},tt=Object(c.b)((function(e){return{houses:e.house.houses,filterBy:e.house.filterBy,isLoading:e.system.isLoading}}),et)($e),at=(a(313),function e(t,a,n){Object(d.a)(this,e),this.houseId=t,this.byUser={_id:a},this.numOfPeople=n,this.createdAt=(new Date).getTime()});var nt=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={filterBy:{numOfperson:1,location:""},startDate:null,endDate:null},a.onChangeCap=function(e){return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!==a.state.filterBy.numOfperson||-1!==e){t.next=2;break}return t.abrupt("return");case 2:if(!(a.state.filterBy.numOfperson+e>a.props.house.capacity)){t.next=4;break}return t.abrupt("return");case 4:a.setState((function(t){return t.filterBy.numOfperson+=e}));case 5:case"end":return t.stop()}}))},a.onChange=function(e){var t=e.target.name,n=e.target.value,r=Object(P.a)({},a.state.filterBy);r[t]=n,a.setState({filterBy:r})},a.onSearch=function(){a.props.setFilter(a.state.filterBy)},a.onReserve=function(e){var t,n,r,s,o;return m.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e.preventDefault(),a.state.startDate||a.state.endDate){c.next=4;break}return alert("choose dates!"),c.abrupt("return");case 4:if(t=a.props.loggedInUser){c.next=8;break}return alert("login first!"),c.abrupt("return");case 8:return n={startDate:a.state.startDate._d,endDate:a.state.endDate._d},(r=new at(a.props.house._id,t._id,a.state.filterBy.numOfperson)).startDate=n.startDate,r.endDate=n.endDate,c.prev=12,c.next=15,m.a.awrap(a.props.saveOrder(r));case 15:return s=a.props.orders,o=s[s.length-1]._id,t.reserved.push(o),c.next=20,m.a.awrap(oe.update(t));case 20:alert("check your reserved items!"),c.next=27;break;case 23:throw c.prev=23,c.t0=c.catch(12),console.log("ReserveHouse: add house failed",c.t0),c.t0;case 27:return c.prev=27,console.log("check your reserved items "),c.finish(27);case 30:case"end":return c.stop()}}),null,null,[[12,23,27,30]])},a.addReserveClass=function(){return a.props.detailsPage,"reserve-form flex column space-between"},a.changeDates=function(e){a.setState(Object(P.a)({},a.state,{},e))},a.getTotalPrice=function(){return a.state.startDate&&a.state.endDate?r.a.createElement("span",{className:"reserve-price-tag-total"},"Total: $"+a.props.house.price*(a.state.endDate-a.state.startDate)/1e3/60/60/24):r.a.createElement("span",null)},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.house;return r.a.createElement("div",{className:"reserve-form flex column space-between"},r.a.createElement("h3",{className:"reserve-form-header"},"Reserve Now!"),r.a.createElement("h4",{className:"reserve-form-house-name"},t.address.country+" | "+t.title),r.a.createElement(V,{changeDates:this.changeDates}),r.a.createElement("div",{className:"form-cap flex space-between align-center"},r.a.createElement("span",null,"Number of Guests"),r.a.createElement("span",{className:"form-cap-control flex space-between"},r.a.createElement("button",{onClick:function(){return e.onChangeCap(-1)},className:"form-num-btn pointer minus",name:"numOfperson"},"-"),r.a.createElement("span",{className:"form-cap-num"},this.state.filterBy.numOfperson),r.a.createElement("button",{onClick:function(){return e.onChangeCap(1)},className:"form-num-btn pointer",name:"numOfperson"},"+"))),r.a.createElement("span",{className:"reserve-price-tag"},"$",t.price,"/night"),this.getTotalPrice(),r.a.createElement(G.a,{to:"/house"},r.a.createElement("button",{onClick:this.onReserve,className:"form-btn pointer flex align-center justify-center reserve-btn"},"Reserve")))}}]),t}(n.Component),rt={saveOrder:function(e){return function(t){var a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.a.awrap(Q.save(e));case 3:a=n.sent,e._id?t(X(a)):t($(a)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log("OrderActions: err in addOrder",n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]])}},getUserById:ie},st=Object(c.b)((function(e){return{filterBy:e.house.filterBy,loggedInUser:e.user.loggedInUser,orders:e.order.orders}}),rt)(nt),ot=(a(163),function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.review;return r.a.createElement("div",{className:"bottom-line",key:e.byUser._id},r.a.createElement("div",{className:"user-img-container"},r.a.createElement("img",{src:e.byUser.imgURL})),r.a.createElement("div",null,e.byUser.username),r.a.createElement("div",null,e.txt))}}]),t}(n.Component));function ct(e){return r.a.createElement("div",null,e.reviews.map((function(e,t){if(e.byUser)return r.a.createElement(ot,{key:t,review:e})})))}a(314);var it=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={reviewToEdit:{byUser:null,txt:"",rate:4,createdAt:Date.now()}},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState((function(e){return{reviewToEdit:Object(P.a)({},e.reviewToEdit,Object(z.a)({},n,r))}}))},a.loadUser=function(){var e=a.props.loggedInUser,t={_id:e._id,username:e.username,imgURL:e.imgURL};a.setState({reviewToEdit:Object(P.a)({},a.state.reviewToEdit,{byUser:t})})},a.addReview=function(e){e.preventDefault();var t=Object(P.a)({},a.state.reviewToEdit);a.props.onUpdateReviews(t),a.setState((function(e){return{reviewToEdit:Object(P.a)({},e.reviewToEdit,{txt:""})}}))},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.loggedInUser&&this.loadUser()}},{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement("form",{onSubmit:this.addReview},r.a.createElement("textarea",{className:"review-textarea form-loc",name:"txt",onChange:this.handleChange,value:this.state.reviewToEdit.txt}),r.a.createElement("button",{className:"add-btn pointer"},"Add")))}}]),t}(n.Component),ut=Object(c.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),{})(it),lt=a(177),pt=a.n(lt),mt=a(90),dt=a.n(mt),ht=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"map-marker-container"},"housedetails"===this.props.caller?"":r.a.createElement("span",{className:"map-marker-price"},"$"+this.props.house.price),r.a.createElement("div",{className:"map-marker-sub-container"},r.a.createElement("div",{className:"map-marker-img-container"},r.a.createElement("img",{src:fe.a,alt:"",className:"map-marker"}))))}}]),t}(n.Component),ft=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).handleChangeMap=function(e){var t=e.center,n=e.zoom;a.setState({center:t,zoom:n})},a.state={center:{lat:a.props.house.address.coords.lat,lng:a.props.house.address.coords.lng},zoom:11},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){dt.a.setApiKey("AIzaSyAn8p53vq-FNZpiqERRc0rXHhGejVaB-Bc"),dt.a.setLanguage("en")}},{key:"render",value:function(){return r.a.createElement("div",{style:{height:"80vh",width:"100%",padding:"10px"}},r.a.createElement(pt.a,{bootstrapURLKeys:{key:"AIzaSyAn8p53vq-FNZpiqERRc0rXHhGejVaB-Bc",v:"3.31"},center:this.state.center,zoom:this.state.zoom,onChange:this.handleChangeMap},r.a.createElement(ht,{style:{position:"absolute",transform:"translate(-50%, -100%)"},caller:this.props.caller,house:this.props.house,lat:this.props.house.address.coords.lat,lng:this.props.house.address.coords.lng,text:"Marker!"})))}}]),t}(n.Component),gt=Object(c.b)((function(e){return{loggedInUser:e.user.loggedInUser,isLoading:e.system.isLoading}}),null)(ft),vt=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={house:null},a.loadHouse=function(e){var t;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.awrap(S.get(e));case 2:t=n.sent,a.setState({house:t});case 4:case"end":return n.stop()}}))},a.checkIfOwner=function(){var e=a.props.loggedInUser;return!(!e||e._id!==a.state.house.owner._id)},a.handleDelete=function(){var e,t,n;return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=a.state.house._id,t=a.props.loggedInUser,n=t.houses.filter((function(t){return t!==e})),t=Object(P.a)({},t,{houses:n}),r.next=6,m.a.awrap(a.props.deleteHouse(e));case 6:return r.next=8,m.a.awrap(a.props.updateUser(t));case 8:a.props.history.push("/");case 9:case"end":return r.stop()}}))},a.updateReviews=function(e){var t,n,r,s;return m.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=a.state.house,n=t.reviews,(r=n.slice()).splice(n.length,0,e),s=Object(P.a)({},t,{reviews:r}),o.prev=5,o.next=8,m.a.awrap(a.props.saveHouse(s));case 8:o.next=14;break;case 10:throw o.prev=10,o.t0=o.catch(5),console.log("add review to house faild"),o.t0;case 14:a.setState({house:s});case 15:case"end":return o.stop()}}),null,null,[[5,10]])},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.loadHouse(e)}},{key:"render",value:function(){var e=this.state.house;return r.a.createElement(r.a.Fragment,null,(this.props.isLoading||!e)&&r.a.createElement(_e,null),e&&r.a.createElement("section",{className:"housedetails-container"},r.a.createElement("div",{className:"images-container"},r.a.createElement("div",{className:"gallery"},e.imgs.map((function(e,t){return r.a.createElement("img",{key:t,className:"img img-".concat(t),src:e,alt:""})})))),r.a.createElement("div",{className:"main-content-container flex"},r.a.createElement("div",{className:"main-content-text-container"},r.a.createElement("span",{className:"house-title span-line-break"},e.title),r.a.createElement("span",{className:"house-header span-line-break"},e.address.country),r.a.createElement("span",{className:"house-header span-line-break"},"Description"),r.a.createElement("div",{className:"house-content span-line-break bottom-line"},e.description),r.a.createElement(ct,{reviews:e.reviews}),r.a.createElement(ut,{onUpdateReviews:this.updateReviews}),this.checkIfOwner()&&r.a.createElement("div",{className:"details-button-container flex space-between"},r.a.createElement(G.a,{to:"/house/edit/".concat(e._id)},r.a.createElement("button",{className:"form-btn pointer"},"Edit House")),r.a.createElement("button",{onClick:this.handleDelete,className:"form-btn pointer"},"Delete House"))),r.a.createElement(st,{house:e,detailsPage:!0})),r.a.createElement(gt,{caller:"housedetails",house:e})))}}]),t}(n.Component),bt={deleteHouse:H,filterHouses:U,updateUser:ue,saveHouse:A},Et=Object(c.b)((function(e){return{houses:e.house.houses,loggedInUser:e.user.loggedInUser,isLoading:e.system.isLoading}}),bt)(vt),yt=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={msg:"",loginCred:{email:"",password:""},signupCred:{email:"",password:"",username:"",imgURL:""}},a.loginHandleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState((function(e){return{loginCred:Object(P.a)({},e.loginCred,Object(z.a)({},n,r))}}))},a.signupHandleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState((function(e){return{signupCred:Object(P.a)({},e.signupCred,Object(z.a)({},n,r))}}))},a.doLogin=function(e){var t,n,r,s;return m.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(e.preventDefault(),t=a.state.loginCred,n=t.email,r=t.password,n&&r){o.next=4;break}return o.abrupt("return",a.setState({msg:"Please enter user/password"}));case 4:return s={email:n,password:r},o.next=7,m.a.awrap(a.props.login(s));case 7:a.setState({loginCred:{email:"",password:""}}),a.props.updateRoute("/"),a.props.history.push("/");case 10:case"end":return o.stop()}}))},a.doSignup=function(e){var t,n,r,s,o,c;return m.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(e.preventDefault(),t=a.state.signupCred,n=t.email,r=t.password,s=t.username,o=t.imgURL,n&&r&&s){i.next=4;break}return i.abrupt("return",a.setState({msg:"All inputs besides image are required!"}));case 4:c={email:n,password:r,username:s,imgURL:o},a.props.signup(c),a.setState({signupCred:{email:"",password:"",username:"",imgURL:""}}),a.props.updateRoute("/"),a.props.history.push("/");case 9:case"end":return i.stop()}}))},a.removeUser=function(e){a.props.removeUser(e)},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=r.a.createElement("form",{className:"login-form sign-up flex column space-between",onSubmit:this.doSignup},r.a.createElement("input",{className:"form-loc",type:"text",name:"email",value:this.state.signupCred.email,onChange:this.signupHandleChange,placeholder:"Email"}),r.a.createElement("input",{className:"form-loc",name:"password",type:"password",value:this.state.signupCred.password,onChange:this.signupHandleChange,placeholder:"Password"}),r.a.createElement("input",{className:"form-loc",type:"text",name:"username",value:this.state.signupCred.username,onChange:this.signupHandleChange,placeholder:"Username"}),r.a.createElement("input",{className:"form-loc",type:"text",name:"imgURL",value:this.state.signupCred.imgURL,onChange:this.signupHandleChange,placeholder:"image"}),r.a.createElement("button",{className:"form-btn login-btn"},"Signup")),a=r.a.createElement("form",{className:"login-form flex column space-between",onSubmit:this.doLogin},r.a.createElement("div",null,r.a.createElement("input",{className:"form-loc",type:"text",name:"email",value:this.state.loginCred.email,onChange:this.loginHandleChange,placeholder:"Email"}),r.a.createElement("input",{className:"form-loc",type:"password",name:"password",value:this.state.loginCred.password,onChange:this.loginHandleChange,placeholder:"Password"})),r.a.createElement("button",{className:"form-btn login-btn"},"Login")),n=this.props.loggedInUser,s=r.a.createElement("div",{className:"login-form flex column space-between"},r.a.createElement("h2",{onClick:function(){e.props.loggedInUser}},"Welcome:  ",n?n.username:"blah"),r.a.createElement(G.a,{to:"/"},r.a.createElement("button",{className:"form-btn login-btn"},"Back to Turtle House")),r.a.createElement("button",{className:"form-btn login-btn",onClick:this.props.logout},"Logout"));return r.a.createElement("div",{className:"flex column space-between"},!n&&a,!n&&t,n?s:"")}}]),t}(n.Component),wt={login:function(e){return function(t){var a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.awrap(oe.login(e));case 2:a=n.sent,t(le(a));case 4:case"end":return n.stop()}}))}},logout:function(){return function(e){return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.awrap(oe.logout());case 2:e(le(null));case 3:case"end":return t.stop()}}))}},signup:function(e){return function(t){var a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.awrap(oe.signup(e));case 2:a=n.sent,t(le(a));case 4:case"end":return n.stop()}}))}},removeUser:function(e){return function(t){return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m.a.awrap(oe.remove(e));case 3:t(me(e)),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),console.log("UserActions: err in removeUser",a.t0);case 9:case"end":return a.stop()}}),null,null,[[0,6]])}},loadUsers:function(){return function(e){var t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e({type:"LOADING_START"}),a.next=4,m.a.awrap(oe.getUsers());case 4:t=a.sent,e(pe(t)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("UserActions: err in loadUsers",a.t0);case 11:return a.prev=11,e({type:"LOADING_DONE"}),a.finish(11);case 14:case"end":return a.stop()}}),null,null,[[0,8,11,14]])}},updateRoute:function(e){return function(t){return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m.a.awrap(t(I(e)));case 3:a.next=9;break;case 5:throw a.prev=5,a.t0=a.catch(0),console.log("update route action err:",a.t0),a.t0;case 9:case"end":return a.stop()}}),null,null,[[0,5]])}}},Ot=yt=Object(i.f)(Object(c.b)((function(e){return{users:e.user.users,loggedInUser:e.user.loggedInUser,isLoading:e.system.isLoading}}),wt)(yt)),Nt=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={houses:null},a.loadReservedHouses=function(){var e,t,n,r;return m.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=a.props.loggedInUser.reserved,s.prev=1,s.next=4,m.a.awrap(Q.getOrders({orders:e}));case 4:return t=s.sent,n=t.map((function(e){var t;return m.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.a.awrap(S.get(e.houseId));case 2:return(t=a.sent).status=e.status,a.abrupt("return",t);case 5:case"end":return a.stop()}}))})),s.next=8,m.a.awrap(Promise.all(n));case 8:r=s.sent,a.setState({houses:r}),s.next=15;break;case 12:throw s.prev=12,s.t0=s.catch(1),s.t0;case 15:case"end":return s.stop()}}),null,null,[[1,12]])},a.getFilteredHouses=function(e){return a.state.houses.filter((function(t){if(t.status===e)return t}))},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.loadReservedHouses()}},{key:"render",value:function(){var e=this.state.houses;return e&&0===e.length?r.a.createElement("div",{className:"reservedpage-container"},r.a.createElement("div",{className:"reserved-container-none"},r.a.createElement("h2",{className:"reservedpage"},"My Reserved Houses"),r.a.createElement("div",null,"No reserved items to show"))):r.a.createElement("div",{className:"reservedpage-container"},(this.props.isLoading||!e)&&r.a.createElement(_e,null),e&&r.a.createElement("div",{className:"reservedpage-content-container"},r.a.createElement("h2",{className:"reservedpage"},"My Reserved Houses"),r.a.createElement("div",{className:"reservedpage-not-confirmed-houses"},r.a.createElement("h3",{className:"reservedpage"},"Not Yet Confirmed by House Owner"),e&&r.a.createElement(we,{caller:"reservedpage",houses:this.getFilteredHouses("initial")})),r.a.createElement("div",{className:"reservedpage-confirmed-houses"},r.a.createElement("h3",{className:"reservedpage"},"Confirmed by House Owner"),e&&r.a.createElement(we,{caller:"reservedpage",houses:this.getFilteredHouses("accepted")})),r.a.createElement("div",{className:"reservedpage-confirmed-houses"},r.a.createElement("h3",{className:"reservedpage"},"Rejected by House Owner"),e&&r.a.createElement(we,{caller:"reservedpage",houses:this.getFilteredHouses("rejected")}))))}}]),t}(n.Component),jt=Object(c.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),null)(Nt),xt=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).loadFavoriteHouses=function(){var e;return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e=a.props.loggedInUser.favorites,a.props.loadFavorites(e);case 2:case"end":return t.stop()}}))},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.loadFavoriteHouses()}},{key:"componentDidUpdate",value:function(e){e.loggedInUser!==this.props.loggedInUser&&this.loadFavoriteHouses()}},{key:"render",value:function(){var e=this.props.houses;return r.a.createElement("div",null,r.a.createElement("div",{className:"favorites-container"},r.a.createElement("h2",{className:"favorites"},"My Favorite Houses"),e&&!this.props.isLoading&&r.a.createElement(we,{houses:this.props.houses}),(this.props.isLoading||!e)&&r.a.createElement(_e,null)))}}]),t}(n.Component),kt={loadFavorites:function(e){return function(t){var a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t({type:"LOADING_START"}),!(e.length>0)){n.next=9;break}return n.next=5,m.a.awrap(S.query({ids:e}));case 5:a=n.sent,t(B(a)),n.next=10;break;case 9:t(B([]));case 10:n.next=16;break;case 12:throw n.prev=12,n.t0=n.catch(0),console.log(n.t0),n.t0;case 16:return n.prev=16,t({type:"LOADING_DONE"}),n.finish(16);case 19:case"end":return n.stop()}}),null,null,[[0,12,16,19]])}}},St=Object(c.b)((function(e){return{houses:e.house.favorites,loggedInUser:e.user.loggedInUser,isLoading:e.system.isLoading}}),kt)(xt),Ct=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).loadUser=function(e){var t;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.awrap(oe.getById(e));case 2:t=n.sent,a.setState({user:t});case 4:case"end":return n.stop()}}))},a.state={},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.loadUser(this.props.request.byUser._id)}},{key:"render",value:function(){var e=this;return this.state.user?r.a.createElement("div",{className:"request-preview"},r.a.createElement("div",{className:"request-preview-user-img-container requests"},r.a.createElement("img",{src:this.state.user.imgURL,className:"request-preview-user-img"})),r.a.createElement("div",{className:"request-preview-details user-details"},r.a.createElement("span",{className:"request-preview-details-header"},"User Details"),r.a.createElement("span",{className:"request-preview-details-detail"},this.state.user.username),r.a.createElement("span",{className:"request-preview-details-detail"},this.state.user.email)),r.a.createElement("div",{className:"request-preview-details"},r.a.createElement("span",{className:"request-preview-details-header"},"Request Details"),r.a.createElement("span",{className:"request-preview-details-detail"},K()(this.props.request.startDate).format("MMM Do YY")),r.a.createElement("span",{className:"request-preview-details-detail"},K()(this.props.request.endDate).format("MMM Do YY")),r.a.createElement("span",{className:"request-preview-details-detail"},this.props.request.numOfPeople>1?this.props.request.numOfPeople+" people":this.props.request.numOfPeople+" person"),r.a.createElement("div",{className:"request-preview-btns small-screen"},r.a.createElement("div",{className:"request-preview-btn yes",onClick:function(){return e.props.handleRequest(e.props.request,"accepted")}},"YES"),r.a.createElement("div",{className:"request-preview-btn no",onClick:function(){return e.props.handleRequest(e.props.request,"rejected")}},"NO"))),r.a.createElement("div",{className:"request-preview-btns big-screen"},r.a.createElement("div",{className:"request-preview-btn yes big-screen",onClick:function(){return e.props.handleRequest(e.props.request,"accepted")}},"YES"),r.a.createElement("div",{className:"request-preview-btn no big-screen",onClick:function(){return e.props.handleRequest(e.props.request,"rejected")}},"NO"))):r.a.createElement("div",null)}}]),t}(n.Component),It=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).handleRequest=function(e,t){var a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a=Object(P.a)({},e),"accepted"===t&&(a.status="accepted"),"rejected"===t&&(a.status="rejected"),n.next=5,m.a.awrap(Q.save(a));case 5:n.sent;case 6:case"end":return n.stop()}}))},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"request-container"},(!this.props.house.requests||0===this.props.house.requests.length)&&r.a.createElement("div",{className:"request-list-empty"}," No new requests"),r.a.createElement("ul",{className:"request-list clean-list"},this.props.house.requests&&this.props.house.requests.length>0&&this.props.house.requests.map((function(t){return r.a.createElement("li",{key:t._id},r.a.createElement(Ct,{request:t,handleRequest:e.props.handleRequest}))}))))}}]),t}(n.Component),Ut=Object(c.b)((function(e){return{loggedInUser:e.user.loggedInUser,isLoading:e.system.isLoading}}),null)(It),Dt=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(f.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={},a.loadHouseData=function(){var e,t,n,r,s;return m.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,e={ids:a.props.loggedInUser.houses},o.next=4,m.a.awrap(S.query(e));case 4:return t=o.sent,a.setState({houses:t}),n=t.map((function(e){var t={houserequests:!0,houseId:e._id};return Q.getOrders(t)})),o.next=9,m.a.awrap(Promise.all(n));case 9:r=o.sent,s=t.map((function(e,t){var a=r[t].filter((function(e){if("initial"===e.status)return e}));return e.requests=a,e})),a.setState(Object(P.a)({},a.state,{},s)),o.next=18;break;case 14:throw o.prev=14,o.t0=o.catch(0),console.log("err",o.t0),o.t0;case 18:case"end":return o.stop()}}),null,null,[[0,14]])},a.handleRequest=function(e,t){var a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a=Object(P.a)({},e),"accepted"===t&&(a.status="accepted"),"rejected"===t&&(a.status="rejected"),n.next=5,m.a.awrap(Q.save(a));case 5:n.sent;case 6:case"end":return n.stop()}}))},a.loadLists=function(){var e=null;return a.state.houses&&(e=a.state.houses.filter((function(e){if(e.requests&&e.requests.length>0)return e})).map((function(e,t){return r.a.createElement("div",{className:"house-requests-list-container"},r.a.createElement("div",{className:"house-requests-house-name-container"},r.a.createElement("h2",{className:"house-requests-house-name"},e.title?e.title:"Loading..")),r.a.createElement(Ut,{house:e,handleRequest:a.handleRequest,filterBy:"",style:{marginTop:"120px"},key:t}))}))),null===e||a.props.isLoading?r.a.createElement(_e,null):e&&0===e.length?r.a.createElement("div",{className:"empty-requests"},"No requests!"):e},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.loadHouseData()}},{key:"render",value:function(){return r.a.createElement("div",{className:"request-page-container"},r.a.createElement("div",{className:"request-page-sub-container"},r.a.createElement("h1",{className:"request-page-header"},"My Requests"),r.a.createElement("div",{className:"house-requests-container"},this.loadLists())))}}]),t}(n.Component),At=Object(c.b)((function(e){return{houses:e.house.houses,filterBy:e.house.filterBy,isLoading:e.system.isLoading,loggedInUser:e.user.loggedInUser}}),null)(Dt),Ht=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.setMyHouses(this.props.loggedInUser.houses)}},{key:"render",value:function(){var e=this.props.houses;return r.a.createElement("div",{className:"my-houses-page-container"},r.a.createElement("span",{className:"my-houses-header"},"My Houses"),e&&!this.props.isLoading&&r.a.createElement(we,{houses:this.props.houses}),(this.props.isLoading||!e)&&r.a.createElement(_e,null))}}]),t}(n.Component),Lt={setMyHouses:function(e){return function(t){var a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!(e.length>0)){n.next=9;break}return t({type:"LOADING_START"}),n.next=5,m.a.awrap(S.query({ids:e}));case 5:a=n.sent,t(R(a)),n.next=10;break;case 9:return n.abrupt("return",(function(e){e(R([]))}));case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),console.log(n.t0);case 15:return n.prev=15,t({type:"LOADING_DONE"}),n.finish(15);case 18:case"end":return n.stop()}}),null,null,[[0,12,15,18]])}}},Bt=Object(c.b)((function(e){return{houses:e.house.myHouses,loggedInUser:e.user.loggedInUser,isLoading:e.system.isLoading}}),Lt)(Ht),Rt=a(72),Tt=(a(334),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(f.a)(this,Object(g.a)(t).call(this,e))).toggleHamburger=function(){var e=a.state.width,t=document.querySelector(".nav-list-background");if(e<=a.state.mediaQuery){var n={isMenuOpen:!a.state.isMenuOpen};a.setState(Object(P.a)({},a.state,{},n)),document.querySelector(".logo-burger").classList.toggle("open"),t.classList.toggle("open"),document.querySelector(".nav-list").classList.toggle("open"),document.querySelector(".logo").classList.toggle("open");var r=document.querySelector(".nav-search-bar");r&&r.classList.toggle("open");var s=document.querySelector(".search-form");s&&s.classList.toggle("menu-open")}},a.changeClassName=function(e,t,n){for(var r=e.childNodes,s=0;s<r.length;s++)a.changeClassName(r[s],t,n);"add"===n&&e&&e.classList&&e.classList.add(t),"remove"===n&&e&&e.classList&&e.classList.contains(t)&&e.classList.remove(t)},a.checkIfHome=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("/"===e){var n=document.querySelector(".nav-container");a.changeClassName(n,"home","add")}if("/"!==e){var r=document.querySelector(".nav-container");a.changeClassName(r,"home","remove")}a.setState(Object(P.a)({},a.state,{currPath:e})),!0===t&&a.state.width<a.state.mediaQuery&&a.toggleHamburger()},a.profileImageRender=function(){return a.state.width>a.state.mediaQuery?a.props.loggedInUser?r.a.createElement("div",null,r.a.createElement("div",{className:"nav-item-user-img-container visible"},r.a.createElement("img",{src:a.props.loggedInUser.imgURL||Se.a,className:"nav-item-user-img"}))):r.a.createElement("div",{className:"nav-link"},"Login/Signup"):a.props.loggedInUser?r.a.createElement("div",{className:"nav-link"},"(",a.props.loggedInUser.username,")Logout"):r.a.createElement("div",{className:"nav-link"},"Login/Signup")},a.state={width:0,height:0,currPath:null,isMenuOpen:!1,mediaQuery:770},a.updateWindowDimensions=a.updateWindowDimensions.bind(Object(Rt.a)(a)),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.updateWindowDimensions();var e=this.props.history.location.pathname;this.checkIfHome(e),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"componentDidUpdate",value:function(e){if(e.location.pathname!==this.props.location.pathname){var t=this.props.location.pathname;this.checkIfHome(t)}}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"nav-container"},r.a.createElement("div",{className:"nav-list-background"}),r.a.createElement("ul",{className:"nav-list"},r.a.createElement("li",null,r.a.createElement("div",{className:"logo-container",onClick:this.toggleHamburger},r.a.createElement("img",{src:Ne.a,alt:"",className:"logo"}),r.a.createElement("span",{className:"logo-burger"},"^"))),"/"!==this.state.currPath&&!this.state.isMenuOpen&&r.a.createElement("li",{className:"nav-search-bar-container",id:"one"},r.a.createElement(De,null)),"/"!==this.state.currPath&&r.a.createElement("li",{className:"nav-item push",onClick:function(){return e.checkIfHome("/",!0)}},r.a.createElement(G.a,{to:"/",className:"nav-link"},"Home")),this.props.loggedInUser&&r.a.createElement("li",{className:"/"!==this.state.currPath?"nav-item":"nav-item push",onClick:function(){return e.checkIfHome("/reserved",!0)}},r.a.createElement(G.a,{to:"/reserved",className:"nav-link"},"Reserved")),this.props.loggedInUser&&r.a.createElement("li",{className:"nav-item",onClick:function(){return e.checkIfHome("/requests",!0)}},r.a.createElement(G.a,{to:"/requests",className:"nav-link"},"Requets")),this.props.loggedInUser&&r.a.createElement("li",{className:"nav-item",onClick:function(){return e.checkIfHome("/favorites",!0)}},r.a.createElement(G.a,{to:"/favorites",className:"nav-link"},"Favorites")),this.props.loggedInUser&&r.a.createElement("li",{className:"nav-item",onClick:function(){return e.checkIfHome("/house/edit",!0)}},r.a.createElement(G.a,{to:"/house/edit",className:"nav-link"},"Host")),this.props.loggedInUser&&r.a.createElement("li",{className:"nav-item",onClick:function(){return e.checkIfHome("/house/edit",!0)}},r.a.createElement(G.a,{to:"/myhouses",className:"nav-link"},"My Houses")),r.a.createElement("li",{className:this.props.loggedInUser||"/"!==this.state.currPath?"nav-item":"nav-item push",onClick:function(){return e.checkIfHome("/about",!0)}},r.a.createElement(G.a,{to:"/about",className:"nav-link"},"About")),r.a.createElement("li",{className:"nav-item",onClick:function(){return e.checkIfHome("/login",!0)}},r.a.createElement(G.a,{to:"/login",className:"nav-link"},this.profileImageRender()))),"/house"===this.state.currPath&&!this.state.isMenuOpen&&r.a.createElement("div",{className:"nav-filter-bar-container"},r.a.createElement(Re,null)))}}]),t}(n.Component)),qt=Tt=Object(i.f)(Object(c.b)((function(e){return{loggedInUser:e.user.loggedInUser,isLoading:e.system.isLoading,currRoute:e.system.currRoute}}),null)(Tt));var Mt=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(i.b,{history:l},r.a.createElement(qt,null),r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",component:Ge,exact:!0}),r.a.createElement(i.a,{path:"/requests",component:At,exact:!0}),r.a.createElement(i.a,{path:"/reserved",component:jt,exact:!0}),r.a.createElement(i.a,{path:"/favorites",component:St,exact:!0}),r.a.createElement(i.a,{path:"/myhouses",component:Bt,exact:!0}),r.a.createElement(i.a,{path:"/login",component:Ot,exact:!0}),r.a.createElement(i.a,{path:"/house",component:tt,exact:!0}),r.a.createElement(i.a,{path:"/about",component:Ke,exact:!0}),r.a.createElement(i.a,{path:"/house/edit",component:Je,exact:!0}),r.a.createElement(i.a,{path:"/house/edit/:id",component:Je,exact:!0}),r.a.createElement(i.a,{path:"/house/:id",component:Et,exact:!0}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _t=a(39),Ft=a(178),Pt={houses:[],favorites:[],israel:[],italy:[],spain:[],myHouses:[],filterBy:{numOfperson:1,location:"",price:1e3},selectedHouse:null},Gt=null;sessionStorage.user&&(Gt=JSON.parse(sessionStorage.user));var zt={loggedInUser:Gt,users:[]},Yt={isLoading:!1,currRoute:null},Wt={orders:[],selectedOrder:null},Kt=Object(_t.c)({house:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_HOUSES":return Object(P.a)({},e,{houses:t.houses});case"SET_FILTER":return Object(P.a)({},e,{filterBy:Object(P.a)({},e.filterBy,{},t.filter)});case"HOUSE_ADD":return Object(P.a)({},e,{houses:[].concat(Object(se.a)(e.houses),[t.house])});case"HOUSE_UPDATE":return Object(P.a)({},e,{houses:e.houses.map((function(e){return e._id===t.house._id?t.house:e}))});case"HOUSE_ADD_REVIEW":return Object(P.a)({},e,{houses:e.houses.map((function(e){if(e._id!==t.house._id)return e;var a=e.reviews,n=a.slice();return n.splice(a.length,0,t.review),Object(P.a)({},e,{reviews:n})}))});case"HOUSE_REMOVE":return Object(P.a)({},e,{houses:e.houses.filter((function(e){return e._id!==t.houseId}))});case"SET_FAVS":return Object(P.a)({},e,{favorites:t.houses});case"SET_BEST_ISRAEL":return Object(P.a)({},e,{israel:t.houses});case"SET_BEST_ITALY":return Object(P.a)({},e,{italy:t.houses});case"SET_BEST_SPAIN":return Object(P.a)({},e,{spain:t.houses});case"SET_MY_HOUSES":return Object(P.a)({},e,{myHouses:t.houses});default:return e}},system:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(P.a)({},e,{isLoading:!0});case"LOADING_DONE":return Object(P.a)({},e,{isLoading:!1});case"UPDATE_ROUTE":return console.log("system reducer here: route is : ",t.route),Object(P.a)({},e,{currRoute:t.route});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_USER":return sessionStorage.setItem("user",JSON.stringify(t.user)),Object(P.a)({},e,{loggedInUser:t.user});case"USER_REMOVE":return Object(P.a)({},e,{users:e.users.filter((function(e){return e._id!==t.userId}))});case"SET_USERS":return Object(P.a)({},e,{users:t.users});case"USER_LOAD":return sessionStorage.setItem("user",JSON.stringify(t.user)),Object(P.a)({},e,{loggedInUser:t.user});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_ORDERS":return Object(P.a)({},e,{orders:t.orders});case"ORDER_ADD":return Object(P.a)({},e,{orders:[].concat(Object(se.a)(e.orders),[t.order])});case"ORDER_UPDATE":return Object(P.a)({},e,{orders:e.orders.map((function(e){return e._id===t.order._id?t.order:e}))});default:return e}}}),Vt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||_t.d,Qt=Object(_t.e)(Kt,Vt(Object(_t.a)(Ft.a)));o.a.render(r.a.createElement("div",null,r.a.createElement(c.a,{store:Qt},r.a.createElement(Mt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},34:function(e,t,a){},53:function(e,t,a){},63:function(e,t,a){e.exports=a.p+"static/media/turtle3.891f6be3.png"},73:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAEVklEQVRIie2US0xcVRjH/+fc1zwYmGEoTEEcZkoDgrQgVFzUSJO2MREsaSOpT1JqTVzQaLQJPpKyMI3SuFBjEx9FmrqwTmqUmrggLQ0N0qIgFaLyKPTdQd4zzDBz7z33uKAYoFDGBRvDb3fP993/73zn3FxgjTVWCbJawc8dq3FYLOQoM3gFQCSBkm5d0w82HKi7uGriF7940yOJUpvH5bLneTMVSRBxe2wUbX/0hDSdbTl5oO5PcaWQd8se9XCR75FFoZxz7uacxxFKJzknPaquHh+QvGd8Ph+b63/+6+p4SZMvbPJuSMpxZwhz6+4UF0LRiLlnaPAwgL3LimueynOYrdbPGEOpx5NE0lITTTabGZIsQI1q9rGx6Yy/+m4/kRu83rvx6eLSI42XhgFA0W0NHpfLOV/6+XunQCjB3tdKafeVKyUAsKT4nd0FbpFIFzPcyY6CArciisKCusUsw263wutNsXV2Dm3uH/CfBrC18vihnYok7ijKesg0v59QAhACi8kEZhgOYIk7ri0pMRnOSG9+fnpadlaasLi+GINzfHe6PapqOol60yc3VuxJzkhxzdYMDkIAQmY14WgEjT+3TtbvO+K4Z2IjMfS2y5WYFIsUACgh2L79YYVSgh9/upzsTk4BAEQ1Dec6fw2ZFJkUZ+daQIDWnu4wIcZXwKKjrq0FZb+TgwX5bkss0jksVgUtrQN4YOtjIIRgOjKDpo5LoaiqHZsKE6mx7cI+gHKANwStppp7xPrlR7IUk0ATEmL3+v1TaPtlEI78zfDsKoPBOc51doTCEe3wif3vf3i37fXF7y0QcxCnIstscdNSjI4G0dVzC8EIg/fZCjhzsgEAXQN90bCqtsyTLsnCOzbotXAoInNwkCX+LYwZuHptFL1XRjCjMTy4cweyiotABAoA0JmO3hvXuQG9aqWNLxBLiviqzph5amoG9rvHbXAO/51JDN0Yx82b40hwpyOtfNfshGTh5q4O+7lAaXN95VH/fxLrmv5GWVkhESjB9WujuDUcwI2bY7Akr8O6oi0oqtwEJd62bNjIxERYVbXvV5L+K67+uFoJWq1vhfsG1R/OdMiionBHRjqx5xWi8IU8KPaEWLIQmAlpDBiKWRywWE5SYNtUdqY6nuVVN7hSWW5Orjkm2zy4AUME1WIWn3j5g4q5hZe+PFSlMfYJAPjHx/D3xISRGJ9AE6xWKLIEWZSgahoimoapUBATgSBb53AI6xOdsJot0khwMiNm8XwUUdrtcjotANA12D89Fgg0yYKYwjgyDYPZDMMwCwINUyIEKCX9UU0dThq3P7k+0RmX6nTa7oyOlANoWEm84LOsqq/xgpCePY+XmMeDQTT/1jERjFNcvopadbmAZ76tlW2hqH9bfqHDGW+Dr+X8DDFYZv3+utv3E9P5Dzo3PtIZM586fxZNHe3gYK/cTwoAvopa1WCoaupoxzfNZ8EYMzOOT1eaeI01/n/8A/b9texTbh2NAAAAAElFTkSuQmCC"},74:function(e,t,a){e.exports=a.p+"static/media/turtle4.95469977.png"},75:function(e,t,a){e.exports=a.p+"static/media/user_prof_img.7ea4af7d.png"}},[[180,1,2]]]);
//# sourceMappingURL=main.ebbcb92e.chunk.js.map