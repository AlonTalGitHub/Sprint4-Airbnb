{"version":3,"sources":["assets/img/bgc.jpg","assets/img/loading.gif","assets/img/crap1.jpg","history.js","services/HttpService.js","services/HouseService.js","actions/SystemActions.js","actions/HouseActions.js","cmps/DatePicker.js","services/OrderService.js","actions/OrderActions.js","cmps/SearchForm.js","services/UserService.js","actions/UserActions.js","cmps/HousePreview.js","cmps/HouseList.js","services/CountryService.js","cmps/SearchBar.js","cmps/CapacityFilter.js","cmps/PriceFilter.js","cmps/FilterBar.js","cmps/NavBar.js","cmps/Loading.js","pages/Home.js","pages/About.js","services/uploadImgService.js","pages/HouseEdit.js","pages/HousePage.js","services/Order.js","services/localStorageService.js","cmps/ReserveHouse.js","cmps/reviews/ReviewPreview.js","cmps/reviews/ReviewList.js","cmps/reviews/ReviewCompose.js","cmps/MapMarker.js","cmps/MapPreview.js","pages/HouseDetails.js","pages/Login.js","pages/ReservedPage.js","pages/Favorites.js","cmps/RequestPreview.js","cmps/RequestList.js","pages/RequestPage.js","pages/MyHouses.js","cmps/ChatMessagePreview.js","cmps/Chat.js","pages/ChatRoomPage.js","cmps/Nav.js","App.js","serviceWorker.js","reducers/HouseReducer.js","reducers/UserReducer.js","reducers/SystemReducer.js","reducers/OrderReducer.js","reducers/SocketReducer.js","reducers/index.js","store.js","index.js","assets/img/user_prof_img.png","assets/img/turtle3.png","assets/img/pagin_turtle.png","assets/img/turtle4.png"],"names":["module","exports","history","createBrowserHistory","axios","Axios","create","withCredentials","endpoint","data","ajax","a","async","method","url","res","console","log","dir","response","status","push","query","filter","queryStr","_createQueryStr","HttpService","temp","get","id","save","house","_id","addedHouse","remove","getHouses","querySTR","byId","location","startDate","endDate","numOfperson","ids","join","countries","price","_updateRoute","route","type","filterHouses","dispatch","_setFilter","HouseService","houses","_setHouses","setFilter","saveHouse","_updateHouse","_addHouse","deleteHouse","houseId","_deleteHouse","_setBestByCountry","country","toUpperCase","_setFavs","_setMyHouses","DatePicker","state","handleChange","key","date","setState","sendDates","props","changeDates","startDatePlaceholderText","endDatePlaceholderText","this","startDateId","endDateId","onDatesChange","focusedInput","onFocusChange","Component","getOrders","filterBy","_makeQuerySTR","getById","orderId","update","order","addedOrder","STR","orders","Length","length","reduce","acc","item","idx","houserequests","dates","setOrders","_updateOrder","_addOrder","SearchForm","nightsNum","userDates","newDates","moment","utc","format","onChangeCap","diff","prevState","setLocation","ev","target","name","value","onSearch","toLowerCase","className","onChange","loc","placeholder","onClick","to","mapDispatchToProps","loadOrders","OrderService","connect","login","userCred","user","_handleLogin","logout","sessionStorage","clear","signup","getUsers","userId","addFavorite","favorite","setItem","JSON","stringify","getUserById","UserService","_loadUser","updateUser","updatedUser","setUser","setUsers","users","_removeUser","prev_next_btn_style","HousePreview","imgIdx","isFav","numOfImages","imgs","loadImage","preventDefault","imgLen","currIdx","onFavClick","event","stopPropagation","updateFavoriets","loggedInUser","favorites","some","favHouseId","paginationPadding","src","alt","viewBox","fill","fillOpacity","stroke","strokeWidth","focusable","aria-hidden","role","strokeLinecap","strokeLinejoin","d","style","map","img","index","paginationTurtle","rating","title","HouseList","getClassAddition","pathname","withRouter","split","SearchBar","isMenuOpen","suggestions","text","handleFocus","openMenu","onTextChange","e","options","regex","RegExp","sort","v","test","handleSelect","renderSuggestions","selectedText","prevProps","autoComplete","CapacityFilter","onToggleMenu","onSaveFilter","saveFilter","Fragment","PriceFilter","onChangePrice","min","max","htmlFor","FilterBar","val","NavBar","isScreen","toggleHamburger","newState","dispalyFilters","caller","not_home","getMenuItemClass","getLinkItemClass","blackLogo","whiteLogo","username","imgURL","userProfileImg","isLoading","system","Loading","turtLoading","Home","load","getBestByCountry","address","backgroundImage","home","israel","italy","spain","About","cabin","uploadImg","file","UPLOAD_URL","formData","FormData","append","fetch","body","then","json","catch","err","HouseEdit","newHouse","coords","description","capacity","addressInput","reviews","getRandomArbitrary","isModalShown","uploadStatus","getHouse","getAddress","upload","fileMap","files","splice","filePrms","Promise","all","resFiles","forEach","onInputChange","parseInt","onAddressChange","createOwner","onSaveHouse","owner","checkAddress","onBackClick","displayUpload","deleteImg","i","dispalyImg","results","geometry","createOptions","str","lat","lng","formatted","match","params","Math","random","toFixed","onSubmit","required","ref","multiple","HousePage","onDeleteHouse","Order","numOfPeople","byUser","createdAt","Date","getTime","ReserveHouse","onReserve","alert","_d","houseOrder","saveOrder","storedOrderId","reserved","addReserveClass","detailsPage","getTotalPrice","ReviewPreview","review","txt","ReviewList","ReviewCompose","reviewToEdit","now","loadUser","addReview","onUpdateReviews","MapMarker","TurtleMarker","MapPreview","handleChangeMap","center","zoom","Geocode","setApiKey","process","setLanguage","height","width","bootstrapURLKeys","position","transform","HouseDetails","loadHouse","checkIfOwner","handleDelete","updateReviews","reviewsToUpdate","slice","Login","msg","loginCred","email","password","signupCred","loginHandleChange","signupHandleChange","doLogin","userCreds","updateRoute","doSignup","signupCreds","removeUser","signupSection","loginSection","logoutSection","loadUsers","ResrvedPage","loadReservedHouses","orderIds","storedOrders","housesPrms","storedOrder","getFilteredHouses","statusInput","Favorites","loadFavoriteHouses","favoriteIds","loadFavorites","favHouses","RequestPreview","requestingUser","request","handleRequest","RequestList","answer","requestCOPY","requests","RequestPage","isDoneLoadingHouses","loadHouseData","resHouses","requestsPrms","newHouses","newRequests","find","request_idx","findIndex","requestUpdate","loadLists","lists","InitialRequests","setMyHouses","myHouses","ChatMessagePreview","message","content","Chat","currMessage","handleMessage","postMessage","socket","emit","messagesList","messages","currRoute","ChatRoomPage","socketIOClient","document","querySelector","classList","add","on","newMessages","Nav","screenWidth","navListBackground","mediaQuery","toggle","searchBar","searchForm","changeClassName","node","action","children","childNodes","contains","configNavDesign","path","userClick","navContainer","currPath","profileImageRender","updateWindowDimensions","bind","window","addEventListener","removeEventListener","innerWidth","innerHeight","App","component","exact","ReservedPage","MyHouses","Boolean","hostname","initialState","selectedHouse","localLoggedinUser","parse","selectedOrder","rootReducer","combineReducers","retObj","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","Store","createStore","applyMiddleware","thunk","ReactDOM","render","store","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7f24683a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/bgc.4b6c9fc5.jpg\";","module.exports = __webpack_public_path__ + \"static/media/loading.d80d571f.gif\";","module.exports = __webpack_public_path__ + \"static/media/crap1.73da7f75.jpg\";","import { createBrowserHistory } from \"history\";\r\nconst history = createBrowserHistory();\r\n\r\nexport default history;","import history from '../history';\r\nimport Axios from 'axios';\r\n////for json-server:\r\n// const BASE_URL = process.env.NODE_ENV === 'production'\r\n//     ? '/api/'\r\n//     : '//localhost:3000'\r\n////for real server:\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api'\r\n    : '//localhost:3030/api'\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n});\r\n\r\nexport default {\r\n    get(endpoint, data){\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data){\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data){\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data){\r\n        return ajax(endpoint, 'DELETE', data)\r\n    },\r\n    patch(endpoint, data){\r\n        return ajax(endpoint, 'PATCH', data)\r\n    }\r\n}\r\n\r\n\r\nasync function ajax(endpoint, method='get', data=null , dispatch) {    \r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data\r\n        })\r\n        return res.data;\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`);\r\n        console.dir(err);\r\n        if (err.response && err.response.status === 401) {\r\n          history.push('/'); // diaspatch ('authorition error')\r\n        }\r\n          // diaspatch ('error')\r\n          throw err; \r\n    }\r\n}","import axios from 'axios';\r\nimport HttpService from './HttpService'\r\n// import StorageService from \"./StorageService\"\r\n\r\n\r\n// const BASE_URL = (process.env.NODE_ENV !== 'development') ? '/api/house/'\r\n//     : '//localhost:3000/house/';\r\n\r\nexport default {\r\n    query,\r\n    get,\r\n    save,\r\n    remove,\r\n    getHouses\r\n}\r\n\r\nasync function query(filter) {\r\n    const queryStr = _createQueryStr(filter)\r\n    let temp = await HttpService.get(queryStr);\r\n    console.log('temp: ', temp)\r\n    return temp;\r\n\r\n}\r\nfunction getHouses() {\r\n    return HttpService.get('/house')\r\n}\r\nasync function save(house) {\r\n    const addedHouse = house._id ? await HttpService.put(`/house/${house._id}`, house)\r\n        :\r\n        await HttpService.post(`/house`, house);\r\n    return addedHouse\r\n}\r\n\r\n\r\nfunction get(id) {\r\n    return HttpService.get(`/house/${id}`)\r\n}\r\n\r\nfunction remove(id) {\r\n    return HttpService.delete(`/house/${id}`, id)\r\n}\r\n\r\nfunction _createQueryStr(filter) {\r\n    var querySTR = '/house'\r\n\r\n    if (filter.byId) {\r\n        querySTR += `/${filter._id}`\r\n    }\r\n    if (filter.location === '' || filter.location) {\r\n        querySTR += `?country=${filter.location}`\r\n    }\r\n\r\n    if (filter.startDate && filter.endDate && filter.location) {\r\n        querySTR += `&startDate=${filter.startDate}&endDate=${filter.endDate}`\r\n    }\r\n    if (filter.numOfperson) {\r\n        querySTR += `&capacity=${filter.numOfperson}`\r\n    }\r\n    if (filter.ids) {\r\n        const ids = filter.ids.join()\r\n        querySTR += `?ids=${ids}`\r\n    }\r\n\r\n    if (filter.countries) {\r\n        const countries = filter.countries.join()\r\n        querySTR = `/house?countries=${countries}`\r\n    }\r\n    if (filter.price) {\r\n        querySTR += `&price=${filter.price}`\r\n    }\r\n    return querySTR;\r\n}\r\n\r\n","export function loading() {\r\n  return { type: 'LOADING_START' }\r\n}\r\nexport function doneLoading() {\r\n  return { type: 'LOADING_DONE' }\r\n}\r\n\r\n\r\nexport function updateRoute(route) {\r\n  return async (dispatch) => {\r\n    try {      \r\n     await dispatch(_updateRoute(route))\r\n    }\r\n    catch (err) {\r\n      console.log('update route action err:',err)\r\n      throw err;\r\n    }\r\n\r\n  }\r\n}\r\nfunction _updateRoute(route) {\r\n  return {\r\n    type: 'UPDATE_ROUTE',\r\n    route\r\n  };\r\n}","import HouseService from '../services/HouseService';\r\nimport history from '../history'\r\nimport { loading, doneLoading } from './SystemActions';\r\n\r\n\r\n\r\nexport function filterHouses(filter) {\r\n  return async (dispatch) => {\r\n    try {\r\n      dispatch(loading());\r\n      dispatch(_setFilter(filter))\r\n      let houses = await HouseService.query(filter);\r\n      console.log('filterHouses action: ', houses)\r\n      await dispatch(_setHouses(houses))\r\n    } catch (err) {\r\n      console.log('filter houses action err', err)\r\n      throw err;\r\n    }\r\n    finally {\r\n      dispatch(doneLoading());\r\n    }\r\n  }\r\n}\r\nexport function getBestByCountry(filter) {\r\n  return async (dispatch) => {\r\n    try {\r\n      let houses = await HouseService.query(filter);\r\n      dispatch(_setBestByCountry(filter.countries[0], houses))\r\n    }\r\n    catch (err) {\r\n      throw (err)\r\n    }\r\n\r\n  }\r\n}\r\n\r\nexport function loadFavorites(ids) {\r\n  return async dispatch => {\r\n    try {\r\n      dispatch(loading());\r\n      if (ids.length > 0) {\r\n        const favHouses = await HouseService.query({ ids: ids })\r\n        dispatch(_setFavs(favHouses))\r\n      } else {\r\n        dispatch(_setFavs([]))\r\n      }\r\n\r\n    }\r\n    catch (err) {\r\n      console.log(err)\r\n      throw err\r\n    }\r\n    finally {\r\n      dispatch(doneLoading());\r\n    }\r\n  }\r\n}\r\n\r\nexport function setMyHouses(ids) {\r\n  return async dispatch => {\r\n    try {\r\n      if (ids.length > 0) {\r\n        dispatch(loading());\r\n        const myHouses = await HouseService.query({ ids: ids })\r\n        dispatch(_setMyHouses(myHouses))\r\n      } else {\r\n        return dispatch => {\r\n          dispatch(_setMyHouses([]))\r\n        }\r\n      }\r\n    }\r\n    catch (err) {\r\n      console.log(err)\r\n    }\r\n    finally {\r\n      dispatch(doneLoading());\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\nexport function setFilter(filter) {\r\n  return dispatch => {\r\n    dispatch(_setFilter(filter));\r\n  };\r\n}\r\n\r\nexport function saveHouse(house) {\r\n  return async dispatch => {\r\n    try {\r\n      dispatch(loading())\r\n      const addedHouse = await HouseService.save(house);\r\n      house._id ? dispatch(_updateHouse(addedHouse)) : dispatch(_addHouse(addedHouse));\r\n      return addedHouse\r\n    } catch (err) {\r\n      console.log('HouseActions: err in addHouse', err);\r\n    }\r\n    finally {\r\n      dispatch(doneLoading());\r\n    }\r\n  };\r\n}\r\n\r\nexport function deleteHouse(houseId) {\r\n  return async (dispatch) => {\r\n    try {\r\n      await HouseService.remove(houseId)\r\n      dispatch(_deleteHouse(houseId))\r\n    }\r\n    catch (err) {\r\n      console.log(err)\r\n    }\r\n\r\n  }\r\n}\r\n\r\nfunction _setBestByCountry(country, houses) {\r\n  return {\r\n    type: `SET_BEST_${country.toUpperCase()}`,\r\n    houses\r\n  }\r\n}\r\n\r\n\r\nfunction _setFavs(houses) {\r\n  return {\r\n    type: 'SET_FAVS',\r\n    houses\r\n  }\r\n}\r\nfunction _setMyHouses(houses) {\r\n  return {\r\n    type: 'SET_MY_HOUSES',\r\n    houses\r\n  }\r\n}\r\n\r\n\r\nfunction _setHouses(houses) {\r\n  return {\r\n    type: 'SET_HOUSES',\r\n    houses\r\n  };\r\n}\r\nfunction _setFilter(filter) {\r\n  return {\r\n    type: 'SET_FILTER',\r\n    filter\r\n  };\r\n}\r\n\r\nfunction _addHouse(house) {\r\n  return {\r\n    type: 'HOUSE_ADD',\r\n    house\r\n  };\r\n}\r\n\r\nfunction _updateHouse(house) {\r\n  return {\r\n    type: 'HOUSE_UPDATE',\r\n    house\r\n  };\r\n}\r\n\r\nfunction _deleteHouse(houseId) {\r\n  return {\r\n    type: 'HOUSE_REMOVE',\r\n    houseId\r\n  };\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from 'react-router-dom';\r\n// import DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport 'react-dates/lib/css/_datepicker.css';\r\nimport 'react-dates/initialize';\r\nimport { connect } from 'react-redux';\r\nimport { setFilter, filterHouses } from '../actions/HouseActions'\r\nimport { DateRangePicker, SingleDatePicker, DayPickerRangeController, toMomentObject } from 'react-dates';\r\nimport moment from 'moment'\r\n// import '../assets/styles/index.css'\r\n\r\n\r\nexport default class DatePicker extends Component {\r\n\r\n    state = {\r\n        startDate: null,\r\n        endDate: null\r\n    }\r\n\r\n    handleChange = (key, date) => {\r\n        this.setState({\r\n            [key]: date\r\n        });\r\n    }\r\n    \r\n    sendDates = () => {\r\n        this.props.changeDates({ ...this.state })\r\n    }    \r\n    \r\n    \r\n\r\n    render() {\r\n       \r\n        return <DateRangePicker\r\n            startDatePlaceholderText ='mm/dd/yyyy'\r\n            endDatePlaceholderText = 'mm/dd/yyyy'\r\n            startDate={this.state.startDate} // momentPropTypes.momentObj or null,\r\n            startDateId=\"start-date\" // PropTypes.string.isRequired,\r\n            endDate={this.state.endDate} // momentPropTypes.momentObj or null,\r\n            endDateId=\"end-date\" // PropTypes.string.isRequired,\r\n            onDatesChange={({ startDate, endDate }) => this.setState({ startDate, endDate }, () => this.sendDates())}  // PropTypes.func.isRequired,\r\n            focusedInput={this.state.focusedInput} // PropTypes.oneOf([START_DATE, END_DATE]) or null,\r\n            onFocusChange={focusedInput => this.setState({ focusedInput })} // PropTypes.func.isRequired,\r\n        />\r\n    }\r\n}","// import axios from 'axios';\r\nimport HttpService from './HttpService'\r\n// import StorageService from \"./StorageService\"\r\n\r\nexport default {\r\n    getOrders,\r\n    getById,\r\n    remove,\r\n    update,\r\n    save\r\n}\r\n\r\nfunction getOrders(filterBy = {}) {\r\n    let querySTR = _makeQuerySTR(filterBy)\r\n    return HttpService.get(`/order${querySTR}`)\r\n}\r\n\r\nfunction getById(orderId) {\r\n    return HttpService.get(`/order/${orderId}`)\r\n}\r\nfunction remove(orderId) {\r\n    return HttpService.delete(`/order/${orderId}`)\r\n}\r\n\r\nfunction update(order) {\r\n    return HttpService.put(`/order/${order._id}`, order)\r\n}\r\nasync function save(order) {\r\n    const addedOrder = order._id ? await HttpService.put(`/order/${order._id}`, order)\r\n        :\r\n        await HttpService.post(`/order`, order);    \r\n    return addedOrder\r\n}\r\nfunction _makeQuerySTR(filterBy) {\r\n    let STR = '';\r\n    if (filterBy.orders) {\r\n        let orders = filterBy.orders\r\n        console.log(' _makeQuerySTR: orders are ', orders)\r\n        let Length = orders.length\r\n        STR = orders.reduce((acc, item, idx) => {\r\n            if (idx < Length - 1) return acc + `order${idx}=${item}&`\r\n            else return acc + `order${idx}=${item}`\r\n        }, '?reserved=true&')\r\n        return STR;\r\n    }\r\n    if (filterBy.houserequests) {\r\n        STR = `?houserequests=true&houseId=${filterBy.houseId}`\r\n    }\r\n    if(filterBy.dates){\r\n        STR=`?dates=true&startDate=${filterBy.startDate}&endDate=${filterBy.endDate}`\r\n    }\r\n    return STR;\r\n}\r\n","import OrderService from '../services/OrderService.js';\r\n\r\nexport function loadOrders(filter) {  \r\n  return async dispatch => {\r\n    try {\r\n      const orders = await OrderService.query(filter);      \r\n      dispatch(setOrders(orders));\r\n\r\n    } catch (err) {\r\n      console.log('OrderActions: err in loadOrders', err);\r\n    }\r\n  };\r\n}\r\n\r\nexport function filterOrders(filter) {\r\n  return async (dispatch) => {\r\n    dispatch(_setFilter(filter))\r\n    const orders = await OrderService.query(filter);\r\n    dispatch(setOrders(orders))\r\n  }\r\n}\r\n\r\nexport function setFilter(filter) {\r\n  return dispatch => {\r\n    dispatch(_setFilter(filter));\r\n\r\n  };\r\n}\r\n\r\n\r\nexport function deleteOrder(orderId) {\r\n  return async (dispatch) => {\r\n    try {\r\n      await OrderService.remove(orderId)      \r\n      dispatch(_deleteOrder(orderId))\r\n    }\r\n    catch (err) {\r\n      console.log(err)\r\n    }\r\n\r\n  }\r\n}\r\nexport function saveOrder(order) {\r\n    return async dispatch => {\r\n      try {\r\n        const addedOrder = await OrderService.save(order);        \r\n        order._id ? dispatch(_updateOrder(addedOrder)) : dispatch(_addOrder(addedOrder));\r\n      } catch (err) {\r\n        console.log('OrderActions: err in addOrder', err);\r\n      }\r\n    };\r\n  }\r\n\r\n\r\nfunction setOrders(orders) {\r\n  return {\r\n    type: 'SET_ORDERS',\r\n    orders\r\n  };\r\n}\r\nfunction _setFilter(filter) {\r\n  return {\r\n    type: 'SET_FILTER',\r\n    filter\r\n  };\r\n}\r\n\r\nfunction _updateOrder(order) {\r\n  return {\r\n    type: 'ORDER_UPDATE',\r\n    order\r\n  };\r\n\r\n}\r\n\r\nfunction _deleteOrder(orderId) {\r\n  return {\r\n    type: 'ORDER_REMOVE',\r\n    orderId\r\n  };\r\n}\r\nfunction _addOrder(order) {\r\n    return {\r\n      type: 'ORDER_ADD',\r\n      order\r\n    };\r\n  }\r\n  \r\n\r\n\r\n","import React, { Component } from \"react\";\r\nimport { Link } from 'react-router-dom';\r\nimport DatePicker from '../cmps/DatePicker';\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport 'react-dates/lib/css/_datepicker.css';\r\nimport 'react-dates/initialize';\r\nimport { connect } from 'react-redux';\r\nimport { setFilter, filterHouses } from '../actions/HouseActions'\r\nimport { loadOrders } from '../actions/OrderActions'\r\nimport { DateRangePicker, SingleDatePicker, DayPickerRangeController } from 'react-dates';\r\nimport moment from 'moment'\r\nimport OrderService from '../services/OrderService.js';\r\nimport HouseService from '../services/HouseService'\r\nimport '../assets/styles/index.css'\r\n\r\nclass SearchForm extends Component {\r\n    state = {\r\n        filterBy: {\r\n            numOfperson: 1,\r\n            location: '',\r\n            nightsNum: 1\r\n        },\r\n        startDate: null,\r\n        endDate: null\r\n    }\r\n    changeDates = (userDates) => {\r\n        let startDate = moment.utc(userDates.startDate).format()\r\n        let endDate = moment.utc(userDates.endDate).format()\r\n        let newDates = { startDate: startDate, endDate: endDate }\r\n        this.setState({ ...this.state, ...newDates })\r\n    }\r\n    onChangeCap = (diff, key) => {\r\n        if (this.state.filterBy[key] === 1 && diff === -1) return\r\n        this.setState(prevState => prevState.filterBy[key] += diff)\r\n    }\r\n\r\n    setLocation = (ev) => {\r\n        const key = ev.target.name\r\n        const value = ev.target.value\r\n        const filterBy = { ...this.state.filterBy }\r\n        filterBy[key] = value\r\n        this.setState({ filterBy })\r\n    }\r\n\r\n    handleChange = date => {\r\n        this.setState({\r\n            startDate: date\r\n        });\r\n    }\r\n\r\n    onSearch = () => {\r\n        const filterBy = { ...this.state.filterBy }\r\n        filterBy.location = filterBy.location.toLowerCase()\r\n        filterBy.startDate = this.state.startDate\r\n        filterBy.endDate = this.state.endDate\r\n        this.props.setFilter(filterBy)\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        return <div className=\"search-form flex column space-between\">\r\n            <div className=\"search-form-title\">Book with Turtle House and feel At Home, Wherever You Go.</div>\r\n            <div>\r\n                <div className=\"form-input-header\">WHERE</div>\r\n                <input onChange={this.setLocation} className=\"form-loc\" value={this.state.filterBy.loc} type=\"text\" name=\"location\" placeholder=\"Anywhere\"></input>\r\n            </div>\r\n            <div>\r\n                <div className=\"form-input-header\">CHECK-IN / CHECKOUT</div>\r\n                <DatePicker changeDates={this.changeDates}></DatePicker>\r\n            </div>\r\n            <div className=\"form-cap flex space-between align-center\">\r\n                <span className=\"form-input-header\">GUESTS</span>\r\n                <span className=\"form-cap-control flex space-between\">\r\n                    <button onClick={(ev)=>this.onChangeCap(1, 'numOfperson')} className=\"form-num-btn pointer\" name=\"numOfperson\">+</button>\r\n                    <span className=\"form-cap-num\">{this.state.filterBy.numOfperson}</span>\r\n                    <button onClick={(ev)=>this.onChangeCap(-1, 'numOfperson')} className=\"form-num-btn pointer minus\" name=\"numOfperson\">-</button>\r\n                </span>\r\n            </div>\r\n            <Link className=\"align-self\" to=\"/house\">\r\n                <button onClick={this.onSearch} className=\"form-btn pointer flex align-center justify-center\">Search</button>\r\n            </Link>\r\n        </div>\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        filterBy: state.house.filterBy,\r\n        houses: state.house.houses\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    setFilter,\r\n    filterHouses,\r\n    loadOrders,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchForm)\r\n\r\n","// import axios from 'axios';\r\nimport HttpService from './HttpService'\r\n// import StorageService from \"./StorageService\"\r\n\r\nexport default {\r\n    login,\r\n    logout,\r\n    signup,\r\n    getUsers,\r\n    getById,\r\n    remove,\r\n    update,\r\n    addFavorite\r\n}\r\n\r\nfunction getUsers() {\r\n    return HttpService.get('/user')\r\n}\r\n\r\nfunction getById(userId) {\r\n    return HttpService.get(`/user/${userId}`)\r\n}\r\nfunction remove(userId) {\r\n    return HttpService.delete(`/user/${userId}`)\r\n}\r\n\r\nfunction update(user) {\r\n    return HttpService.put(`/user/${user._id}`, user)\r\n}\r\nfunction addFavorite(user,favorite) {\r\n    return HttpService.patch(`/user/${user._id}`, favorite)\r\n}\r\n\r\nasync function login(userCred) {\r\n    const user = await HttpService.post('/auth/login', userCred)\r\n    return _handleLogin(user)\r\n}\r\nasync function signup(userCred) {\r\n    const user = await HttpService.post('/auth/signup', userCred)\r\n    return _handleLogin(user)\r\n}\r\nasync function logout() {\r\n    await HttpService.post('/auth/logout');\r\n    console.log('front clear session user logged out')\r\n    sessionStorage.clear();\r\n}\r\nfunction _handleLogin(user) {\r\n    sessionStorage.setItem('user', JSON.stringify(user))\r\n    return user;\r\n}\r\n","import UserService from '../services/UserService';\r\nimport { loading, doneLoading } from './SystemActions';\r\n// import history from './../history';\r\n\r\n// THUNK\r\nexport function loadUsers() {\r\n  return async dispatch => {\r\n    try {      \r\n      dispatch(loading());\r\n      const users = await UserService.getUsers();\r\n      dispatch(setUsers(users));\r\n    } catch (err) {\r\n      console.log('UserActions: err in loadUsers', err);      \r\n    } finally {\r\n      dispatch(doneLoading());\r\n    }\r\n  };\r\n}\r\n// THUNK\r\nexport function removeUser(userId) {\r\n  return async dispatch => {\r\n    try {\r\n      await UserService.remove(userId);\r\n      dispatch(_removeUser(userId));\r\n    } catch (err) {\r\n      console.log('UserActions: err in removeUser', err);\r\n    }\r\n  };\r\n}\r\n// THUNK\r\nexport function getUserById(userId) {\r\n  return async dispatch => {\r\n    try {\r\n     let user = await UserService.getById(userId);     \r\n      dispatch(_loadUser(user)); \r\n      return user \r\n    } catch (err) {\r\n      console.log('UserActions: err in get user', err);\r\n    }\r\n  };\r\n}\r\n\r\n//yael update user\r\nexport function updateUser(user) {\r\n  return async dispatch => {\r\n    try {\r\n     let updatedUser= await UserService.update(user);     \r\n      dispatch(setUser(updatedUser));\r\n    } catch (err) {\r\n      console.log('UserActions: err in updateUser', err);\r\n    }\r\n  };\r\n}\r\n\r\n\r\nexport function login(userCreds) {\r\n  return async dispatch => {\r\n    const user = await UserService.login(userCreds);\r\n    dispatch(setUser(user));\r\n  };\r\n}\r\nexport function signup(userCreds) {\r\n  return async dispatch => {\r\n    const user = await UserService.signup(userCreds);\r\n    dispatch(setUser(user));\r\n  };\r\n}\r\nexport function logout() {\r\n  return async dispatch => {\r\n    await UserService.logout();\r\n    dispatch(setUser(null));\r\n  };\r\n}\r\n\r\nexport function setUser(user) {\r\n  return {\r\n    type: 'SET_USER',\r\n    user\r\n  };\r\n}\r\nfunction setUsers(users) {\r\n  return {\r\n    type: 'SET_USERS',\r\n    users\r\n  };\r\n}\r\n\r\nfunction _removeUser(userId) {\r\n  return {\r\n    type: 'USER_REMOVE',\r\n    userId\r\n  };\r\n}\r\nfunction _loadUser(user) {\r\n  return {\r\n    type: 'USER_LOAD',\r\n    user\r\n  };\r\n}","import React, { Component } from \"react\";\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { updateUser, getUserById } from '../actions/UserActions'\r\nimport UserService from '../services/UserService'\r\n// import { AddToFavorites } from '../actions/HouseActions'\r\nimport paginationTurtle from '../assets/img/pagin_turtle.png'\r\nlet prev_next_btn_style = { 'height': '10px', 'width': '10px', 'display': 'block', 'fill': 'rgb(34, 34, 34)', 'position': 'absolute', 'left': '30%', 'top': '32%' }\r\n\r\n\r\nclass HousePreview extends Component {\r\n    state = {\r\n        imgIdx: 0,\r\n        isFav: false,\r\n        numOfImages: this.props.house.imgs.length\r\n    }\r\n\r\n    componentDidMount() {\r\n        const houseId = this.props.house._id\r\n        if (this.props.loggedInUser) {\r\n            const isFav = this.props.loggedInUser.favorites.some(favHouseId => {\r\n                return houseId === favHouseId\r\n            })\r\n            this.setState({ isFav })\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    loadImage = (ev, diff) => {\r\n        ev.preventDefault();\r\n        var imgLen = this.props.house.imgs.length;\r\n        var currIdx = this.state.imgIdx;\r\n        if (currIdx + diff >= imgLen) return this.setState({ imgIdx: 0 });\r\n        else if (currIdx + diff < 0) return this.setState({ imgIdx: imgLen - 1 });\r\n        else return this.setState({ imgIdx: currIdx + diff })\r\n    }\r\n    onFavClick = (event) => {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        this.setState({ isFav: !this.state.isFav }, this.updateFavoriets)\r\n    }\r\n\r\n    updateFavoriets = async () => {\r\n        const loggedInUser = { ...this.props.loggedInUser }\r\n        if (!loggedInUser) {\r\n            console.log('Please login/signup')\r\n        }\r\n        else {\r\n            let favorites = loggedInUser.favorites\r\n            if (this.state.isFav) {\r\n                favorites = [...favorites, this.props.house._id]\r\n                loggedInUser.favorites = favorites\r\n            }\r\n            else {\r\n                favorites = favorites.filter(id => id !== this.props.house._id)\r\n                loggedInUser.favorites = favorites\r\n            }\r\n            this.props.updateUser(loggedInUser)\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n        let paginationPadding = (30 * (this.state.numOfImages)) + 'px'\r\n        return (\r\n\r\n            <Link to={\"/house/\" + this.props.house._id}>\r\n                <section className=\"house-preview-container\">\r\n                    <div className=\"house-preview-image-container\">\r\n                        <img className=\"house-preview-image\" src={this.props.house.imgs[this.state.imgIdx]} alt=\"\" />\r\n                        <div className=\"house-preview-btn-container\" >\r\n                            <div className=\"house-preview-btn\" >\r\n                                <div className=\"house-preview-heart-container\" onClick={this.onFavClick}>\r\n                                    <svg className=\"house-preview-heart\" viewBox=\"0 0 24 24\" fill={(this.state.isFav === false) ? \"white\" : \"red\"} fillOpacity=\"1\" stroke=\"#222222\" strokeWidth=\"1.4\"\r\n                                        focusable=\"false\" aria-hidden=\"true\" role=\"presentation\" strokeLinecap=\"round\"\r\n                                        strokeLinejoin=\"round\"><path d=\"m17.5 2.9c-2.1 0-4.1 1.3-5.4 2.8-1.6-1.6-3.8-3.2-6.2-2.7-1.5.2-2.9 1.2-3.6 2.6-2.3 4.1 1 8.3 3.9 11.1 1.4 1.3 2.8 2.5 4.3 3.6.4.3 1.1.9 1.6.9s1.2-.6 1.6-.9c3.2-2.3 6.6-5.1 8.2-8.8 1.5-3.4 0-8.6-4.4-8.6\" strokeLinejoin=\"round\"></path></svg>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"house-preview-btn\">\r\n                                <div className=\"house-preview-btn-prev\" onClick={(ev) => this.loadImage(ev, -1)}>\r\n                                    <svg viewBox=\"0 0 16 16\" role=\"presentation\" aria-hidden=\"true\" focusable=\"false\" style={prev_next_btn_style}>\r\n                                        <path d=\"m10.8 16c-.4 0-.7-.1-.9-.4l-6.8-6.7c-.5-.5-.5-1.3 0-1.8l6.8-6.7c.5-.5 1.2-.5 1.7 0s .5 1.2 0 1.7l-5.8 5.9 5.8 5.9c.5.5.5 1.2 0 1.7-.2.3-.5.4-.8.4\"></path></svg>\r\n                                </div>\r\n                                <div className=\"house-preview-btn-next\" onClick={(ev) => this.loadImage(ev, 1)} >\r\n                                    <svg viewBox=\"0 0 16 16\" role=\"presentation\" aria-hidden=\"true\" focusable=\"false\" style={prev_next_btn_style}>\r\n                                        <path d=\"m5.3 16c .3 0 .6-.1.8-.4l6.8-6.7c.5-.5.5-1.3 0-1.8l-6.8-6.7c-.5-.5-1.2-.5-1.7 0s-.5 1.2 0 1.7l5.8 5.9-5.8 5.9c-.5.5-.5 1.2 0 1.7.2.3.5.4.9.4\"></path></svg>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"house-preview-btn\">\r\n\r\n                                <div className=\"house-preview-pagination-container\" style={{ 'left': `calc((100% - ${paginationPadding})/2)` }}>\r\n                                    {this.props.house.imgs.map((img, index) => {\r\n                                        if (index !== this.state.imgIdx) return <div key={index} className=\"house-preview-pagination-circle\"></div>\r\n                                        else return <div key={index} className=\"house-preview-pagination-circle-currimg\"><img src={paginationTurtle} alt=\"\" className=\"house-preview-pagination-turtle\" /></div>\r\n                                    }\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div className=\"house-preview-details\">\r\n                        <div className=\"house-preview-first-line-container\">\r\n                            <span className=\"house-preview-first-line-superhost\">SUPERHOST</span>\r\n                            <div className=\"house-preview-first-line-tag\">Entire guesthouse</div>\r\n                            <div className=\"house-preview-first-line-rate-container\">\r\n                                <svg className=\"house-preview-rate-star\" viewBox=\"0 0 1000 1000\" role=\"presentation\" aria-hidden=\"true\" focusable=\"false\"><path d=\"M972 380c9 28 2 50-20 67L725 619l87 280c11 39-18 75-54 75-12 0-23-4-33-12L499 790 273 962a58 58 0 0 1-78-12 50 50 0 0 1-8-51l86-278L46 447c-21-17-28-39-19-67 8-24 29-40 52-40h280l87-279c7-23 28-39 52-39 25 0 47 17 54 41l87 277h280c24 0 45 16 53 40z\"></path></svg>\r\n                                <span className=\"house-preview-first-line-rate-score\" >{this.props.house.rating}</span>\r\n                            </div>\r\n                        </div>\r\n                        <span className=\"house-preview-second-line-container\">\r\n                            {this.props.house.title}\r\n                        </span>\r\n                        <div className=\"house-preview-third-line-container\">\r\n                            <div className=\"house-preview-third-line-cost\">\r\n                                <span className=\"house-preview-third-line-cost-part-one\">${this.props.house.price}</span>\r\n                                <span className=\"house-preview-third-line-cost-part-two\">/night</span></div>\r\n                            {/* <div className=\"house-preview-third-line-total-cost\"><span>₪{this.props.house.price} total</span></div> */}\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n            </Link>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.user.loggedInUser\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    updateUser,\r\n    getUserById\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HousePreview)","import React, { Component } from \"react\";\r\nimport HousePreview from \"./HousePreview\";\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n\r\nclass HouseList extends Component {\r\n\r\n    getClassAddition = () => {\r\n        let caller = this.props.location.pathname        \r\n        switch (caller) {\r\n            case '/':\r\n                return \"home-list\";\r\n            case '/favorites':\r\n                return \"favorite-list\";\r\n            case '/myhouses':                \r\n                return \"my-houses\";\r\n            case '/house':\r\n                return \"house-page\";\r\n            default:\r\n                return \"\";\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        const { houses } = this.props\r\n\r\n        return (\r\n            <section className={\"house-container \" + this.getClassAddition()}>\r\n\r\n                <ul className={\"house-list clean-list \" + this.getClassAddition()}>\r\n                    {houses.map((house, idx) => (\r\n                        <li key={house._id}>\r\n                            <HousePreview house={house} />\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            </section>\r\n        )\r\n    }\r\n}\r\nexport default HouseList = withRouter(HouseList)","export default `\r\nAfghanistan\r\nAlbania\r\nAlgeria\r\nAndorra\r\nAngola\r\nAntigua & Deps\r\nArgentina\r\nArmenia\r\nAustralia\r\nAustria\r\nAzerbaijan\r\nBahamas\r\nBahrain\r\nBangladesh\r\nBarbados\r\nBelarus\r\nBelgium\r\nBelize\r\nBenin\r\nBhutan\r\nBolivia\r\nBosnia Herzegovina\r\nBotswana\r\nBrazil\r\nBrunei\r\nBulgaria\r\nBurkina\r\nBurundi\r\nCambodia\r\nCameroon\r\nCanada\r\nCape Verde\r\nCentral African Rep\r\nChad\r\nChile\r\nChina\r\nColombia\r\nComoros\r\nCongo\r\nCongo {Democratic Rep}\r\nCosta Rica\r\nCroatia\r\nCuba\r\nCyprus\r\nCzech Republic\r\nDenmark\r\nDjibouti\r\nDominica\r\nDominican Republic\r\nEast Timor\r\nEcuador\r\nEgypt\r\nEl Salvador\r\nEngland\r\nEquatorial Guinea\r\nEritrea\r\nEstonia\r\nEthiopia\r\nFiji\r\nFinland\r\nFrance\r\nGabon\r\nGambia\r\nGeorgia\r\nGermany\r\nGhana\r\nGreece\r\nGrenada\r\nGuatemala\r\nGuinea\r\nGuinea-Bissau\r\nGuyana\r\nHaiti\r\nHonduras\r\nHungary\r\nIceland\r\nIndia\r\nIndonesia\r\nIran\r\nIraq\r\nIreland {Republic}\r\nIsrael\r\nItaly\r\nIvory Coast\r\nJamaica\r\nJapan\r\nJordan\r\nKazakhstan\r\nKenya\r\nKiribati\r\nKorea North\r\nKorea South\r\nKosovo\r\nKuwait\r\nKyrgyzstan\r\nLaos\r\nLatvia\r\nLebanon\r\nLesotho\r\nLiberia\r\nLibya\r\nLiechtenstein\r\nLithuania\r\nLuxembourg\r\nMacedonia\r\nMadagascar\r\nMalawi\r\nMalaysia\r\nMaldives\r\nMali\r\nMalta\r\nMarshall Islands\r\nMauritania\r\nMauritius\r\nMexico\r\nMicronesia\r\nMoldova\r\nMonaco\r\nMongolia\r\nMontenegro\r\nMorocco\r\nMozambique\r\nMyanmar, {Burma}\r\nNamibia\r\nNauru\r\nNepal\r\nNetherlands\r\nNew Zealand\r\nNicaragua\r\nNiger\r\nNigeria\r\nNorway\r\nOman\r\nPakistan\r\nPalau\r\nPanama\r\nPapua New Guinea\r\nParaguay\r\nPeru\r\nPhilippines\r\nPoland\r\nPortugal\r\nQatar\r\nRomania\r\nRussian Federation\r\nRwanda\r\nSt Kitts & Nevis\r\nSt Lucia\r\nSaint Vincent & the Grenadines\r\nSamoa\r\nSan Marino\r\nSao Tome & Principe\r\nSaudi Arabia\r\nSenegal\r\nSerbia\r\nSeychelles\r\nSierra Leone\r\nSingapore\r\nSlovakia\r\nSlovenia\r\nSolomon Islands\r\nSomalia\r\nSouth Africa\r\nSouth Sudan\r\nSpain\r\nSri Lanka\r\nSudan\r\nSuriname\r\nSwaziland\r\nSweden\r\nSwitzerland\r\nSyria\r\nTaiwan\r\nTajikistan\r\nTanzania\r\nThailand\r\nTogo\r\nTonga\r\nTrinidad & Tobago\r\nTunisia\r\nTurkey\r\nTurkmenistan\r\nTuvalu\r\nUganda\r\nUkraine\r\nUnited Arab Emirates\r\nUnited Kingdom\r\nUnited States\r\nUruguay\r\nUzbekistan\r\nVanuatu\r\nVatican City\r\nVenezuela\r\nVietnam\r\nYemen\r\nZambia\r\nZimbabwe`.split('\\n')","import React, { Component } from \"react\";\r\nimport DatePicker from \"react-datepicker\";\r\n// import \"react-datepicker/dist/react-datepicker.css\";\r\nimport 'react-dates/lib/css/_datepicker.css';\r\nimport 'react-dates/initialize';\r\nimport { connect } from 'react-redux';\r\nimport { setFilter, filterHouses } from '../actions/HouseActions'\r\nimport countries from '../services/CountryService'\r\n// import { DateRangePicker, SingleDatePicker, DayPickerRangeController } from 'react-dates';\r\nimport '../assets/styles/index.css'\r\nimport '../assets/styles/searchbar.css'\r\nimport { Link } from \"react-router-dom\";\r\nimport { withRouter } from \"react-router\";\r\n\r\n\r\n\r\nclass SearchBar extends Component {\r\n    state = {\r\n        filterBy: this.props.filterBy,\r\n        isMenuOpen: false,\r\n        suggestions: [],\r\n        text: this.props.filterBy.location\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({ filterBy: { ...this.props.filterBy } })\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.filterBy !== this.props.filterBy) {\r\n            this.setState({ filterBy: { ...this.props.filterBy } })\r\n        }\r\n\r\n    }\r\n\r\n\r\n    onChange = (ev) => {\r\n        const key = ev.target.name\r\n        const value = ev.target.value\r\n        const filterBy = { ...this.state.filterBy }\r\n        filterBy[key] = value\r\n        this.setState({ filterBy }, () => this.props.filterHouses(filterBy))\r\n    }\r\n\r\n    handleFocus = () => {\r\n        this.props.openMenu()\r\n\r\n    }\r\n\r\n    onTextChange = (e) => {\r\n        const value = e.target.value;\r\n        let options = [];\r\n        if (value.length > 0) {\r\n            const regex = new RegExp(`^${value}`, 'i');\r\n            options = countries.sort().filter(v => regex.test(v))\r\n        }\r\n\r\n        const suggestions = ['Anywhere', ...options]\r\n        this.setState(() => ({\r\n            suggestions,\r\n            text: value\r\n        }))\r\n    }\r\n\r\n    selectedText(value) {        \r\n        if (value === 'Anywhere') value = ''\r\n        const filterBy = { ...this.state.filterBy }\r\n        filterBy.location = value.toLowerCase()\r\n\r\n        this.setState({\r\n            text: value,\r\n            suggestions: [],\r\n            filterBy: filterBy\r\n        }, this.handleSelect)\r\n\r\n    }\r\n\r\n    handleSelect = async () => {\r\n        await this.props.filterHouses(this.state.filterBy)\r\n        this.props.history.push('/house')\r\n    }\r\n\r\n    renderSuggestions = () => {\r\n        let { suggestions } = this.state;\r\n        if (suggestions.length === 0) {\r\n            return null;\r\n        }\r\n        return (\r\n            <ul className=\"country-list\" >\r\n                {\r\n                    suggestions.map((item, index) => (<li key={index} onClick={() => this.selectedText(item)}>{item}</li>))\r\n                }\r\n            </ul>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        const { text, suggestions, filterBy } = this.state;\r\n        return <div className=\"flex column\">\r\n            <input autoComplete=\"off\" onChange={this.onTextChange}\r\n                className=\"form-loc\" value={text} type=\"text\" name=\"location\" placeholder=\"Where?\"></input>\r\n            <div> {this.renderSuggestions()}</div>\r\n        </div>\r\n\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        filterBy: state.house.filterBy\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    filterHouses,\r\n    setFilter\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(SearchBar))\r\n\r\n// export default SearchForm","import React, { Component } from \"react\";\r\nimport DatePicker from \"react-datepicker\";\r\n\r\nimport '../assets/styles/filters.css'\r\n\r\nimport { connect } from 'react-redux';\r\nimport { setFilter, filterHouses } from '../actions/HouseActions'\r\n// import { DateRangePicker, SingleDatePicker, DayPickerRangeController } from 'react-dates';\r\nimport '../assets/styles/index.css'\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default class CapacityFilter extends Component {\r\n    state = {\r\n        isMenuOpen: false\r\n    }\r\n\r\n    onToggleMenu = () => {\r\n        this.setState((prevState => prevState.isMenuOpen = !prevState.isMenuOpen))\r\n        // this.setState((prevState => prevState.isMenuOpen = !prevState.isMenuOpen),()=>this.props.updateState())\r\n    }\r\n\r\n    onSaveFilter = () => {\r\n        this.onToggleMenu()\r\n        this.props.saveFilter()\r\n    }\r\n\r\n    render() {\r\n        const { isMenuOpen } = this.state\r\n        return <React.Fragment>\r\n            <div className=\"filter-container flex column\">\r\n                <button onClick={this.onToggleMenu} className=\"filter-btn pointer\">Guests</button>\r\n                <div className={`filter-menu ${(isMenuOpen) ? 'shown-filter column space-between' : ''}`}>\r\n                    <span className=\"form-cap-control flex space-between align-center\">\r\n                        <button onClick={() => this.props.onChangeCap(1, 'numOfperson')} className=\"filter-num-btn pointer\" name=\"numOfperson\">+</button>\r\n                        <span className=\"form-cap-num\">{this.props.filterBy.numOfperson}</span>\r\n                        <button onClick={() => this.props.onChangeCap(-1, 'numOfperson')} className=\"filter-num-btn pointer\" name=\"numOfperson\">-</button>\r\n                    </span>\r\n                    <Link to=\"/house\">\r\n                        <button onClick={this.onSaveFilter} className=\"save-filter-btn pointer\">Save</button>\r\n                    </Link>\r\n\r\n                </div>\r\n            </div>\r\n        </React.Fragment>\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport DatePicker from \"react-datepicker\";\r\n\r\nimport '../assets/styles/filters.css'\r\n\r\nimport { connect } from 'react-redux';\r\nimport { setFilter, filterHouses } from '../actions/HouseActions'\r\n// import { DateRangePicker, SingleDatePicker, DayPickerRangeController } from 'react-dates';\r\nimport '../assets/styles/index.css'\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default class PriceFilter extends Component {\r\n    state = {\r\n        isMenuOpen: false        \r\n    }\r\n\r\n    onToggleMenu = () => {\r\n        this.setState((prevState => prevState.isMenuOpen = !prevState.isMenuOpen))\r\n\r\n    }\r\n\r\n    onSaveFilter = () => {        \r\n        this.onToggleMenu()        \r\n        this.props.saveFilter()\r\n    }\r\n\r\n    onChange = (ev) => {        \r\n        this.props.onChangePrice(+ev.target.value)     \r\n\r\n    }\r\n\r\n    render() {\r\n        const { isMenuOpen } = this.state\r\n        return <React.Fragment>\r\n            <div className=\"filter-container pointer flex column\">\r\n                <button onClick={this.onToggleMenu} className=\"filter-btn\">Price</button>\r\n                <div className={`filter-menu ${(isMenuOpen) ? 'shown-filter price column space-between' : ''}`}>\r\n                    <input onChange={this.onChange} type=\"range\" name=\"price\" value={this.props.price} min=\"50\" max=\"1000\"></input>\r\n                    <label htmlFor=\"price\" >Max price: ${this.props.price}</label>\r\n                    <Link to=\"/house\">\r\n                        <button onClick={this.onSaveFilter} className=\"save-filter-btn pointer\">Save</button>\r\n                    </Link>\r\n\r\n                </div>\r\n            </div>\r\n        </React.Fragment>\r\n    }\r\n}","import React, { Component } from \"react\";\r\n\r\nimport { connect } from 'react-redux';\r\nimport { setFilter, filterHouses } from '../actions/HouseActions'\r\n\r\nimport '../assets/styles/index.css'\r\nimport CapacityFilter from './CapacityFilter';\r\nimport DatePicker from './DatePicker'\r\nimport moment from 'moment'\r\nimport PriceFilter from \"./PriceFilter\";\r\nimport { Redirect } from \"react-router\";\r\n// import history from \"../history\";\r\n\r\nclass FilterBar extends Component {\r\n    state = {\r\n        filterBy: { ...this.props.filterBy },\r\n        startDate: null,\r\n        endDate: null\r\n    }\r\n\r\n\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.filterBy !== this.props.filterBy) {\r\n            this.setState({ filterBy: { ...this.props.filterBy } })\r\n        }\r\n    }\r\n\r\n    changeDates = (userDates) => {\r\n        let startDate = moment.utc(userDates.startDate).format()\r\n        let endDate = moment.utc(userDates.endDate).format()\r\n        let newDates = { startDate: startDate, endDate: endDate }\r\n        this.setState({ filterBy: { ...this.state.filterBy, ...newDates } }, this.saveFilter)\r\n    }\r\n\r\n    onChangeCap = (diff, key) => {\r\n        if (this.state.filterBy[key] === 1 && diff === -1) return\r\n        this.setState(prevState => prevState.filterBy[key] += diff)\r\n    }\r\n\r\n    onChangePrice = (val) => {\r\n        this.setState(prevState => prevState.filterBy.price = val)\r\n    }\r\n\r\n    saveFilter = () => {        \r\n        this.props.filterHouses(this.state.filterBy)\r\n    }\r\n    \r\n\r\n    render() {\r\n        const { filterBy } = this.state\r\n        return <React.Fragment>\r\n            <div className=\"flex\">\r\n                <CapacityFilter\r\n                    saveFilter={this.saveFilter} filterBy={filterBy} onChangeCap={this.onChangeCap}>\r\n                </CapacityFilter>\r\n                <PriceFilter price={this.state.filterBy.price} saveFilter={this.saveFilter} onChangePrice={this.onChangePrice}></PriceFilter>\r\n                {/* <DatePicker changeDates={this.changeDates}></DatePicker> */}\r\n            </div>\r\n\r\n\r\n        </React.Fragment>\r\n\r\n\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        filterBy: state.house.filterBy\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    filterHouses,\r\n    setFilter\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FilterBar)","import React, { Component } from \"react\";\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\n\r\nimport '../assets/styles/index.css'\r\n\r\nimport whiteLogo from '../assets/img/turtle3.png'\r\nimport blackLogo from '../assets/img/turtle4.png'\r\n// import { getUserById } from '../actions/UserActions'\r\nimport userProfileImg from \"../assets/img/user_prof_img.png\";\r\nimport SearchBar from \"./SearchBar\";\r\nimport FilterBar from \"./FilterBar\";\r\nclass NavBar extends Component {\r\n    state = {\r\n        user: '',\r\n        isMenuOpen: false,\r\n        isScreen: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        console.log(this.props.history)\r\n    }\r\n\r\n    openMenu = () => {\r\n        this.setState({ isMenuOpen: true })\r\n    }\r\n    toggleHamburger = () => {\r\n        var newState = { ...this.state, isScreen: !this.state.isScreen }\r\n        this.setState({ ...this.state, ...newState })\r\n    }\r\n\r\n    dispalyFilters = () => {\r\n        const callers = ['housepage', 'housedetails']\r\n        const display = callers.some(caller => caller === this.props.caller)\r\n        return display\r\n    }\r\n\r\n\r\n    render() {\r\n        const { loggedInUser } = this.props;\r\n        const not_home = (this.props.caller !== \"home\") ? 'not-home' : ' yes-home'\r\n        const consoleCaller = () => {\r\n            const { caller } = this.props;\r\n            console.log('this cmp was called by', caller);\r\n        }\r\n        const getNavClass = () => {\r\n            if (this.props.caller !== \"home\") return \"nav-links flex align-center space-between black\"\r\n            else return \"nav-links flex align-center space-between\"\r\n        }\r\n        const getMenuItemClass = () => {\r\n            if (this.props.caller !== \"home\") return \"nav-item black\"\r\n            else return \"nav-item\"\r\n        }\r\n        const getLinkItemClass = () => {\r\n            if (this.props.caller !== \"home\") return \"nav-link black\"\r\n            else return \"nav-link\"\r\n        }\r\n        const getuserNameClass = () => {\r\n            if (this.props.caller !== \"home\") return \"nav-item-user-name black\"\r\n            else return \"nav-item-user-name\"\r\n        }\r\n        const profileImageRender = () => {\r\n            if (loggedInUser) {\r\n                return (\r\n                    <div >\r\n                        <Link to=\"/\">\r\n                            <div className={(loggedInUser) ? \"nav-item-user-img-container visible\" : \"nav-item-user-img-container\"}>\r\n                                <img src={(loggedInUser) ? loggedInUser.imgURL : userProfileImg} className=\"nav-item-user-img\" />\r\n                            </div>\r\n\r\n\r\n                        </Link>\r\n\r\n                    </div>\r\n                )\r\n            } else return (<div></div>)\r\n        }\r\n        return (<div className={\"nav-container \" + not_home}>\r\n            {/* return <div className={`main-navbar flex space-between ${this.props.class}`}> */}\r\n            {/* <Link to=\"/\"> */}\r\n            <div className=\"harta-barta\">\r\n                <img className={`logo${(this.state.isScreen) ? \" show \" + not_home : \" hide \" + not_home}`} src={(this.props.caller !== \"home\") ? blackLogo : whiteLogo} onClick={this.toggleHamburger} />\r\n                <div className={getMenuItemClass() + \" small-screen-hide\"}>{(this.props.caller !== \"home\") ? <SearchBar openMenu={this.openMenu}></SearchBar> : ''}</div>\r\n                {(this.dispalyFilters()) &&\r\n                    <div className={`filter-buttons-container ${(this.state.isMenuOpen) ? 'shown-filter-container' : ''}`}>\r\n                        <FilterBar></FilterBar>\r\n                    </div>\r\n                }\r\n\r\n            </div>\r\n            {/* </Link> */}\r\n\r\n            <div className={getMenuItemClass() + \" small-screen-show\"}>{(this.props.caller !== \"home\") ? <SearchBar openMenu={this.openMenu}></SearchBar> : ''}</div>\r\n            <div className={(this.state.isScreen) ? \"nav-list-container \" : \"nav-list-container hide \" + not_home}>\r\n\r\n                <ul className={getNavClass() + ' ' + not_home}>\r\n                    <Link to=\"/\">\r\n                        <img className={(not_home === 'not-home') ? \"logo small-screen-hide\" : \"logo invisible small-screen-hide\"} src={(this.props.caller !== \"home\") ? blackLogo : whiteLogo} onClick={this.toggleHamburger} />\r\n                    </Link>\r\n                    <li key=\"1\" id=\"two\" onClick={this.toggleHamburger} className={getMenuItemClass()}><Link to=\"/About\" className={getLinkItemClass()}>About</Link></li>\r\n                    <li key=\"2\" id=\"three\" onClick={this.toggleHamburger} className={getMenuItemClass() + \" small-screen-show\"}><Link to=\"/\" className={getLinkItemClass()}>Home</Link></li>\r\n                    {this.props.loggedInUser && <li id=\"four\" key=\"3\" onClick={this.toggleHamburger} className={getMenuItemClass()}><Link to=\"/house/edit\" className={getLinkItemClass()} >Host</Link></li>}\r\n                    {this.props.loggedInUser && <li id=\"five\" key=\"4\" onClick={this.toggleHamburger} className={getMenuItemClass()}><Link to=\"/reserved\" className={getLinkItemClass()} onClick={consoleCaller}>Reserved</Link></li>}\r\n                    {this.props.loggedInUser && <li id=\"six\" key=\"5\" onClick={this.toggleHamburger} className={getMenuItemClass()}><Link to=\"/favorites\" className={getLinkItemClass()}>Favorites</Link></li>}\r\n                    {this.props.loggedInUser && <li id=\"seven\" key=\"6\" onClick={this.toggleHamburger} className={getMenuItemClass()}><Link to=\"/requests\" className={getLinkItemClass()}>Requests</Link></li>}\r\n                    {this.props.loggedInUser && <li id=\"eight\" key=\"7\" onClick={this.toggleHamburger} className={getMenuItemClass() + \" small-screen-show\"}><Link to=\"/login\" className={getLinkItemClass(this.props.loggedInUser.username)}>{`(${this.props.loggedInUser.username})`}</Link><Link to=\"/login\">Logout</Link></li>}\r\n                    {!this.props.loggedInUser && <li id=\"eight\" key=\"7\" onClick={this.toggleHamburger} className={getMenuItemClass()}><Link to=\"/login\" className={getLinkItemClass()}>Login/Signup</Link></li>}\r\n\r\n                    {/* { <li className={getMenuItemClass()}><Link to={\"/profile/\"+this.props.loggedInUser._id} className={getLinkItemClass()}>\r\n                    {profileImageRender()}\r\n                </Link>\r\n                </li>} */}\r\n                    <li className={getMenuItemClass()}>\r\n                        {profileImageRender()}</li>\r\n                </ul>\r\n                {(this.dispalyFilters()) &&\r\n                    <div className={`filter-buttons-container ${(this.state.isMenuOpen) ? 'shown-filter-container' : ''}`}>\r\n                        <FilterBar></FilterBar>\r\n                    </div>}\r\n            </div>\r\n        </div>)\r\n    }\r\n\r\n\r\n}\r\n//<li className={getMenuItemClass()}><SearchBar></SearchBar></li>\r\n// export default NavBar\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        // filterBy: state.house.filterBy,\r\n        loggedInUser: state.user.loggedInUser,\r\n        isLoading: state.system.isLoading\r\n    };\r\n};\r\n// const mapDispatchToProps = {\r\n//     // setFilter\r\n//     getUserById\r\n// };\r\n\r\nexport default connect(mapStateToProps, null)(NavBar)","import turtLoading from '../assets/img/loading.gif'\r\nimport React, { Component } from 'react';\r\nexport default class Loading extends Component {\r\n    render() {\r\n        return (\r\n            <div className=\"loading-element-container\"><img style={{ 'width': '100vw', 'maxWidth': '512px' }} src={turtLoading} alt=\"image didn't load\" />\r\n                <span className=\"loading-element-container-text\">Loading...</span>\r\n            </div>)\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { setFilter, filterHouses, getBestByCountry } from '../actions/HouseActions'\r\n\r\nimport SearchForm from '../cmps/SearchForm';\r\nimport backgroundImage from '../assets/img/bgc.jpg'\r\nimport HouseList from '../cmps/HouseList';\r\nimport NavBar from '../cmps/NavBar';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport Loading from '../cmps/Loading'\r\n\r\nclass Home extends Component {\r\n  state = {};\r\n\r\n  componentDidMount() {       \r\n    this.load()\r\n  }\r\n\r\n  load = async () => {\r\n    this.props.getBestByCountry({ countries: ['israel'] })\r\n    this.props.getBestByCountry({ countries: ['spain'] })\r\n    this.props.getBestByCountry({ countries: ['italy'] })\r\n  }\r\n\r\n\r\n  getBestByCountry = (country) => {\r\n    return this.props.houses.filter(house => house.address.country === country)\r\n\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"home\">        \r\n        {this.props.isLoading && <Loading />}\r\n        <img className=\"index-cover\" src={backgroundImage} />\r\n        <SearchForm></SearchForm>        \r\n        <section className=\"lists-section-container\">\r\n          <div>\r\n            <h4 className=\"reccomended-headline\">Most reccomended in Israel</h4>\r\n            <HouseList home=\"home\" houses={this.props.israel}></HouseList>\r\n          </div>\r\n          <div>\r\n            <h4 className=\"reccomended-headline\">Most reccomended in Italy</h4>\r\n            <HouseList home=\"home\" houses={this.props.italy}></HouseList>\r\n          </div>\r\n          <div>\r\n            <h4 className=\"reccomended-headline\">Most reccomended in Spain</h4>\r\n            <HouseList home=\"home\" houses={this.props.spain}></HouseList>\r\n          </div>\r\n        </section>        \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    houses: state.house.houses,\r\n    israel: state.house.israel,\r\n    italy: state.house.italy,\r\n    spain: state.house.spain,\r\n    filterBy: state.house.filterBy,\r\n    loggedInUser: state.user.loggedInUser,\r\n    isLoading: state.system.isLoading\r\n  };\r\n};\r\nconst mapDispatchToProps = {\r\n  setFilter,\r\n  getBestByCountry,  \r\n  filterHouses\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home)\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport NavBar from '../cmps/NavBar';\r\nimport cabin from '../assets/img/crap1.jpg'\r\nimport '../assets/styles/aboutPage.css'\r\nclass About extends Component {\r\n    state = {\r\n        user: ''\r\n    }\r\n\r\n    render() {\r\n        return (<div className=\"about-page-container\">\r\n            <img src={cabin} alt=\"\" className=\"about-img\" />\r\n            <div className=\"about-info-container\">\r\n                <p>\r\n                    Welcome to the most amazing site in the world!\r\n                    Here you will be able to book a place for your next vacation.\r\n                    So what are you waiting for? \r\n                    you'r next vacation is only a few clicks away!\r\n                </p>\r\n            </div>\r\n        </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.user.loggedInUser\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, null)(About)","\r\nexport function uploadImg(file) {\r\n    const CLOUD_NAME = 'dnb7d7utg'\r\n    const PRESET_NAME = 'hvwwwh5p'\r\n    const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload/`\r\n    \r\n    const formData = new FormData();\r\n    formData.append('file', file)\r\n    formData.append('upload_preset', PRESET_NAME);\r\n\r\n    return fetch(UPLOAD_URL, {\r\n        method: 'POST',\r\n        body: formData\r\n    })\r\n        .then(res => res.json())\r\n        .then(res => {\r\n            console.log(res)\r\n            return res\r\n        })\r\n        .catch(err => {            \r\n            console.log('catch',err)\r\n            return err\r\n        })\r\n}\r\n     \r\n\r\n","import React, { Component } from \"react\";\r\nimport { Link } from 'react-router-dom';\r\nimport 'react-dates/lib/css/_datepicker.css';\r\nimport 'react-dates/initialize';\r\nimport { connect } from 'react-redux';\r\nimport { saveHouse } from '../actions/HouseActions'\r\nimport { getUserById } from '../actions/UserActions'\r\nimport '../assets/styles/index.css'\r\nimport '../assets/styles/edithouse.css'\r\nimport HouseService from '../services/HouseService'\r\nimport { uploadImg } from '../services/uploadImgService'\r\nimport NavBar from \"../cmps/NavBar\";\r\nimport Loading from '../cmps/Loading'\r\nimport Axios from \"axios\";\r\n\r\nclass HouseEdit extends Component {\r\n\r\n    state = {\r\n        newHouse: {\r\n            address: {\r\n                country: '',\r\n                coords: null\r\n            },\r\n            imgs: [],\r\n            title: '',\r\n            description: '',\r\n            capacity: 1,\r\n            price: '',\r\n            addressInput: '',\r\n            reviews: [],\r\n            rating: this.getRandomArbitrary(3, 5)\r\n\r\n        },\r\n        isModalShown: false,\r\n        uploadStatus: null,\r\n\r\n    }\r\n\r\n    componentDidMount() {        \r\n        if (!this.props.loggedInUser) {            \r\n            this.props.history.push('/login')\r\n        }\r\n        const { id } = this.props.match.params\r\n        if (!id) return\r\n        this.getHouse(id)\r\n\r\n    }\r\n\r\n    getRandomArbitrary(min, max) {\r\n        return (Math.random() * (max - min) + min).toFixed(2)\r\n    }\r\n\r\n    getHouse = async (id) => {\r\n        const newHouse = await HouseService.get(id)        \r\n        const addressInput = await this.getAddress(newHouse.address.coords)\r\n        newHouse.addressInput = addressInput\r\n        this.setState({ newHouse })\r\n    }\r\n\r\n\r\n    upload = async (ev) => {\r\n        const fileMap = ev.target.files\r\n        var files = []\r\n        for (const key in fileMap) {\r\n            files.push(fileMap[key])\r\n        }\r\n        files.splice(-2)\r\n        try {\r\n            this.setState({ uploadStatus: 'uploading' })\r\n            let filePrms = files.map(file => uploadImg(file))\r\n            let resFiles = await Promise.all(filePrms)\r\n            const newHouse = { ...this.state.newHouse }\r\n            resFiles.forEach(file => { if (file.url) newHouse.imgs.push(file.url) })\r\n            this.setState({ newHouse, uploadStatus: 'success' })\r\n\r\n        } catch (err) {\r\n            throw err\r\n        }\r\n\r\n\r\n    }\r\n\r\n    onInputChange = (ev) => {\r\n        const newHouse = { ...this.state.newHouse }\r\n        const key = ev.target.name\r\n        let value = ev.target.value\r\n        if (ev.target.name === 'capacity' || ev.target.name === 'price') value = parseInt(value, 0)\r\n        newHouse[key] = value\r\n        this.setState({ newHouse })\r\n    }\r\n\r\n    onAddressChange = (ev) => {\r\n        const key = ev.target.name\r\n        const value = ev.target.value\r\n        const address = { ...this.state.newHouse.address }\r\n        const newHouse = { ...this.state.newHouse }\r\n        address[key] = value\r\n        newHouse.address = address\r\n        this.setState({ newHouse })\r\n    }\r\n\r\n    createOwner = (user) => {\r\n        return {\r\n            _id: user._id,\r\n            username: user.username,\r\n            imgURL: user.imgURL\r\n        }\r\n    }\r\n\r\n    onSaveHouse = async (ev) => {\r\n        ev.preventDefault();\r\n        const user = { ...this.props.loggedInUser }\r\n        if (!user) {\r\n            console.log('please login')\r\n        }        \r\n        else {\r\n            const owner = this.createOwner(user)\r\n            try {\r\n                await this.checkAddress()\r\n                const address = { ...this.state.newHouse.address }\r\n                const country = address.country.toLowerCase()\r\n                address.country = country\r\n                const newHouse = { ...this.state.newHouse, owner, address }\r\n                delete newHouse.addressInput\r\n                await this.props.saveHouse(newHouse)\r\n                await this.props.getUserById(user._id)\r\n                this.setState({ isModalShown: true })\r\n            }\r\n            catch(err){\r\n                console.log('add house failed', err)\r\n            }\r\n        }\r\n    }\r\n\r\n    onBackClick = () => {\r\n        this.state.isModalShown && this.props.history.push('/')\r\n    }\r\n\r\n    displayUpload = () => {\r\n        const { uploadStatus } = this.state\r\n        if (uploadStatus === 'uploading') return 'Uploading...'\r\n        else if (uploadStatus === 'success') return 'Success!'\r\n    }\r\n\r\n    deleteImg = (idx) => {\r\n        const imgs = this.state.newHouse.imgs.filter((img, i) => {\r\n            if (idx !== i) return img\r\n        })\r\n        const newHouse = { ...this.state.newHouse }\r\n        newHouse.imgs = imgs\r\n        this.setState({ newHouse })\r\n    }\r\n\r\n    dispalyImg = () => {\r\n        if (this.state.newHouse.imgs.length === 0) return\r\n        const { imgs } = this.state.newHouse\r\n        const imgElms = imgs.map((img, idx) => {\r\n            return (<div key={idx} className=\"edit-img-container\">\r\n                <img key={idx} className=\"edit-img\" src={img}></img>\r\n                <div className=\"edit-img-delete flex justify-center\">\r\n                    <span onClick={() => this.deleteImg(idx)} className=\"edit-img-x\">X</span>\r\n                </div>\r\n            </div>\r\n            )\r\n        })\r\n        return imgElms\r\n    }\r\n\r\n    checkAddress = async (ev) => {\r\n\r\n        let addressInput = this.state.newHouse.addressInput\r\n        addressInput = this.state.newHouse.address.country + ' ' + addressInput\r\n        try {\r\n            const res = await Axios.get(`https://api.opencagedata.com/geocode/v1/json?q=${addressInput}&key=029b29b812cb4bfea627a8b82b6b92c4`)\r\n            const coords = res.data.results[0].geometry\r\n            const address = { ...this.state.newHouse.address, coords }\r\n            const newHouse = { ...this.state.newHouse, address }\r\n            this.setState({ newHouse })\r\n        }\r\n        catch (err) {\r\n            console.log(err)\r\n        }\r\n\r\n    }\r\n\r\n    createOptions = () => {\r\n        const options = []\r\n        for (let i = 1; i < 9; i++) {\r\n            const str = (i === 1) ? `${i} Person` : `${i} Persons`\r\n            options.push(<option key={i} value={i}>{str}</option>)\r\n        }\r\n        return options\r\n    }\r\n\r\n    getAddress = async (coords) => {\r\n        if (!coords) return\r\n        const res = await Axios.get(`https://api.opencagedata.com/geocode/v1/json?q=${coords.lat}+${coords.lng}&key=029b29b812cb4bfea627a8b82b6b92c4`)\r\n        const addressInput = res.data.results[0].formatted\r\n        return addressInput\r\n    }\r\n\r\n    render() {\r\n        const { newHouse, isModalShown, uploadStatus } = this.state\r\n        const { id } = this.props.match.params\r\n        if (this.props.isLoading) return (\r\n            <div>\r\n\r\n                <Loading />\r\n            </div>\r\n        )\r\n        else {\r\n            return <React.Fragment>\r\n                <div className=\"house-edit-container\">\r\n                    <span className=\"house-edit-header\">Add and Edit Houses</span>\r\n                <form className=\"edit-form flex column\" onSubmit={this.onSaveHouse}>\r\n                    <input required name=\"country\" onChange={this.onAddressChange} value={newHouse.address.country} type=\"text\" placeholder=\"Country\"></input>\r\n                    <input required ref=\"address\" onChange={this.onInputChange} name=\"addressInput\" type=\"text\" placeholder=\"Address\" value={this.state.newHouse.addressInput}></input>\r\n                    {/* <button onClick={this.checkAddress}>check address</button> */}\r\n                    <input required name=\"title\" onChange={this.onInputChange} value={newHouse.title} type=\"text\" placeholder=\"House Title\"></input>\r\n                    <textarea required name=\"description\" onChange={this.onInputChange} value={newHouse.description} type=\"text\" placeholder=\"Description\"></textarea>\r\n                    <input required name=\"price\" onChange={this.onInputChange} value={newHouse.price} type=\"text\" placeholder=\"Price per night\"></input>\r\n                    <label>How many people can stay in your property?</label>\r\n                    <select value={this.state.newHouse.capacity} className=\"cap-select\" type=\"number\" name=\"capacity\" onChange={this.onInputChange}>\r\n                        {this.createOptions()}\r\n                    </select>\r\n\r\n                    {/* onChange={this.onInputChange} */}\r\n                    <div className=\"img-upload flex space-between\">\r\n                        <label htmlFor=\"file-upload\" className=\"upload form-btn pointer flex align-center\">\r\n                            Upload Images\r\n                        </label>\r\n                        <span className={(uploadStatus === 'success') ? \"success\" : ''}>\r\n                            {this.displayUpload()}\r\n                        </span>\r\n                    </div>\r\n                    <input id=\"file-upload\" required={(id) ? false : true} onChange={this.upload} type=\"file\" multiple></input>\r\n                    {<div className=\"flex wrap\">{this.dispalyImg()}</div>}\r\n                    <button className=\"form-btn pointer\">Submit</button>\r\n\r\n                </form>\r\n                <div className={(isModalShown) ? 'modal-shown flex column space-betwwen' : 'modal-hidden'}>\r\n                    <span>Congardulations!</span>\r\n                    <span>Your property is on TurtleHouse</span>\r\n                    <button onClick={this.onBackClick} className=\"form-btn pointer\">Back To HomePage</button>\r\n                </div>\r\n                <div className={isModalShown ? 'block-screen' : 'block-screen-hidden'}></div>\r\n                </div>\r\n            </React.Fragment >\r\n        }\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.user.loggedInUser,\r\n        isLoading: state.system.isLoading\r\n    };\r\n};\r\n\r\n\r\nconst mapDispatchToProps = {\r\n    saveHouse,\r\n    getUserById\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HouseEdit)","import React, { Component } from 'react';\r\n// import HouseService from '../services/HouseService'\r\n// import { Link } from 'react-router-dom'\r\n\r\nimport { connect } from 'react-redux';\r\nimport { setFilter, filterHouses, deleteHouse } from '../actions/HouseActions'\r\nimport HouseList from '../cmps/HouseList'\r\nimport NavBar from '../cmps/NavBar';\r\nimport Loading from '../cmps/Loading'\r\nclass HousePage extends Component {\r\n\r\n\r\n    componentDidMount() {\r\n\r\n        this.props.filterHouses(this.props.filterBy)\r\n\r\n    }\r\n\r\n\r\n    onDeleteHouse = (houseId) => {\r\n        this.props.deleteHouse(houseId)\r\n    }\r\n\r\n\r\n    render() {\r\n        const [house] = this.props.houses\r\n        // console.log('houses page: ', this.props.houses)\r\n        console.log('houses page: ', house)\r\n        console.log('houses page load stat: ', this.props.isLoading)\r\n        if (this.props.isLoading || this.props.houses === []) return (\r\n            <div>\r\n                <Loading />\r\n            </div>\r\n        )\r\n        else {\r\n            return (\r\n                <div className=\"house-page-container\">\r\n                    <span className=\"house-page-header\">Houses</span>\r\n                    {(house) && <HouseList onDeleteHouse={this.onDeleteHouse} houses={this.props.houses}\r\n                        filterBy={this.props.filterBy} style={{ \"marginTop\": \"150px\" }}></HouseList>}\r\n                    {(!this.props.isLoading && house === null) && <div className=\"empty-houses-container\">\r\n                        <p>Nothing to show</p>\r\n                    </div>}\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        houses: state.house.houses,\r\n        filterBy: state.house.filterBy,\r\n        isLoading: state.system.isLoading\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    // loadHouses,\r\n    filterHouses,\r\n    setFilter,\r\n    deleteHouse\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HousePage)","export default class Order {\r\n    constructor(houseId, userId,numOfPeople) {\r\n        this.houseId = houseId\r\n        this.byUser = {\"_id\":userId}\r\n        this.numOfPeople=numOfPeople;\r\n        this.createdAt = (new Date).getTime()\r\n        // this.startDate=dates.startDate\r\n        // this.endDate=dates.endDate\r\n    }\r\n}\r\n\r\n/*\r\n    {\r\n        \"_id\":\"tyui5678\",\r\n        \"houseId\":\"jgvgh23d3\"\r\n        \"createdAt\": 1579089879043,\r\n        \"byUser\":{\r\n            \"_id\": \"1234\"\r\n\r\n        }\r\n*/\r\n\r\n\r\n","\r\nfunction store(key, any) {\r\n    localStorage[key] = JSON.stringify(any);\r\n}\r\n\r\nfunction load(key) {\r\n    var str = localStorage[key] || 'null';\r\n    return JSON.parse(str);\r\n}\r\n\r\nexport default {\r\n    store,\r\n    load\r\n}","// import React, { Component } from \"react\";\r\n// export default class HousePreview extends Component {\r\n//     state = {\r\n\r\n//     }\r\n\r\n\r\n// }\r\nimport React, { Component } from \"react\";\r\nimport { Link } from 'react-router-dom';\r\nimport DatePicker from '../cmps/DatePicker';\r\nimport 'react-dates/lib/css/_datepicker.css';\r\nimport 'react-dates/initialize';\r\nimport { connect } from 'react-redux';\r\nimport { setFilter } from '../actions/HouseActions'\r\n// import { saveOrder } from '../actions/OrderActions'\r\nimport { getUserById } from '../actions/UserActions'\r\n// import '../assets/styles/index.css'\r\nimport '../assets/styles/reservehouse.css'\r\nimport Order from \"../services/Order.js\";\r\nimport localStorageService from \"../services/localStorageService\";\r\nimport UserService from \"../services/UserService\";\r\nimport OrderService from \"../services/OrderService\";\r\nimport { saveOrder } from \"../actions/OrderActions\";\r\nimport moment from 'moment'\r\nclass ReserveHouse extends Component {\r\n    state = {\r\n        filterBy: {\r\n            numOfperson: 1,\r\n            location: ''\r\n        },\r\n\r\n        startDate: null,\r\n        endDate: null\r\n\r\n\r\n    }\r\n\r\n    onChangeCap = async (diff) => {\r\n        if (this.state.filterBy.numOfperson === 1 && diff === -1) return\r\n        if (this.state.filterBy.numOfperson + diff > this.props.house.capacity) return\r\n        this.setState(prevState => prevState.filterBy.numOfperson += diff)\r\n    }\r\n\r\n    onChange = (ev) => {\r\n        const key = ev.target.name\r\n        const value = ev.target.value\r\n        const filterBy = { ...this.state.filterBy }\r\n        filterBy[key] = value\r\n        this.setState({ filterBy })\r\n    }\r\n\r\n    onSearch = () => {\r\n        this.props.setFilter(this.state.filterBy)\r\n    }\r\n    onReserve = async (ev) => {\r\n        ev.preventDefault();\r\n        if (!this.state.startDate && !this.state.endDate) {\r\n            alert('choose dates!')\r\n            return;\r\n        }\r\n        const user = this.props.loggedInUser;\r\n        if (!user) {\r\n            alert('login first!')\r\n            return;\r\n        }\r\n        \r\n        let dates = { startDate: this.state.startDate._d, endDate: this.state.endDate._d }\r\n        let houseOrder = new Order(this.props.house._id, user._id, this.state.filterBy.numOfperson);        \r\n        houseOrder.startDate = dates.startDate\r\n        houseOrder.endDate = dates.endDate\r\n        try {\r\n            await this.props.saveOrder(houseOrder)            \r\n            let orders = this.props.orders\r\n            let storedOrderId = orders[orders.length - 1]._id\r\n            user.reserved.push(storedOrderId)\r\n            await UserService.update(user)\r\n            alert('check your reserved items!')\r\n        }\r\n        catch (err) {\r\n            console.log('ReserveHouse: add house failed', err)\r\n            throw err;\r\n        }\r\n        finally {\r\n            console.log('check your reserved items ')\r\n        }\r\n\r\n    }\r\n\r\n    addReserveClass = () => {\r\n        if (!this.props.detailsPage) {\r\n            return \"reserve-form flex column space-between\"\r\n        }\r\n        else {\r\n            return \"reserve-form flex column space-between\"\r\n        }\r\n    }\r\n    changeDates = (userDates) => {        \r\n        this.setState({ ...this.state, ...userDates })\r\n    }\r\n    getTotalPrice = () => {\r\n        if (!this.state.startDate || !this.state.endDate) return (<span></span>)        \r\n        else return (< span className=\"reserve-price-tag-total\">{'Total: $' + this.props.house.price * (this.state.endDate-this.state.startDate)/1000/60/60/24}</span>)\r\n    }\r\n    render() {\r\n        // const [startDate, setStartDate] = useState(null);\r\n        const { house } = this.props;\r\n        return (\r\n            <div className=\"reserve-form flex column space-between\">\r\n                <h3 className=\"reserve-form-header\">Reserve Now!</h3>\r\n                {/* <input onChange={this.onChange} className=\"form-loc\" value={this.state.filterBy.loc} type=\"text\" name=\"location\" placeholder={house.address.country + \" | \" + house.title}></input> */}\r\n                <h4 className=\"reserve-form-house-name\">{house.address.country + \" | \" + house.title}</h4>\r\n                <DatePicker changeDates={this.changeDates}></DatePicker>\r\n                <div className=\"form-cap flex space-between align-center\">\r\n                    <span>Number of Guests</span>\r\n                    <span className=\"form-cap-control flex space-between\">\r\n                        <button onClick={() => this.onChangeCap(-1)} className=\"form-num-btn pointer minus\" name=\"numOfperson\">-</button>\r\n                        <span className=\"form-cap-num\">{this.state.filterBy.numOfperson}</span>\r\n                        <button onClick={() => this.onChangeCap(1)} className=\"form-num-btn pointer\" name=\"numOfperson\">+</button>\r\n                    </span>\r\n                </div>\r\n                <span className=\"reserve-price-tag\">${house.price}/night</span>\r\n                {this.getTotalPrice()}\r\n                <Link to=\"/house\">\r\n                    <button onClick={this.onReserve} className=\"form-btn pointer flex align-center justify-center reserve-btn\">Reserve</button>\r\n                </Link>\r\n            </div>)\r\n\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        filterBy: state.house.filterBy,\r\n        loggedInUser: state.user.loggedInUser,\r\n        orders: state.order.orders\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    // setFilter\r\n    saveOrder,\r\n    getUserById,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ReserveHouse)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n{/* <DateRangePicker\r\n    startDate={this.state.startDate} // momentPropTypes.momentObj or null,\r\n    startDateId=\"your_unique_start_date_id\" // PropTypes.string.isRequired,\r\n    endDate={this.state.endDate} // momentPropTypes.momentObj or null,\r\n    endDateId=\"your_unique_end_date_id\" // PropTypes.string.isRequired,\r\n    onDatesChange={({ startDate, endDate }) => this.setState({ startDate, endDate })} // PropTypes.func.isRequired,\r\n    focusedInput={this.state.focusedInput} // PropTypes.oneOf([START_DATE, END_DATE]) or null,\r\n    onFocusChange={focusedInput => this.setState({ focusedInput })} // PropTypes.func.isRequired,\r\n/>\r\n */}","import React, { Component } from 'react';\r\n\r\nimport '../../assets/styles/reviewpreview.css'\r\n\r\nexport default class ReviewPreview extends Component {\r\n\r\n    render() {\r\n        const { review } = this.props\r\n        return (\r\n            <div  className=\"bottom-line\" key={ review.byUser._id }>\r\n                <div className=\"user-img-container\"><img src={review.byUser.imgURL} /></div>\r\n                <div>{ review.byUser.username }</div>\r\n                <div>{ review.txt }</div>\r\n            </div>);\r\n    }\r\n}","import React from 'react'\r\nimport ReviewPreview from './ReviewPreview';\r\n\r\nexport default function ReviewList(props) {\r\n\r\n    return (\r\n        <div>\r\n            {props.reviews.map((review, idx) => {\r\n                if (review.byUser)\r\n                    return <ReviewPreview key={idx} review={review} />})}\r\n        </div>\r\n    )\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n// import { addHouseReview } from '../../actions/HouseActions';\r\n\r\nclass ReviewCompose extends Component {\r\n\r\n    state = {\r\n        reviewToEdit: {\r\n            \"byUser\": null,\r\n            \"txt\": '',\r\n            \"rate\": 4,\r\n            \"createdAt\": Date.now(),\r\n        }\r\n    };\r\n\r\n    componentDidMount() {\r\n        if (this.props.loggedInUser) this.loadUser();  \r\n    }\r\n\r\n    handleChange = ev => {\r\n        const { name, value } = ev.target;\r\n        this.setState(prevState => ({\r\n            reviewToEdit: {\r\n                ...prevState.reviewToEdit,\r\n                [name]: value\r\n            }\r\n        }));\r\n    };\r\n\r\n    loadUser = () => {\r\n        const { _id , username, imgURL } = this.props.loggedInUser;\r\n        const byUser = { _id , username, imgURL }\r\n        this.setState({ reviewToEdit: {...this.state.reviewToEdit, byUser } });\r\n    }\r\n\r\n    addReview = (ev) => {\r\n        ev.preventDefault();\r\n        const review = {...this.state.reviewToEdit}\r\n        this.props.onUpdateReviews(review)\r\n        this.setState(prevState => ({\r\n            reviewToEdit: {\r\n                ...prevState.reviewToEdit,\r\n                \"txt\": ''\r\n            }\r\n        }));\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <section>\r\n                <form onSubmit={this.addReview}>\r\n                    <textarea\r\n                        className=\"review-textarea form-loc\"\r\n                        name=\"txt\"\r\n                        onChange={this.handleChange}\r\n                        value={this.state.reviewToEdit.txt}\r\n                    ></textarea>\r\n                    <button className=\"add-btn pointer\">Add</button>\r\n                </form>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        // houses: state.house.houses,\r\n        //   users: state.user.users,\r\n        loggedInUser: state.user.loggedInUser\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    // loadReviews,\r\n    // loadUsers,\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ReviewCompose);","import React, { Component } from 'react';\r\n//style={{ 'width': '30px', 'height': '30px', 'background-color': 'green', 'border-radius': '50%' }}\r\nimport TurtleMarker from '../assets/img/pagin_turtle.png'\r\nexport default class MapMarker extends Component {\r\n    render() {        \r\n        return (\r\n            <div className=\"map-marker-container\">\r\n                {(this.props.caller === \"housedetails\") ? '' : <span className=\"map-marker-price\">{'$' + this.props.house.price}</span>}\r\n                <div className=\"map-marker-sub-container\">\r\n                    {/* <span>{props.lat}</span>\r\n              <span>{props.lng}</span>\r\n              <span>{props.text}</span> */}\r\n                    <div className=\"map-marker-img-container\">\r\n                        <img src={TurtleMarker} alt=\"\" className=\"map-marker\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\n// import {GoogleMapReact, InfoWindow, Marker} from 'google-map-react';\r\nimport GoogleMapReact from 'google-map-react';\r\nimport { connect } from 'react-redux';\r\n// import HouseDetails from '../pages/HouseDetails';\r\nimport Geocode from \"react-geocode\";\r\nimport MapMarker from './MapMarker'\r\n//MY API KEY HERE:\r\n// const API_KEY=process.env.GMAP_API_KEY\r\n// const AnyReactComponent = ({ text }) => <div>{text}</div>;\r\n\r\nclass MapPreview extends Component {\r\n\r\n    // { lat: 59.3304287, lng: 18.0666493 }\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            center: {\r\n                lat: this.props.house.address.coords.lat,\r\n                lng: this.props.house.address.coords.lng\r\n            },\r\n            zoom: 11\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        Geocode.setApiKey(process.env.REACT_APP_GMAP_API_KEY);\r\n\r\n        // set response language. Defaults to english.\r\n        Geocode.setLanguage(\"en\");\r\n    }\r\n    handleChangeMap = ({ center, zoom }) => {\r\n        this.setState({\r\n            center: center,\r\n            zoom: zoom\r\n        });\r\n    }\r\n    // blah = async () => {\r\n    //     Geocode.fromAddress(\"Eiffel Tower\").then(\r\n    //         response => {\r\n    //             const { lat, lng } = response.results[0].geometry.location;\r\n    //             console.log('Eiffel tower', lat, lng);\r\n    //         },\r\n    //         error => {\r\n    //             console.error(error);\r\n    //         }\r\n    //     );\r\n    // }\r\n    render() {\r\n        // {console.log('Map Preview state is: ',this.state)}\r\n        // { this.blah() }\r\n        return (\r\n            // Important! Always set the container height explicitly\r\n            <div style={{ height: '80vh', width: '100%','padding': '10px' }}>\r\n                <GoogleMapReact\r\n                    bootstrapURLKeys={{ key: process.env.REACT_APP_GMAP_API_KEY, v: '3.31' }}\r\n                    center={this.state.center}\r\n                    zoom={this.state.zoom}\r\n                    onChange={this.handleChangeMap}\r\n                >\r\n                    <MapMarker style={{ position: 'absolute', transform: 'translate(-50%, -100%)' }} caller={this.props.caller} house={this.props.house} lat={this.props.house.address.coords.lat} lng={this.props.house.address.coords.lng} text=\"Marker!\" />\r\n                </GoogleMapReact>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        // filterBy: state.house.filterBy,\r\n        loggedInUser: state.user.loggedInUser,\r\n        isLoading: state.system.isLoading\r\n    };\r\n};\r\n// const mapDispatchToProps = {\r\n//     // setFilter\r\n//     getUserById\r\n// };\r\n\r\nexport default connect(mapStateToProps, null)(MapPreview)","import React, { Component } from 'react';\r\nimport { updateUser } from '../actions/UserActions'\r\nimport { deleteHouse, filterHouses, saveHouse } from '../actions/HouseActions'\r\nimport { connect } from 'react-redux';\r\n// import { connect } from 'react-redux';\r\n\r\nimport HouseService from '../services/HouseService'\r\n\r\nimport NavBar from '../cmps/NavBar'\r\nimport DatePicker from '../cmps/DatePicker'\r\nimport ReserveHouse from '../cmps/ReserveHouse.js'\r\nimport { Link } from 'react-router-dom';\r\nimport ReviewList from '../cmps/reviews/ReviewList';\r\n\r\nimport '../assets/styles/housedetails.css';\r\nimport '../assets/styles/index.css';\r\nimport '../assets/styles/reviewpreview.css';\r\nimport ReviewCompose from '../cmps/reviews/ReviewCompose';\r\nimport MapPreview from '../cmps/MapPreview.js'\r\nimport Loading from '../cmps/Loading'\r\nclass HouseDetails extends Component {\r\n    state = {\r\n        house: null\r\n    }\r\n\r\n    componentDidMount() {\r\n        const houseId = this.props.match.params.id;        \r\n        this.loadHouse(houseId)\r\n    }\r\n\r\n    loadHouse = async (houseId) => {\r\n        const house = await HouseService.get(houseId)\r\n        this.setState({ house })\r\n    }\r\n\r\n    checkIfOwner = () => {\r\n        const { loggedInUser } = this.props\r\n        const isOwner = (loggedInUser && loggedInUser._id === this.state.house.owner._id) ? true : false        \r\n        return isOwner\r\n    }\r\n\r\n    handleDelete = async () => {\r\n        const { _id } = this.state.house\r\n        let { loggedInUser } = this.props\r\n        const houses = loggedInUser.houses.filter(id => id !== _id)\r\n        loggedInUser = { ...loggedInUser, houses }\r\n        await this.props.deleteHouse(_id)\r\n        await this.props.updateUser(loggedInUser)\r\n        this.props.history.push('/')\r\n    }\r\n\r\n    updateReviews = async (review) => {\r\n        const { house } = this.state\r\n        const reviews = house.reviews\r\n        let reviewsToUpdate = reviews.slice()\r\n        reviewsToUpdate.splice(reviews.length, 0, review)\r\n        const newHouse = { ...house, reviews: reviewsToUpdate }\r\n        try {\r\n            await this.props.saveHouse(newHouse)\r\n        } catch (error) {\r\n            console.log('add review to house faild');\r\n            throw error;\r\n        }\r\n        this.setState({ house: newHouse })\r\n    }\r\n\r\n    render() {\r\n        const { house } = this.state\r\n        return (\r\n            <React.Fragment>                \r\n                {(this.props.isLoading || !house) && <Loading />}\r\n                {(house) && <section className=\"housedetails-container\">\r\n                    <div className=\"images-container\">\r\n                        <div className=\"gallery\">\r\n                            {house.imgs.map((img, idx) => <img key={idx} className={`img img-${idx}`} src={img} alt=\"\" />)}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"main-content-container flex\">\r\n                        <div className=\"main-content-text-container\">\r\n                            <span className=\"house-title span-line-break\">{house.title}</span>\r\n                            <span className=\"house-header span-line-break\">{house.address.country}</span>\r\n                            <span className=\"house-header span-line-break\">Description</span>\r\n                            <div className=\"house-content span-line-break bottom-line\">{house.description}</div>\r\n                            <ReviewList reviews={house.reviews} />\r\n                            <ReviewCompose onUpdateReviews={this.updateReviews} />\r\n                            {this.checkIfOwner() && <div className=\"details-button-container flex space-between\">\r\n                                <Link to={`/house/edit/${house._id}`} >\r\n                                    <button className=\"form-btn pointer\">Edit House</button>\r\n                                </Link>\r\n                                <button onClick={this.handleDelete} className=\"form-btn pointer\">Delete House</button>\r\n                            </div>\r\n                            }\r\n\r\n                            {/* <div className=\"details-button-container flex space-between\">\r\n                                <Link to={`/house/edit/${house._id}`} >\r\n                                    <button className=\"form-btn pointer\">Edit House</button>\r\n                                </Link>\r\n                                <button onClick={this.handleDelete} className=\"form-btn pointer\">Delete House</button>\r\n                            </div> */}\r\n                        </div>\r\n                        <ReserveHouse house={house} detailsPage={true} />\r\n\r\n                    </div>\r\n                    {/* <ChatBox house={this.house}></ChatBox> */}\r\n                    <MapPreview caller=\"housedetails\" house={house} />\r\n                </section>}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        houses: state.house.houses,\r\n        loggedInUser: state.user.loggedInUser,\r\n        isLoading: state.system.isLoading\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    deleteHouse,\r\n    filterHouses,\r\n    updateUser,\r\n    saveHouse\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HouseDetails)\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n// import NavBar from '../cmps/NavBar';\r\nimport { Link } from 'react-router-dom';\r\nimport { withRouter } from 'react-router-dom';\r\nimport {updateRoute} from '../actions/SystemActions'\r\nimport '../assets/styles/index.css'\r\n\r\nimport {\r\n  loadUsers,\r\n  removeUser,\r\n  login,\r\n  logout,\r\n  signup\r\n} from '../actions/UserActions';\r\n\r\nclass Login extends Component {\r\n  state = {\r\n    msg: '',\r\n    loginCred: {\r\n      email: '',\r\n      password: ''\r\n    },\r\n    signupCred: {\r\n      email: '',\r\n      password: '',\r\n      username: '',\r\n      imgURL: ''\r\n    }\r\n  };\r\n  \r\n  loginHandleChange = ev => {\r\n    const { name, value } = ev.target;\r\n    this.setState(prevState => ({\r\n      loginCred: {\r\n        ...prevState.loginCred,\r\n        [name]: value\r\n      }\r\n    }));\r\n  };\r\n\r\n  signupHandleChange = ev => {\r\n    const { name, value } = ev.target;\r\n    this.setState(prevState => ({\r\n      signupCred: {\r\n        ...prevState.signupCred,\r\n        [name]: value\r\n      }\r\n    }));\r\n  };\r\n\r\n  doLogin = async ev => {\r\n    ev.preventDefault();\r\n    const { email, password } = this.state.loginCred;\r\n    if (!email || !password) {\r\n      return this.setState({ msg: 'Please enter user/password' });\r\n    }\r\n    const userCreds = { email, password };\r\n    await this.props.login(userCreds);\r\n    this.setState({ loginCred: { email: '', password: '' } });\r\n    this.props.updateRoute('/')\r\n    this.props.history.push('/')\r\n  };\r\n\r\n  doSignup = async ev => {\r\n    ev.preventDefault();\r\n    const { email, password, username, imgURL } = this.state.signupCred;\r\n    if (!email || !password || !username) {\r\n      return this.setState({ msg: 'All inputs besides image are required!' });\r\n    }\r\n    const signupCreds = { email, password, \"username\": username, imgURL };\r\n    this.props.signup(signupCreds);\r\n    this.setState({ signupCred: { email: '', password: '', username: '', 'imgURL': '' } });\r\n    this.props.updateRoute('/')\r\n    this.props.history.push('/')\r\n  };\r\n\r\n  removeUser = userId => {\r\n    this.props.removeUser(userId);\r\n  };\r\n\r\n  render() {\r\n    let signupSection = (\r\n      <form className=\"login-form sign-up flex column space-between\" onSubmit={this.doSignup}>\r\n        <input\r\n          className=\"form-loc\"\r\n          type=\"text\"\r\n          name=\"email\"\r\n          value={this.state.signupCred.email}\r\n          onChange={this.signupHandleChange}\r\n          placeholder=\"Email\"\r\n        />\r\n        <input\r\n          className=\"form-loc\"\r\n          name=\"password\"\r\n          type=\"password\"\r\n          value={this.state.signupCred.password}\r\n          onChange={this.signupHandleChange}\r\n          placeholder=\"Password\"\r\n        />\r\n        <input\r\n          className=\"form-loc\"\r\n          type=\"text\"\r\n          name=\"username\"\r\n          value={this.state.signupCred.username}\r\n          onChange={this.signupHandleChange}\r\n          placeholder=\"Username\"\r\n        />\r\n        <input\r\n          className=\"form-loc\"\r\n          type=\"text\"\r\n          name=\"imgURL\"\r\n          value={this.state.signupCred.imgURL}\r\n          onChange={this.signupHandleChange}\r\n          placeholder=\"image\"\r\n        />\r\n        <button className=\"form-btn login-btn\">Signup</button>\r\n      </form>\r\n    );\r\n    let loginSection = (\r\n      <form className=\"login-form flex column space-between\" onSubmit={this.doLogin}>\r\n        <div>\r\n          <input\r\n            className=\"form-loc\"\r\n            type=\"text\"\r\n            name=\"email\"\r\n            value={this.state.loginCred.email}\r\n            onChange={this.loginHandleChange}\r\n            placeholder=\"Email\"\r\n          />\r\n          <input\r\n            className=\"form-loc\"\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={this.state.loginCred.password}\r\n            onChange={this.loginHandleChange}\r\n            placeholder=\"Password\"\r\n          />\r\n        </div>\r\n        <button className=\"form-btn login-btn\">Login</button>\r\n      </form>\r\n    );\r\n    const { loggedInUser } = this.props;\r\n    const consoleUser = () => {\r\n      const { loggedInUser } = this.props;      \r\n    }\r\n    let logoutSection = (\r\n      <div className=\"login-form flex column space-between\">        \r\n        <h2 onClick={consoleUser}>Welcome:  {(loggedInUser) ? loggedInUser.username : 'blah'}</h2>\r\n        <Link to=\"/\"><button className=\"form-btn login-btn\">Back to Turtle House</button></Link>\r\n        <button className=\"form-btn login-btn\" onClick={this.props.logout}>Logout</button>\r\n      </div>\r\n    )\r\n    return (\r\n      <div className=\"flex column space-between\">\r\n        {!loggedInUser && loginSection}        \r\n        {!loggedInUser && signupSection}\r\n        {(loggedInUser) ? logoutSection : ''}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    users: state.user.users,\r\n    loggedInUser: state.user.loggedInUser,\r\n    isLoading: state.system.isLoading\r\n  };\r\n};\r\nconst mapDispatchToProps = {\r\n  login,\r\n  logout,\r\n  signup,\r\n  removeUser,\r\n  loadUsers,\r\n  updateRoute\r\n\r\n};\r\n\r\nexport default Login = withRouter(connect(mapStateToProps, mapDispatchToProps)(Login));\r\n\r\n","import React, { Component } from 'react';\r\n// import HouseService from '../services/HouseService'\r\n// import { Link } from 'react-router-dom'\r\n\r\nimport { connect } from 'react-redux';\r\nimport HouseService from '../services/HouseService'\r\nimport HouseList from '../cmps/HouseList'\r\nimport NavBar from '../cmps/NavBar';\r\nimport OrderService from '../services/OrderService';\r\nimport Loading from '../cmps/Loading'\r\n\r\nclass ResrvedPage extends Component {\r\n    // state = {\r\n    //     houses: [\r\n    //         {\r\n    //             \"_id\": \"5e2eebc51c9d4400006387db\",\r\n    //             \"title\": \"house on the lake\",\r\n    //             \"description\": \"Spend a unforgettable holiday in the enchanting surroundings of the town of Cisternino (reachable from the near airports of Bari and Brindisi). Trullo Edera offers a heaven of peace and tranquillity, set in an elevated position with a stunning view. Its the perfect place if you like nature. You can stay under an olive tree reading a good book, you can have a walk in the small country streets or go to the nearest beaches. You can even easily visit any of the sights in Apulia such as the caves of Castellana, the trulli of Alberobello, the baroque cities of Lecce and Martina Franca, the excavations of Egnazia, the zoosafari of Fasano, Castel del Monte with Frederick's castle, Grottaglie famous for its ceramics, Taranto, Brindisi and Lecce museums. Prices vary on period and are to be considered included: in-outcoming cleanings, towels, sheets, water, gas, electricity.\",\r\n    //             \"owner\": {\r\n    //                 \"_id\":  \"5e2961ba155477000071afe4\",\r\n    //                 \"fullName\": \"Yael Shenker\",\r\n    //                 \"imgURL\": \"https://a0.muscache.com/im/pictures/user/e23d9c03-0de7-46f9-ba5a-c62a6358ff34.jpg?aki_policy=profile_x_medium\"\r\n    //             },\r\n    //             \"address\": {\r\n    //                 \"country\": \"spain\",\r\n    //                 \"coords\":{\r\n    //                     \"lat\": \"0\",\r\n    //                     \"lng\": \"0\"\r\n    //                 }\r\n    //             },\r\n    //             \"imgs\": [\"https://res.cloudinary.com/dnb7d7utg/image/upload/v1579255117/Tutrtle%20house/Bedrooms/apartment-bed-bedroom-chair-271624_mldlej.jpg\", \"https://res.cloudinary.com/dnb7d7utg/image/upload/v1579255737/Tutrtle%20house/Kitchens/apartment-blinds-cabinets-chairs-349749_gycx19.jpg\", \"https://res.cloudinary.com/dnb7d7utg/image/upload/v1579255859/Tutrtle%20house/Shower/oval-mirror-near-toilet-bowl-1910472_dognwb.jpg\", \"http://res.cloudinary.com/dnb7d7utg/image/upload/v1579558662/white-wooden-shelf-beside-bed-2062431_nrtib1.jpg\", \"http://res.cloudinary.com/dnb7d7utg/image/upload/v1579613457/blue-and-gray-concrete-house-with-attic-during-twilight-186077_wx3xq6.jpg\", \"http://res.cloudinary.com/dnb7d7utg/image/upload/v1579613562/black-flat-screen-tv-turned-off-210265_alzyj0.jpg\"],\r\n    //             \"capacity\": \"2\",\r\n    //             \"price\": \"170\",\r\n    //             \"rating\": \"4.92\",\r\n\r\n    //         },\r\n    //         {\r\n    //             \"_id\": \"5e2eebc51c9d4400006387db\",\r\n    //             \"title\": \"house on the lake\",\r\n    //             \"description\": \"Spend a unforgettable holiday in the enchanting surroundings of the town of Cisternino (reachable from the near airports of Bari and Brindisi). Trullo Edera offers a heaven of peace and tranquillity, set in an elevated position with a stunning view. Its the perfect place if you like nature. You can stay under an olive tree reading a good book, you can have a walk in the small country streets or go to the nearest beaches. You can even easily visit any of the sights in Apulia such as the caves of Castellana, the trulli of Alberobello, the baroque cities of Lecce and Martina Franca, the excavations of Egnazia, the zoosafari of Fasano, Castel del Monte with Frederick's castle, Grottaglie famous for its ceramics, Taranto, Brindisi and Lecce museums. Prices vary on period and are to be considered included: in-outcoming cleanings, towels, sheets, water, gas, electricity.\",\r\n    //             \"owner\": {\r\n    //                 \"_id\":  \"5e2961ba155477000071afe4\",\r\n    //                 \"fullName\": \"Yael Shenker\",\r\n    //                 \"imgURL\": \"https://a0.muscache.com/im/pictures/user/e23d9c03-0de7-46f9-ba5a-c62a6358ff34.jpg?aki_policy=profile_x_medium\"\r\n    //             },\r\n    //             \"address\": {\r\n    //                 \"country\": \"spain\",\r\n    //                 \"coords\":{\r\n    //                     \"lat\": \"0\",\r\n    //                     \"lng\": \"0\"\r\n    //                 }\r\n    //             },\r\n    //             \"imgs\": [\"https://res.cloudinary.com/dnb7d7utg/image/upload/v1579255117/Tutrtle%20house/Bedrooms/apartment-bed-bedroom-chair-271624_mldlej.jpg\", \"https://res.cloudinary.com/dnb7d7utg/image/upload/v1579255737/Tutrtle%20house/Kitchens/apartment-blinds-cabinets-chairs-349749_gycx19.jpg\", \"https://res.cloudinary.com/dnb7d7utg/image/upload/v1579255859/Tutrtle%20house/Shower/oval-mirror-near-toilet-bowl-1910472_dognwb.jpg\", \"http://res.cloudinary.com/dnb7d7utg/image/upload/v1579558662/white-wooden-shelf-beside-bed-2062431_nrtib1.jpg\", \"http://res.cloudinary.com/dnb7d7utg/image/upload/v1579613457/blue-and-gray-concrete-house-with-attic-during-twilight-186077_wx3xq6.jpg\", \"http://res.cloudinary.com/dnb7d7utg/image/upload/v1579613562/black-flat-screen-tv-turned-off-210265_alzyj0.jpg\"],\r\n    //             \"capacity\": \"2\",\r\n    //             \"price\": \"170\",\r\n    //             \"rating\": \"4.92\",\r\n\r\n    //         },\r\n    //         {\r\n    //             \"_id\": \"5e2eebc51c9d4400006387db\",\r\n    //             \"title\": \"house on the lake\",\r\n    //             \"description\": \"Spend a unforgettable holiday in the enchanting surroundings of the town of Cisternino (reachable from the near airports of Bari and Brindisi). Trullo Edera offers a heaven of peace and tranquillity, set in an elevated position with a stunning view. Its the perfect place if you like nature. You can stay under an olive tree reading a good book, you can have a walk in the small country streets or go to the nearest beaches. You can even easily visit any of the sights in Apulia such as the caves of Castellana, the trulli of Alberobello, the baroque cities of Lecce and Martina Franca, the excavations of Egnazia, the zoosafari of Fasano, Castel del Monte with Frederick's castle, Grottaglie famous for its ceramics, Taranto, Brindisi and Lecce museums. Prices vary on period and are to be considered included: in-outcoming cleanings, towels, sheets, water, gas, electricity.\",\r\n    //             \"owner\": {\r\n    //                 \"_id\":  \"5e2961ba155477000071afe4\",\r\n    //                 \"fullName\": \"Yael Shenker\",\r\n    //                 \"imgURL\": \"https://a0.muscache.com/im/pictures/user/e23d9c03-0de7-46f9-ba5a-c62a6358ff34.jpg?aki_policy=profile_x_medium\"\r\n    //             },\r\n    //             \"address\": {\r\n    //                 \"country\": \"spain\",\r\n    //                 \"coords\":{\r\n    //                     \"lat\": \"0\",\r\n    //                     \"lng\": \"0\"\r\n    //                 }\r\n    //             },\r\n    //             \"imgs\": [\"https://res.cloudinary.com/dnb7d7utg/image/upload/v1579255117/Tutrtle%20house/Bedrooms/apartment-bed-bedroom-chair-271624_mldlej.jpg\", \"https://res.cloudinary.com/dnb7d7utg/image/upload/v1579255737/Tutrtle%20house/Kitchens/apartment-blinds-cabinets-chairs-349749_gycx19.jpg\", \"https://res.cloudinary.com/dnb7d7utg/image/upload/v1579255859/Tutrtle%20house/Shower/oval-mirror-near-toilet-bowl-1910472_dognwb.jpg\", \"http://res.cloudinary.com/dnb7d7utg/image/upload/v1579558662/white-wooden-shelf-beside-bed-2062431_nrtib1.jpg\", \"http://res.cloudinary.com/dnb7d7utg/image/upload/v1579613457/blue-and-gray-concrete-house-with-attic-during-twilight-186077_wx3xq6.jpg\", \"http://res.cloudinary.com/dnb7d7utg/image/upload/v1579613562/black-flat-screen-tv-turned-off-210265_alzyj0.jpg\"],\r\n    //             \"capacity\": \"2\",\r\n    //             \"price\": \"170\",\r\n    //             \"rating\": \"4.92\",\r\n\r\n    //         },\r\n    //         {\r\n    //             \"_id\": \"5e2eebc51c9d4400006387db\",\r\n    //             \"title\": \"house on the lake\",\r\n    //             \"description\": \"Spend a unforgettable holiday in the enchanting surroundings of the town of Cisternino (reachable from the near airports of Bari and Brindisi). Trullo Edera offers a heaven of peace and tranquillity, set in an elevated position with a stunning view. Its the perfect place if you like nature. You can stay under an olive tree reading a good book, you can have a walk in the small country streets or go to the nearest beaches. You can even easily visit any of the sights in Apulia such as the caves of Castellana, the trulli of Alberobello, the baroque cities of Lecce and Martina Franca, the excavations of Egnazia, the zoosafari of Fasano, Castel del Monte with Frederick's castle, Grottaglie famous for its ceramics, Taranto, Brindisi and Lecce museums. Prices vary on period and are to be considered included: in-outcoming cleanings, towels, sheets, water, gas, electricity.\",\r\n    //             \"owner\": {\r\n    //                 \"_id\":  \"5e2961ba155477000071afe4\",\r\n    //                 \"fullName\": \"Yael Shenker\",\r\n    //                 \"imgURL\": \"https://a0.muscache.com/im/pictures/user/e23d9c03-0de7-46f9-ba5a-c62a6358ff34.jpg?aki_policy=profile_x_medium\"\r\n    //             },\r\n    //             \"address\": {\r\n    //                 \"country\": \"spain\",\r\n    //                 \"coords\":{\r\n    //                     \"lat\": \"0\",\r\n    //                     \"lng\": \"0\"\r\n    //                 }\r\n    //             },\r\n    //             \"imgs\": [\"https://res.cloudinary.com/dnb7d7utg/image/upload/v1579255117/Tutrtle%20house/Bedrooms/apartment-bed-bedroom-chair-271624_mldlej.jpg\", \"https://res.cloudinary.com/dnb7d7utg/image/upload/v1579255737/Tutrtle%20house/Kitchens/apartment-blinds-cabinets-chairs-349749_gycx19.jpg\", \"https://res.cloudinary.com/dnb7d7utg/image/upload/v1579255859/Tutrtle%20house/Shower/oval-mirror-near-toilet-bowl-1910472_dognwb.jpg\", \"http://res.cloudinary.com/dnb7d7utg/image/upload/v1579558662/white-wooden-shelf-beside-bed-2062431_nrtib1.jpg\", \"http://res.cloudinary.com/dnb7d7utg/image/upload/v1579613457/blue-and-gray-concrete-house-with-attic-during-twilight-186077_wx3xq6.jpg\", \"http://res.cloudinary.com/dnb7d7utg/image/upload/v1579613562/black-flat-screen-tv-turned-off-210265_alzyj0.jpg\"],\r\n    //             \"capacity\": \"2\",\r\n    //             \"price\": \"170\",\r\n    //             \"rating\": \"4.92\",\r\n\r\n    //         },\r\n    //         {\r\n    //             \"_id\": \"5e2eebc51c9d4400006387db\",\r\n    //             \"title\": \"house on the lake\",\r\n    //             \"description\": \"Spend a unforgettable holiday in the enchanting surroundings of the town of Cisternino (reachable from the near airports of Bari and Brindisi). Trullo Edera offers a heaven of peace and tranquillity, set in an elevated position with a stunning view. Its the perfect place if you like nature. You can stay under an olive tree reading a good book, you can have a walk in the small country streets or go to the nearest beaches. You can even easily visit any of the sights in Apulia such as the caves of Castellana, the trulli of Alberobello, the baroque cities of Lecce and Martina Franca, the excavations of Egnazia, the zoosafari of Fasano, Castel del Monte with Frederick's castle, Grottaglie famous for its ceramics, Taranto, Brindisi and Lecce museums. Prices vary on period and are to be considered included: in-outcoming cleanings, towels, sheets, water, gas, electricity.\",\r\n    //             \"owner\": {\r\n    //                 \"_id\":  \"5e2961ba155477000071afe4\",\r\n    //                 \"fullName\": \"Yael Shenker\",\r\n    //                 \"imgURL\": \"https://a0.muscache.com/im/pictures/user/e23d9c03-0de7-46f9-ba5a-c62a6358ff34.jpg?aki_policy=profile_x_medium\"\r\n    //             },\r\n    //             \"address\": {\r\n    //                 \"country\": \"spain\",\r\n    //                 \"coords\":{\r\n    //                     \"lat\": \"0\",\r\n    //                     \"lng\": \"0\"\r\n    //                 }\r\n    //             },\r\n    //             \"imgs\": [\"https://res.cloudinary.com/dnb7d7utg/image/upload/v1579255117/Tutrtle%20house/Bedrooms/apartment-bed-bedroom-chair-271624_mldlej.jpg\", \"https://res.cloudinary.com/dnb7d7utg/image/upload/v1579255737/Tutrtle%20house/Kitchens/apartment-blinds-cabinets-chairs-349749_gycx19.jpg\", \"https://res.cloudinary.com/dnb7d7utg/image/upload/v1579255859/Tutrtle%20house/Shower/oval-mirror-near-toilet-bowl-1910472_dognwb.jpg\", \"http://res.cloudinary.com/dnb7d7utg/image/upload/v1579558662/white-wooden-shelf-beside-bed-2062431_nrtib1.jpg\", \"http://res.cloudinary.com/dnb7d7utg/image/upload/v1579613457/blue-and-gray-concrete-house-with-attic-during-twilight-186077_wx3xq6.jpg\", \"http://res.cloudinary.com/dnb7d7utg/image/upload/v1579613562/black-flat-screen-tv-turned-off-210265_alzyj0.jpg\"],\r\n    //             \"capacity\": \"2\",\r\n    //             \"price\": \"170\",\r\n    //             \"rating\": \"4.92\",\r\n\r\n    //         }\r\n    //     ]\r\n    // }\r\n    state = {\r\n        houses: null\r\n\r\n    }\r\n    componentDidMount() {        \r\n        this.loadReservedHouses()\r\n        // eturn houses\r\n    }\r\n    loadReservedHouses = async () => {\r\n        const orderIds = this.props.loggedInUser.reserved\r\n        try {\r\n            let storedOrders = await OrderService.getOrders({ orders: orderIds })\r\n            let housesPrms = storedOrders.map(async (storedOrder) => {\r\n                let house = await HouseService.get(storedOrder.houseId)\r\n                house.status = storedOrder.status\r\n                return house;\r\n            })\r\n            let houses = await Promise.all(housesPrms)            \r\n            this.setState({ houses: houses })\r\n        }\r\n        catch (err) {\r\n            throw err\r\n        }\r\n    }\r\n    getFilteredHouses = (statusInput) => {\r\n        let houses = this.state.houses.filter(house => { if (house.status === statusInput) return house })\r\n        return houses\r\n    }\r\n\r\n    render() {\r\n        const { houses } = this.state\r\n        if (houses && houses.length === 0) return (<div className=\"reservedpage-container\">            \r\n            <div className=\"reserved-container-none\">\r\n                <h2 className=\"reservedpage\">My Reserved Houses</h2>\r\n                <div>No reserved items to show</div>\r\n            </div>\r\n        </div>)\r\n        else {\r\n            return (\r\n                <div className=\"reservedpage-container\">                    \r\n                    {(this.props.isLoading || !houses) && <Loading />}\r\n                    {(houses) && <div className=\"reservedpage-content-container\">\r\n                        <h2 className=\"reservedpage\">My Reserved Houses</h2>\r\n                        <div className=\"reservedpage-not-confirmed-houses\">\r\n                            <h3 className=\"reservedpage\">Not Yet Confirmed by House Owner</h3>\r\n                            {(houses) && <HouseList caller={\"reservedpage\"} houses={this.getFilteredHouses('initial')}></HouseList>}\r\n                        </div>\r\n                        <div className=\"reservedpage-confirmed-houses\">\r\n                            <h3 className=\"reservedpage\">Confirmed by House Owner</h3>\r\n                            {(houses) && <HouseList caller={\"reservedpage\"} houses={this.getFilteredHouses('accepted')}></HouseList>}\r\n                        </div>\r\n                        <div className=\"reservedpage-confirmed-houses\">\r\n                            <h3 className=\"reservedpage\">Rejected by House Owner</h3>\r\n                            {(houses) && <HouseList caller={\"reservedpage\"} houses={this.getFilteredHouses('rejected')}></HouseList>}\r\n                        </div>\r\n                    </div>}\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        // houses: state.house.houses,\r\n        // filterBy: state.house.filterBy\r\n        loggedInUser: state.user.loggedInUser\r\n    };\r\n};\r\n// const mapDispatchToProps = {\r\n//     // loadHouses,\r\n//     filterHouses,\r\n//     setFilter,\r\n//     deleteHouse\r\n// };\r\n\r\nexport default connect(mapStateToProps, null)(ResrvedPage)","import React, { Component } from 'react';\r\n// import HouseService from '../services/HouseService'\r\n// import { Link } from 'react-router-dom'\r\n// import { AddToFavorites } from '../actions/HouseActions'\r\nimport { loadFavorites } from '../actions/HouseActions'\r\n\r\nimport { connect } from 'react-redux';\r\nimport HouseService from '../services/HouseService'\r\nimport HouseList from '../cmps/HouseList'\r\nimport NavBar from '../cmps/NavBar';\r\nimport Loading from '../cmps/Loading'\r\n\r\n\r\nclass Favorites extends Component {    \r\n    \r\n    componentDidMount() {\r\n        this.loadFavoriteHouses()        \r\n\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.loggedInUser !== this.props.loggedInUser) {\r\n            this.loadFavoriteHouses()\r\n        }\r\n    }\r\n\r\n\r\n    loadFavoriteHouses = async () => {\r\n        const favoriteIds = this.props.loggedInUser.favorites        \r\n        this.props.loadFavorites(favoriteIds)\r\n    }\r\n\r\n    render() {\r\n        const { houses } = this.props        \r\n           return (\r\n           <div>                \r\n                <div className=\"favorites-container\">\r\n                    <h2 className=\"favorites\">My Favorite Houses</h2>\r\n                    {(houses && !this.props.isLoading) && <HouseList houses={this.props.houses}></HouseList>}\r\n                    {(this.props.isLoading || !houses) && <Loading />}\r\n                </div>\r\n            </div>)\r\n        \r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        houses: state.house.favorites,\r\n        loggedInUser: state.user.loggedInUser,\r\n        isLoading: state.system.isLoading\r\n    };\r\n};\r\nconst mapDispatchToProps = {    \r\n    loadFavorites\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Favorites)","import React, { Component } from \"react\";\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport '../assets/styles/main.css'\r\nimport { loadUsers } from \"../actions/UserActions\";\r\nimport UserService from '../services/UserService'\r\nimport moment from 'moment'\r\n// export default function RequestPreview(props){\r\n//this.props.confirmGuest(ev,props.request)\r\nexport default class RequestPreview extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {}\r\n    }\r\n    componentDidMount() {\r\n        this.loadUser(this.props.request.byUser._id);\r\n\r\n    }\r\n    loadUser = async (userId) => {\r\n        let requestingUser = await UserService.getById(userId)        \r\n        this.setState({ user: requestingUser })\r\n    }\r\n    render() {\r\n        if (this.state.user) {\r\n            return (\r\n                <div className=\"request-preview\">                   \r\n\r\n                    <div className=\"request-preview-user-img-container requests\">\r\n                        <img src={this.state.user.imgURL} className=\"request-preview-user-img\" />\r\n                    </div>\r\n                    <div className=\"request-preview-details user-details\">\r\n                        <span className=\"request-preview-details-header\">User Details</span>\r\n                        <span className=\"request-preview-details-detail\">{this.state.user.username}</span>\r\n                        <span className=\"request-preview-details-detail\">{this.state.user.email}</span>\r\n                    </div>\r\n                    <div className=\"request-preview-details\">\r\n                        <span className=\"request-preview-details-header\">Request Details</span>\r\n                        <span className=\"request-preview-details-detail\">{moment(this.props.request.startDate).format(\"MMM Do YY\")}</span>\r\n                        <span className=\"request-preview-details-detail\">{moment(this.props.request.endDate).format(\"MMM Do YY\")}</span>\r\n                        <span className=\"request-preview-details-detail\">{(this.props.request.numOfPeople > 1) ? this.props.request.numOfPeople + ' people' : this.props.request.numOfPeople + ' person'}</span>\r\n                        <div className=\"request-preview-btns small-screen\">\r\n                            <div className=\"request-preview-btn yes\" onClick={() => this.props.handleRequest(this.props.request, 'accepted')}>YES</div>\r\n                            <div className=\"request-preview-btn no\" onClick={() => this.props.handleRequest(this.props.request, 'rejected')}>NO</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"request-preview-btns big-screen\">\r\n                        <div className=\"request-preview-btn yes big-screen\" onClick={() => this.props.handleRequest(this.props.request, 'accepted')}>YES</div>\r\n                        <div className=\"request-preview-btn no big-screen\" onClick={() => this.props.handleRequest(this.props.request, 'rejected')}>NO</div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n        else return (<div></div>)\r\n\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport OrderService from '../services/OrderService'\r\nimport '../assets/styles/main.css'\r\nimport RequestPreview from './RequestPreview'\r\nclass RequestList extends Component {\r\n\r\n    handleRequest = async (request, answer) => {\r\n        let requestCOPY = { ...request }\r\n        if (answer === 'accepted') requestCOPY.status = 'accepted'\r\n        if (answer === 'rejected') requestCOPY.status = 'rejected'\r\n        let requestUpdate = await OrderService.save(requestCOPY)\r\n        \r\n\r\n    }\r\n    \r\n    render() {       \r\n        return (\r\n            <section className={\"request-container\"}>\r\n                {(!this.props.house.requests || (this.props.house.requests.length === 0)) && <div className=\"request-list-empty\"> No new requests</div>}\r\n                <ul className=\"request-list clean-list\">\r\n                    {this.props.house.requests && (this.props.house.requests.length > 0) && this.props.house.requests.map(request => <li key={request._id}><RequestPreview request={request} handleRequest={this.props.handleRequest} /></li>)}\r\n                </ul>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        \r\n        loggedInUser: state.user.loggedInUser,\r\n        isLoading: state.system.isLoading\r\n    };\r\n};\r\n\r\n\r\nexport default connect(mapStateToProps, null)(RequestList)\r\n","import React, { Component } from 'react';\r\n// import { Link } from 'react-router-dom'\r\nimport { connect } from 'react-redux';\r\nimport NavBar from '../cmps/NavBar';\r\nimport RequestList from '../cmps/RequestList'\r\nimport OrderService from '../services/OrderService'\r\nimport '../assets/styles/main.css'\r\nimport HouseService from '../services/HouseService'\r\nimport Loading from '../cmps/Loading'\r\nclass RequestPage extends Component {\r\n    state = {\r\n        houses: [],\r\n        isDoneLoadingHouses: false\r\n    }\r\n    componentDidMount() {\r\n        this.loadHouseData()\r\n    }\r\n    loadHouseData = async () => {\r\n\r\n        try {\r\n            let filter = { ids: this.props.loggedInUser.houses }\r\n            let resHouses = await HouseService.query(filter);\r\n            // this.setState({ houses: resHouses })\r\n            let requestsPrms = resHouses.map(house => {\r\n                let filterBy = {\r\n                    houserequests: true,\r\n                    houseId: house._id\r\n                }\r\n                return OrderService.getOrders(filterBy)\r\n            })\r\n            let requests = await Promise.all(requestsPrms)\r\n            let newHouses = resHouses.map((house, idx) => {\r\n                let newRequests = requests[idx].filter((request) => { if (request.status === 'initial') return request })\r\n                house.requests = newRequests;\r\n                return house;\r\n            })\r\n            this.setState({ houses: newHouses, isDoneLoadingHouses: true })\r\n        }\r\n        catch (err) {\r\n            console.log('err', err)\r\n            throw err\r\n        }\r\n    }\r\n    handleRequest = async (request, answer) => {\r\n        let requestCOPY = { ...request }\r\n        if (answer === 'accepted') requestCOPY.status = 'accepted'\r\n        if (answer === 'rejected') requestCOPY.status = 'rejected'\r\n        alert(`order ${requestCOPY.status}! Now wait for database response..`)\r\n        console.log('pakaaaaa :', this.state)\r\n        let house = this.state.houses.find(house => { if (requestCOPY.houseId === house._id) return house })\r\n        console.log('house is: ', house)\r\n        let request_idx = house.requests.findIndex(request => { if (request._id === requestCOPY._id) return request })\r\n        // console.log('request_turlak is: ', request_turlak)\r\n        house.requests[request_idx] = requestCOPY\r\n        console.log('house is: ', house)\r\n        try {\r\n            let requestUpdate = await OrderService.save(requestCOPY)\r\n            console.log('rqst: ', requestUpdate)\r\n            alert(`data base updated successfully, order ${requestUpdate[0].status}`)\r\n            // alert(`order ${requestUpdate[0].status}!`)\r\n            this.setState({ ...this.state, house })\r\n        } catch (err) {\r\n            console.log('err is: ', err)\r\n            throw err;\r\n        }\r\n\r\n    }\r\n\r\n    loadLists = () => {\r\n        let lists = null\r\n        if (this.state.houses) {\r\n            console.log('houses in loadlists are: ', this.state.houses)\r\n            lists = this.state.houses.filter(house => {\r\n                let InitialRequests = -1;\r\n                if (house.requests) {\r\n                    InitialRequests = house.requests.filter(request => { if (request.status === 'initial') return request })\r\n                }\r\n                if (house.requests && InitialRequests.length > 0) return house;\r\n            }).map((house, idx) => {\r\n\r\n                return (\r\n                    <div className=\"house-requests-list-container\" key={idx}>\r\n                        <div className=\"house-requests-house-name-container\">\r\n                            <h2 className=\"house-requests-house-name\">{(house.title) ? house.title : 'Loading..'}</h2>\r\n                        </div>\r\n                        <RequestList house={house} handleRequest={this.handleRequest}\r\n                            filterBy={''} style={{ \"marginTop\": \"120px\" }} key={idx} />\r\n                    </div>)\r\n\r\n            })\r\n        }\r\n\r\n        console.log('req render lists are: ', lists)\r\n        if (lists === null || this.props.isLoading || !this.state.isDoneLoadingHouses) return (<Loading />)\r\n        if (lists && lists.length === 0 && !this.props.isLoading && this.state.isDoneLoadingHouses) return (<div className=\"empty-requests\">No requests!</div>)\r\n        return lists\r\n    }\r\n    render() {\r\n        console.log('im render and i render things')\r\n        return (\r\n            <div className=\"request-page-container\">\r\n                <div className=\"request-page-sub-container\">\r\n                    <h1 className=\"request-page-header\">My Requests</h1>\r\n                    <div className=\"house-requests-container\">\r\n                        {this.loadLists()}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        houses: state.house.houses,\r\n        filterBy: state.house.filterBy,\r\n        isLoading: state.system.isLoading,\r\n        loggedInUser: state.user.loggedInUser,\r\n    };\r\n};\r\n// const mapDispatchToProps = {\r\n//     loadHouses,\r\n//     filterHouses,\r\n//     setFilter,\r\n//     deleteHouse\r\n// };\r\n\r\nexport default connect(mapStateToProps, null)(RequestPage)","import React, { Component } from 'react';\r\nimport { setMyHouses } from '../actions/HouseActions'\r\nimport { connect } from 'react-redux';\r\nimport HouseService from '../services/HouseService'\r\nimport HouseList from '../cmps/HouseList'\r\nimport NavBar from '../cmps/NavBar';\r\nimport Loading from '../cmps/Loading'\r\n\r\nimport '../assets/styles/main.css'\r\nclass Favorites extends Component {\r\n\r\n\r\n    componentDidMount() {\r\n        this.props.setMyHouses(this.props.loggedInUser.houses)\r\n    }\r\n\r\n\r\n    render() {\r\n        const { houses } = this.props\r\n\r\n        return (\r\n            <div className=\"my-houses-page-container\">\r\n                {/* <NavBar caller={\"reservedpage\"}></NavBar> */}\r\n                <span className=\"my-houses-header\">My Houses</span>\r\n                {(houses && !this.props.isLoading) && <HouseList houses={this.props.houses}></HouseList>}\r\n                {(this.props.isLoading || !houses) && <Loading />}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        houses: state.house.myHouses,\r\n        loggedInUser: state.user.loggedInUser,\r\n        isLoading: state.system.isLoading\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    setMyHouses\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Favorites)","import React from \"react\";\r\nimport userProfileImg from \"../assets/img/user_prof_img.png\";\r\nimport '../assets/styles/chat.css'\r\nexport default function ChatMessagePreview(props) {\r\n    return (\r\n        <div className=\"chat-message-preview-container\">\r\n            <div className=\"nav-item-user-img-container visible\" >\r\n                <img src={props.message.imgURL || userProfileImg} className=\"nav-item-user-img\" />\r\n            </div>\r\n            <span className=\"chat-message-content\">{props.message.content}</span>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React, { Component } from \"react\";\r\nimport { connect } from 'react-redux';\r\nimport ChatMessagePreview from '../cmps/ChatMessagePreview'\r\nimport '../assets/styles/chat.css'\r\nimport socketIOClient from \"socket.io-client\";\r\nimport OverflowScrolling from 'react-overflow-scrolling';\r\nclass Chat extends Component {\r\n    state = {\r\n        currMessage: {\r\n            username: this.props.loggedInUser.username || null,\r\n            imgURL: this.props.loggedInUser.imgURL || null,\r\n            content: ''\r\n        },\r\n    }\r\n    handleMessage = ev => {\r\n        const { name, value } = ev.target;\r\n        this.setState(prevState => ({\r\n            currMessage: {\r\n                ...prevState.currMessage,\r\n                [name]: value\r\n            }\r\n        }));\r\n    };\r\n    postMessage = (ev) => {\r\n        if (!this.state.currMessage.content) return;\r\n        this.props.socket.emit('userMsg', this.state.currMessage);\r\n    }\r\n\r\n    messagesList = () => {\r\n        if (!this.props.messages) return (<div></div>)\r\n        else {\r\n            return (\r\n                <ul className=\"chat-messages-list\">\r\n                    {this.props.messages.map((message, idx) => <li key={idx} className=\"message-preview-item\"><ChatMessagePreview message={message} /></li>)}\r\n                </ul>\r\n            )\r\n        }\r\n\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"chat-container\">\r\n                <div className=\"chat-messages-container\">\r\n                    {this.messagesList()}\r\n                </div>\r\n                <div className=\"chat-input-container\">\r\n                    <input className=\"user-chat-input\" type=\"text\" name=\"content\" value={this.state.currMessage.content} onChange={this.handleMessage} />\r\n                    <button className=\"form-btn\" onClick={this.postMessage}>Send</button>\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.user.loggedInUser,\r\n        isLoading: state.system.isLoading,\r\n        currRoute: state.system.currRoute\r\n    };\r\n};\r\nexport default connect(mapStateToProps, null)(Chat)","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport NavBar from '../cmps/NavBar';\r\nimport Chat from '../cmps/Chat'\r\nimport '../assets/styles/chat.css'\r\nimport socketIOClient from \"socket.io-client\";\r\nclass ChatRoomPage extends Component {\r\n    state = {\r\n        messages: [],\r\n        socket: socketIOClient('http://localhost:3030')\r\n    }\r\n    componentDidMount() {\r\n        document.querySelector('body').classList.add('chatPage')\r\n        let { socket } = this.state\r\n        if (socket) socket.on('serverMsg', (data) => {\r\n            let newMessages = [...this.state.messages]\r\n            console.log('chat here, data is: ', data)\r\n            newMessages.push(data)\r\n            this.setState({ messages: newMessages }, () => console.log(this.state.messages))\r\n        });\r\n        // console.log('before setState: ', this.state)\r\n    }\r\n    componentWillUnmount() {\r\n        document.querySelector('body').classList.remove('chatPage')\r\n    }\r\n    render() {\r\n        return (<div className=\"chat-room-page-container\">\r\n            <Chat socket={this.state.socket} messages={this.state.messages} />\r\n        </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.user.loggedInUser\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, null)(ChatRoomPage)","import React, { Component } from \"react\";\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport '../assets/styles/nav.css'\r\n\r\nimport whiteLogo from '../assets/img/turtle3.png'\r\nimport blackLogo from '../assets/img/turtle4.png'\r\nimport userProfileImg from \"../assets/img/user_prof_img.png\";\r\nimport SearchBar from \"./SearchBar\";\r\nimport FilterBar from \"./FilterBar\";\r\nimport history from '../history'\r\nclass Nav extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { width: 0, height: 0, currPath: null, isMenuOpen: false, mediaQuery: 770 };\r\n        this.updateWindowDimensions = this.updateWindowDimensions.bind(this);\r\n\r\n    }\r\n    componentDidMount() {\r\n        this.updateWindowDimensions();\r\n        let path = this.props.history.location.pathname\r\n        this.configNavDesign(path);\r\n        window.addEventListener('resize', this.updateWindowDimensions);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('resize', this.updateWindowDimensions);\r\n    }\r\n    componentDidUpdate(prevProps) {        \r\n        if (prevProps.location.pathname !== this.props.location.pathname) {\r\n            let path = this.props.location.pathname;            \r\n            this.configNavDesign(path)\r\n        }       \r\n    }\r\n\r\n    updateWindowDimensions() {\r\n        this.setState({ width: window.innerWidth, height: window.innerHeight });\r\n    }\r\n    toggleHamburger = () => {\r\n        const screenWidth = this.state.width;\r\n        let navListBackground = document.querySelector('.nav-list-background')\r\n        if (screenWidth <= this.state.mediaQuery) {\r\n            let menu = !this.state.isMenuOpen\r\n            let newState = { isMenuOpen: menu }\r\n            this.setState({ ...this.state, ...newState })            \r\n            document.querySelector('.logo-burger').classList.toggle('open')\r\n            navListBackground.classList.toggle('open')\r\n            document.querySelector('.nav-list').classList.toggle('open')\r\n            document.querySelector('.logo').classList.toggle('open')\r\n            let searchBar = document.querySelector('.nav-search-bar')\r\n            if (searchBar) searchBar.classList.toggle('open')\r\n            let searchForm = document.querySelector('.search-form');\r\n            if (searchForm) searchForm.classList.toggle('menu-open')\r\n        }\r\n        \r\n    }\r\n    changeClassName = (node, str, action) => {\r\n        var children = node.childNodes;\r\n        for (var i = 0; i < children.length; i++) {\r\n            this.changeClassName(children[i], str, action);\r\n        }\r\n        if (action === 'add') {\r\n            if (node && node.classList) node.classList.add(str)\r\n        }\r\n        if (action === 'remove') {\r\n            if (node && node.classList && node.classList.contains(str)) node.classList.remove(str)\r\n        }\r\n    }\r\n    configNavDesign = (path, userClick = false) => {\r\n        if (path === '/') {\r\n            let navContainer = document.querySelector('.nav-container')\r\n            this.changeClassName(navContainer, 'home', 'add')\r\n\r\n        }\r\n        if (path !== '/') {\r\n            let navContainer = document.querySelector('.nav-container')\r\n            this.changeClassName(navContainer, 'home', 'remove')\r\n        }\r\n        this.setState({ ...this.state, currPath: path })\r\n        if (userClick === true && this.state.width < this.state.mediaQuery) this.toggleHamburger()\r\n    }\r\n    profileImageRender = () => {\r\n        if (this.state.width > this.state.mediaQuery) {\r\n            if (this.props.loggedInUser) {\r\n                return (\r\n                    <div >\r\n                        <div className=\"nav-item-user-img-container visible\" >\r\n                            <img src={this.props.loggedInUser.imgURL || userProfileImg} className=\"nav-item-user-img\" />\r\n                        </div>\r\n                    </div>\r\n                )\r\n            } else {\r\n                return (<div className=\"nav-link\">Login/Signup</div>)\r\n\r\n            }\r\n\r\n\r\n        } else {\r\n            if (this.props.loggedInUser) {\r\n                return (<div className=\"nav-link\">({this.props.loggedInUser.username})Logout</div>)\r\n            } else {\r\n                return (<div className=\"nav-link\">Login/Signup</div>)\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n    render() {        \r\n        return (<div className=\"nav-container\">\r\n            <div className=\"nav-list-background\"></div>\r\n            <ul className=\"nav-list\">\r\n                <li>\r\n                    <div className=\"logo-container\" onClick={this.toggleHamburger}>\r\n                        <img src={whiteLogo} alt=\"\" className=\"logo\" />\r\n                        <span className=\"logo-burger\">^</span>\r\n                    </div>\r\n                </li>\r\n                {(this.state.currPath !== '/' && !this.state.isMenuOpen) && <li className=\"nav-search-bar-container\" id=\"one\"><SearchBar /></li>}\r\n                {(this.state.currPath !== '/') && <li className={\"nav-item push\"} onClick={() => this.configNavDesign('/', true)}><Link to=\"/\" className=\"nav-link\">Home</Link></li>}\r\n                {this.props.loggedInUser && <li className={(this.state.currPath !== '/') ? \"nav-item\" : \"nav-item push\"} onClick={() => this.configNavDesign('/reserved', true)}><Link to=\"/reserved\" className=\"nav-link\" >Reserved</Link></li>}\r\n                {this.props.loggedInUser && <li className=\"nav-item\" onClick={() => this.configNavDesign('/requests', true)}><Link to=\"/requests\" className=\"nav-link\">Requets</Link></li>}\r\n                {this.props.loggedInUser && <li className=\"nav-item\" onClick={() => this.configNavDesign('/favorites', true)}><Link to=\"/favorites\" className=\"nav-link\">Favorites</Link></li>}\r\n                {this.props.loggedInUser && <li className=\"nav-item\" onClick={() => this.configNavDesign('/house/edit', true)}><Link to=\"/house/edit\" className=\"nav-link\">Host</Link></li>}\r\n                {this.props.loggedInUser && <li className=\"nav-item\" onClick={() => this.configNavDesign('/house/edit', true)}><Link to=\"/myhouses\" className=\"nav-link\">My Houses</Link></li>}\r\n                {this.props.loggedInUser && <li className=\"nav-item\" onClick={() => this.configNavDesign('/chat', true)}><Link to=\"/chat\" className=\"nav-link\">Chat</Link></li>}\r\n                <li className={(!this.props.loggedInUser && (this.state.currPath === '/')) ? \"nav-item push\" : \"nav-item\"} onClick={() => this.configNavDesign('/about', true)}><Link to=\"/about\" className=\"nav-link\">About</Link></li>\r\n                <li className=\"nav-item\" onClick={() => this.configNavDesign('/login', true)}><Link to=\"/login\" className=\"nav-link\">{this.profileImageRender()}</Link></li>\r\n            </ul>\r\n\r\n            {((this.state.currPath === '/house') && !this.state.isMenuOpen) && <div className=\"nav-filter-bar-container\"><FilterBar /></div>}\r\n        </div>)\r\n    }\r\n\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.user.loggedInUser,\r\n        isLoading: state.system.isLoading,\r\n        currRoute: state.system.currRoute\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n\r\n};\r\nexport default Nav = withRouter(connect(mapStateToProps, null)(Nav))","import React from 'react';\r\nimport { Router, Switch, Route } from 'react-router';\r\nimport { Link } from 'react-router-dom'\r\nimport history from './history';\r\nimport '../src/assets/styles/main.css';\r\n\r\nimport Home from './pages/Home.js';\r\nimport About from './pages/About.js';\r\nimport HouseEdit from './pages/HouseEdit'\r\n\r\n\r\nimport HousePage from './pages/HousePage';\r\nimport HouseDetails from './pages/HouseDetails';\r\nimport NavBar from './cmps/NavBar';\r\nimport Login from './pages/Login';\r\nimport ReservedPage from './pages/ReservedPage';\r\n\r\nimport Favorites from './pages/Favorites';\r\nimport RequestPage from './pages/RequestPage';\r\nimport MyHouses from './pages/MyHouses';\r\nimport ChatRoomPage from './pages/ChatRoomPage';\r\nimport Nav from './cmps/Nav'\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <Router history={history}>\r\n        <Nav />\r\n        <Switch>\r\n          <Route path=\"/\" component={Home} exact />\r\n          <Route path=\"/requests\" component={RequestPage} exact />\r\n          <Route path=\"/reserved\" component={ReservedPage} exact />\r\n          <Route path=\"/favorites\" component={Favorites} exact />\r\n          <Route path=\"/myhouses\" component={MyHouses} exact />\r\n          <Route path=\"/login\" component={Login} exact />\r\n          <Route path=\"/house\" component={HousePage} exact />\r\n          <Route path=\"/about\" component={About} exact />\r\n          <Route path=\"/house/edit\" component={HouseEdit} exact />\r\n          <Route path=\"/house/edit/:id\" component={HouseEdit} exact />\r\n          <Route path=\"/house/:id\" component={HouseDetails} exact />\r\n          <Route path=\"/chat\" component={ChatRoomPage} exact />\r\n          {/* <Route path=\"house/edit:id\" component={HouseEdit} exact/> */}\r\n        </Switch>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","const initialState = {\r\n  houses: [],\r\n  favorites: [],\r\n  israel:[],\r\n  italy:[],\r\n  spain:[],\r\n  myHouses:[],\r\n  filterBy: { numOfperson: 1, location: '', price:1000},\r\n  selectedHouse: null\r\n};\r\n\r\nexport default function (state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'SET_HOUSES':      \r\n      return { ...state, houses: action.houses };\r\n    case 'SET_FILTER':      \r\n      return { ...state, filterBy: { ...state.filterBy, ...action.filter } };\r\n    case 'HOUSE_ADD':      \r\n      return { ...state, houses: [...state.houses, action.house] };\r\n    case 'HOUSE_UPDATE':      \r\n      return {\r\n        ...state, houses: state.houses.map(house =>\r\n          house._id === action.house._id ? action.house : house)\r\n      };\r\n    case 'HOUSE_ADD_REVIEW':      \r\n      return {\r\n        ...state, houses: state.houses.map(house => {\r\n          if (house._id !== action.house._id) {\r\n            return house\r\n          }\r\n          const reviews = house.reviews\r\n          let reviewsToUpdate = reviews.slice()\r\n          reviewsToUpdate.splice(reviews.length, 0, action.review)\r\n          const houseToUpdate = { ...house, reviews: reviewsToUpdate }\r\n\r\n          return houseToUpdate\r\n      })\r\n    }\r\n    case 'HOUSE_REMOVE':\r\n      return { ...state, houses: state.houses.filter(house => house._id !== action.houseId) }\r\n    case 'SET_FAVS':\r\n      return { ...state, favorites: action.houses }\r\n    case 'SET_BEST_ISRAEL':      \r\n      return { ...state, israel: action.houses }\r\n    case 'SET_BEST_ITALY':      \r\n      return { ...state, italy: action.houses }\r\n    case 'SET_BEST_SPAIN':      \r\n      return { ...state, spain: action.houses }\r\n    case 'SET_MY_HOUSES':      \r\n      return { ...state, myHouses: action.houses}\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","let localLoggedinUser = null;\r\n\r\n\r\nif (sessionStorage.user ){\r\n  localLoggedinUser = JSON.parse(sessionStorage.user);\r\n}\r\n\r\nconst initialState = {\r\n  loggedInUser: localLoggedinUser,\r\n  users: []\r\n};\r\n\r\nexport default function(state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'SET_USER':\r\n      sessionStorage.setItem('user', JSON.stringify(action.user))\r\n      return { ...state, loggedInUser: action.user };\r\n    case 'USER_REMOVE':\r\n      return {\r\n        ...state,\r\n        users: state.users.filter(user => user._id !== action.userId)\r\n      };\r\n    case 'SET_USERS':\r\n      return { ...state, users: action.users };\r\n    // case 'USER_LOAD':\r\n    //     console.log('userload', action.user)        \r\n    //     return { ...state, users: action.user };\r\n    case 'USER_LOAD':        \r\n        sessionStorage.setItem('user', JSON.stringify(action.user))\r\n        return { ...state, loggedInUser: action.user };\r\n      default:\r\n      return state;\r\n  }\r\n}\r\n","const initialState = {\r\n  isLoading: false,\r\n  currRoute: null\r\n};\r\n\r\nexport default function (state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'LOADING_START':\r\n      return { ...state, isLoading: true };\r\n    case 'LOADING_DONE':\r\n      return { ...state, isLoading: false };\r\n    case 'UPDATE_ROUTE':\r\n      console.log('system reducer here: route is : ', action.route)\r\n      return { ...state, currRoute: action.route }\r\n    default: return state;\r\n  }\r\n}\r\n","const initialState = {\r\n  orders: [],\r\n  selectedOrder: null\r\n};\r\n\r\nexport default function(state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'SET_ORDERS':\r\n      return { ...state, orders: action.orders };\r\n    case 'ORDER_ADD':\r\n      return { ...state, orders: [...state.orders, action.order] };\r\n    case 'ORDER_UPDATE':\r\n      return {\r\n        ...state,\r\n        orders: state.orders.map(order =>\r\n          order._id === action.order._id ? action.order : order\r\n        )};\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n // 'SET_ORDERS','SET_FILTER','ORDER_UPDATE','ORDER_REMOVE','ORDER_ADD',","const initialState = {\r\n    socket: null,\r\n};\r\n\r\nexport default function (state = initialState, action = {}) {\r\n    var retObj;\r\n    switch (action.type) {\r\n        case 'INIT_SOCKET':\r\n            retObj = { ...state, socket: action.socket };\r\n            console.log('new state socket reducer: ', retObj)\r\n            return retObj\r\n        case 'REMOVE_SOCKET':\r\n            retObj = { ...state, socket: null };\r\n            console.log('new state socket reducer: ', retObj)\r\n            return retObj\r\n        default: return state;\r\n    }\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport HouseReducer from './HouseReducer'\r\nimport UserReducer from './UserReducer'\r\nimport SystemReducer from './SystemReducer';\r\nimport OrderReducer from './OrderReducer';\r\nimport SocketReducer from './SocketReducer';\r\nconst rootReducer = combineReducers({\r\n  house: HouseReducer,\r\n  system: SystemReducer,\r\n  user: UserReducer,\r\n  order:OrderReducer,\r\n  socket:SocketReducer\r\n})\r\n\r\nexport default rootReducer;","import { createStore, applyMiddleware, compose } from 'redux';\r\n\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './reducers/index';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ||compose;\r\n\r\nconst Store = createStore(\r\n  rootReducer,\r\n  composeEnhancers(applyMiddleware(thunk))\r\n);\r\n\r\nexport default Store;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\n// TODO: use scss\r\n// import '../src/assets/styles/index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport Store from './store';\r\n\r\nReactDOM.render(\r\n    <div>\r\n\r\n    <Provider store={Store}> \r\n        <App />\r\n     </Provider>\r\n    </div>\r\n    ,document.getElementById('root')\r\n)\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","module.exports = __webpack_public_path__ + \"static/media/user_prof_img.7ea4af7d.png\";","module.exports = __webpack_public_path__ + \"static/media/turtle3.891f6be3.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAEVklEQVRIie2US0xcVRjH/+fc1zwYmGEoTEEcZkoDgrQgVFzUSJO2MREsaSOpT1JqTVzQaLQJPpKyMI3SuFBjEx9FmrqwTmqUmrggLQ0N0qIgFaLyKPTdQd4zzDBz7z33uKAYoFDGBRvDb3fP993/73zn3FxgjTVWCbJawc8dq3FYLOQoM3gFQCSBkm5d0w82HKi7uGriF7940yOJUpvH5bLneTMVSRBxe2wUbX/0hDSdbTl5oO5PcaWQd8se9XCR75FFoZxz7uacxxFKJzknPaquHh+QvGd8Ph+b63/+6+p4SZMvbPJuSMpxZwhz6+4UF0LRiLlnaPAwgL3LimueynOYrdbPGEOpx5NE0lITTTabGZIsQI1q9rGx6Yy/+m4/kRu83rvx6eLSI42XhgFA0W0NHpfLOV/6+XunQCjB3tdKafeVKyUAsKT4nd0FbpFIFzPcyY6CArciisKCusUsw263wutNsXV2Dm3uH/CfBrC18vihnYok7ijKesg0v59QAhACi8kEZhgOYIk7ri0pMRnOSG9+fnpadlaasLi+GINzfHe6PapqOol60yc3VuxJzkhxzdYMDkIAQmY14WgEjT+3TtbvO+K4Z2IjMfS2y5WYFIsUACgh2L79YYVSgh9/upzsTk4BAEQ1Dec6fw2ZFJkUZ+daQIDWnu4wIcZXwKKjrq0FZb+TgwX5bkss0jksVgUtrQN4YOtjIIRgOjKDpo5LoaiqHZsKE6mx7cI+gHKANwStppp7xPrlR7IUk0ATEmL3+v1TaPtlEI78zfDsKoPBOc51doTCEe3wif3vf3i37fXF7y0QcxCnIstscdNSjI4G0dVzC8EIg/fZCjhzsgEAXQN90bCqtsyTLsnCOzbotXAoInNwkCX+LYwZuHptFL1XRjCjMTy4cweyiotABAoA0JmO3hvXuQG9aqWNLxBLiviqzph5amoG9rvHbXAO/51JDN0Yx82b40hwpyOtfNfshGTh5q4O+7lAaXN95VH/fxLrmv5GWVkhESjB9WujuDUcwI2bY7Akr8O6oi0oqtwEJd62bNjIxERYVbXvV5L+K67+uFoJWq1vhfsG1R/OdMiionBHRjqx5xWi8IU8KPaEWLIQmAlpDBiKWRywWE5SYNtUdqY6nuVVN7hSWW5Orjkm2zy4AUME1WIWn3j5g4q5hZe+PFSlMfYJAPjHx/D3xISRGJ9AE6xWKLIEWZSgahoimoapUBATgSBb53AI6xOdsJot0khwMiNm8XwUUdrtcjotANA12D89Fgg0yYKYwjgyDYPZDMMwCwINUyIEKCX9UU0dThq3P7k+0RmX6nTa7oyOlANoWEm84LOsqq/xgpCePY+XmMeDQTT/1jERjFNcvopadbmAZ76tlW2hqH9bfqHDGW+Dr+X8DDFYZv3+utv3E9P5Dzo3PtIZM586fxZNHe3gYK/cTwoAvopa1WCoaupoxzfNZ8EYMzOOT1eaeI01/n/8A/b9texTbh2NAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/turtle4.95469977.png\";"],"sourceRoot":""}